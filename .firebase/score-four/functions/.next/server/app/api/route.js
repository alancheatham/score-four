"use strict";(()=>{var e={};e.id=755,e.ids=[755],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6113:e=>{e.exports=require("crypto")},3685:e=>{e.exports=require("http")},5687:e=>{e.exports=require("https")},5477:e=>{e.exports=require("punycode")},2781:e=>{e.exports=require("stream")},7310:e=>{e.exports=require("url")},9796:e=>{e.exports=require("zlib")},818:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>q,originalPathname:()=>O,requestAsyncStorage:()=>v,routeModule:()=>x,serverHooks:()=>b,staticGenerationAsyncStorage:()=>y,staticGenerationBailout:()=>S});var n={};t.r(n),t.d(n,{POST:()=>P,pusher:()=>g}),t(5655);var i=t(3323),o=t(4647),l=t(6886);function s(e){if(16!==e.length){let r=[];for(let t=0;t<16;t++)r.push(e.slice(4*t,4*t+4));e=r}let r="";return(r=function(e){let r=[];for(let t=0;t<4;t++)for(let n=0;n<4;n++)for(let i=0;i<4;i++){let o=4*n+i,l=e[o][t],s=u(l,r,i);if(s)return{winner:s,winningPegs:[o,o-1,o-2,o-3]};!1===s&&(r=[])}}(e))||(r=function(e){let r=[];for(let t=0;t<4;t++)for(let n=0;n<4;n++)for(let i=0;i<4;i++){let o=4*i+n,l=e[o][t],s=u(l,r,i);if(s)return{winner:s,winningPegs:[o,o-4,o-8,o-12]};!1===s&&(r=[])}}(e))||(r=function(e){let r=[];for(let t=0;t<4;t++){for(let n=0;n<4;n++){let i=5*n,o=e[i][t],l=u(o,r,n);if(l)return{winner:l,winningPegs:[0,5,10,15]};!1===l&&(r=[])}for(let n=0;n<4;n++){let i=3*n+3,o=e[i][t],l=u(o,r,n);if(l)return{winner:l,winningPegs:[3,6,9,12]};!1===l&&(r=[])}}}(e))||(r=function(e){let r=[];for(let t=0;t<4;t++)for(let n=0;n<4;n++)for(let i=0;i<4;i++){let o=4*t+n,l=e[o][i],s=u(l,r,i);if(s)return{winner:s,winningPegs:[o]};!1===s&&(r=[])}}(e))||(r=function(e){let r=[];for(let t=0;t<4;t++){for(let n=0;n<4;n++){let i=4*t+n,o=e[i][n],l=u(o,r,n);if(l)return{winner:l,winningPegs:[i,i-1,i-2,i-3]};!1===l&&(r=[])}for(let n=0;n<4;n++){let i=4*t+n,o=e[i][3-n],l=u(o,r,n);if(l)return{winner:l,winningPegs:[i,i-1,i-2,i-3]};!1===l&&(r=[])}}}(e))||(r=function(e){let r=[];for(let t=0;t<4;t++){for(let n=0;n<4;n++){let i=4*n+t,o=e[i][n],l=u(o,r,n);if(l)return{winner:l,winningPegs:[i,i-4,i-8,i-12]};!1===l&&(r=[])}for(let n=0;n<4;n++){let i=4*n+t,o=e[i][3-n],l=u(o,r,n);if(l)return{winner:l,winningPegs:[i,i-4,i-8,i-12]};!1===l&&(r=[])}}}(e))||(r=function(e){let r=[];for(let t=0;t<2;t++)for(let n=0;n<4;n++){let i=5*n,o=0===t?e[i][3-n]:e[i][n],l=u(o,r,n);if(l)return{winner:l,winningPegs:[0,5,10,15]};!1===l&&(r=[])}for(let t=0;t<2;t++)for(let n=0;n<4;n++){let i=3*n+3,o=0===t?e[i][3-n]:e[i][n],l=u(o,r,n);if(l)return{winner:l,winningPegs:[3,6,9,12]};!1===l&&(r=[])}}(e))?r:!function(e){for(let r=0;r<16;r++)if(e[r].findIndex(e=>0===e)>-1)return!1;return!0}(e)?r:{winner:"draw",winningPegs:[],board:e}}function u(e,r,t){if(0===e)return!1;if(0===t)r.push(e);else{if(e!==r[t-1])return!1;if(3===t)return 1==e?"W":"B";r.push(e)}}let f=()=>{let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";return Array.from({length:15},()=>e.charAt(Math.floor(Math.random()*e.length))).join("")};var a=t(2984),p=t.n(a);let g=new(p())({appId:process.env.PUSHER_APP_ID,key:"1e06bf145be2669ab894",secret:process.env.PUSHER_SECRET,cluster:"us2",useTLS:!0}),c=Array(64).fill(0),d={},w=async(e,r)=>{c[e.slot]=-1;let t=function(e,r){let t=[];for(let r=0;r<16;r++)t.push(e.slice(4*r,4*r+4));let n=s(t);if(console.log(n),r){let e=function(e){var r;let t=(r=e,[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15].filter(e=>r[e].findIndex(e=>0===e)>-1)),n=Math.floor(Math.random()*t.length),i=e[n].indexOf(0),o=4*t[n]+i;for(let r of t){let t=JSON.parse(JSON.stringify(e)),n=t[r].indexOf(0);t[r][n]=1;let i=s(t);if(i){let e=i.winner;if("W"===e){o=4*r+n;break}}if(n=(t=JSON.parse(JSON.stringify(e)))[r].indexOf(0),t[r][n]=-1,i=s(t)){let e=i.winner;if("B"===e){o=4*r+n;break}}}if(!isNaN(o))return o}(t);t[Math.floor(e/4)][e%4]=1,n=s(t)}return{board:t.flat(),winnerInfo:n}}(c,!0);return c=t.board,await g.trigger("score-four","move",{message:{...t},sender:"computer"}),new Response("success",{status:200})},h=async()=>{let e=f();return d[e]={board:Array(64).fill(0),winner:"",winningPegs:[],whiteToMove:!0},l.Z.json({gameId:e},{status:200})};async function P(e,r){let{message:t,sender:n}=await e.json();switch(t.type){case"new-game":return await h(t,n);case"move":return await w(t,n);default:return new Response("Invalid request",{status:400})}}let m=i.AppRouteRouteModule,x=new m({definition:{kind:o.x.APP_ROUTE,page:"/api/route",pathname:"/api",filename:"route",bundlePath:"app/api/route"},resolvedPagePath:"/Users/alan/programming/score-four/src/app/api/route.js",nextConfigOutput:"",userland:n}),{requestAsyncStorage:v,staticGenerationAsyncStorage:y,serverHooks:b,headerHooks:q,staticGenerationBailout:S}=x,O="/api/route"}};var r=require("../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),n=r.X(0,[506,405,74],()=>t(818));module.exports=n})();