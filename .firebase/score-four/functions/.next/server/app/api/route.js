"use strict";(()=>{var e={};e.id=755,e.ids=[755],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},20818:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>x,originalPathname:()=>O,requestAsyncStorage:()=>P,routeModule:()=>h,serverHooks:()=>v,staticGenerationAsyncStorage:()=>m,staticGenerationBailout:()=>y});var n={};r.r(n),r.d(n,{POST:()=>p}),r(95655);var i=r(83323),o=r(54647),l=r(66886);function f(e){if(16!==e.length){let t=[];for(let r=0;r<16;r++)t.push(e.slice(4*r,4*r+4));e=t}let t="";return(t=function(e){let t=[];for(let r=0;r<4;r++)for(let n=0;n<4;n++)for(let i=0;i<4;i++){let o=4*n+i,l=e[o][r],f=s(l,t,i);if(f)return{winner:f,winningPegs:[o,o-1,o-2,o-3]};!1===f&&(t=[])}}(e))||(t=function(e){let t=[];for(let r=0;r<4;r++)for(let n=0;n<4;n++)for(let i=0;i<4;i++){let o=4*i+n,l=e[o][r],f=s(l,t,i);if(f)return{winner:f,winningPegs:[o,o-4,o-8,o-12]};!1===f&&(t=[])}}(e))||(t=function(e){let t=[];for(let r=0;r<4;r++){for(let n=0;n<4;n++){let i=5*n,o=e[i][r],l=s(o,t,n);if(l)return{winner:l,winningPegs:[0,5,10,15]};!1===l&&(t=[])}for(let n=0;n<4;n++){let i=3*n+3,o=e[i][r],l=s(o,t,n);if(l)return{winner:l,winningPegs:[3,6,9,12]};!1===l&&(t=[])}}}(e))||(t=function(e){let t=[];for(let r=0;r<4;r++)for(let n=0;n<4;n++)for(let i=0;i<4;i++){let o=4*r+n,l=e[o][i],f=s(l,t,i);if(f)return{winner:f,winningPegs:[o]};!1===f&&(t=[])}}(e))||(t=function(e){let t=[];for(let r=0;r<4;r++){for(let n=0;n<4;n++){let i=4*r+n,o=e[i][n],l=s(o,t,n);if(l)return{winner:l,winningPegs:[i,i-1,i-2,i-3]};!1===l&&(t=[])}for(let n=0;n<4;n++){let i=4*r+n,o=e[i][3-n],l=s(o,t,n);if(l)return{winner:l,winningPegs:[i,i-1,i-2,i-3]};!1===l&&(t=[])}}}(e))||(t=function(e){let t=[];for(let r=0;r<4;r++){for(let n=0;n<4;n++){let i=4*n+r,o=e[i][n],l=s(o,t,n);if(l)return{winner:l,winningPegs:[i,i-4,i-8,i-12]};!1===l&&(t=[])}for(let n=0;n<4;n++){let i=4*n+r,o=e[i][3-n],l=s(o,t,n);if(l)return{winner:l,winningPegs:[i,i-4,i-8,i-12]};!1===l&&(t=[])}}}(e))||(t=function(e){let t=[];for(let r=0;r<2;r++)for(let n=0;n<4;n++){let i=5*n,o=0===r?e[i][3-n]:e[i][n],l=s(o,t,n);if(l)return{winner:l,winningPegs:[0,5,10,15]};!1===l&&(t=[])}for(let r=0;r<2;r++)for(let n=0;n<4;n++){let i=3*n+3,o=0===r?e[i][3-n]:e[i][n],l=s(o,t,n);if(l)return{winner:l,winningPegs:[3,6,9,12]};!1===l&&(t=[])}}(e))?t:!function(e){for(let t=0;t<16;t++)if(e[t].findIndex(e=>0===e)>-1)return!1;return!0}(e)?t:{winner:"draw",winningPegs:[],board:e}}function s(e,t,r){if(0===e)return!1;if(0===r)t.push(e);else{if(e!==t[r-1])return!1;if(3===r)return 1==e?"W":"B";t.push(e)}}let a=()=>{let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";return Array.from({length:15},()=>e.charAt(Math.floor(Math.random()*e.length))).join("")},u=Array(64).fill(0),g={},c=async(e,t)=>{u[e.slot]=-1;let r=function(e,t){let r=[];for(let t=0;t<16;t++)r.push(e.slice(4*t,4*t+4));let n=f(r);if(console.log(n),t){let e=function(e){var t;let r=(t=e,[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15].filter(e=>t[e].findIndex(e=>0===e)>-1)),n=Math.floor(Math.random()*r.length),i=e[n].indexOf(0),o=4*r[n]+i;for(let t of r){let r=JSON.parse(JSON.stringify(e)),n=r[t].indexOf(0);r[t][n]=1;let i=f(r);if(i){let e=i.winner;if("W"===e){o=4*t+n;break}}if(n=(r=JSON.parse(JSON.stringify(e)))[t].indexOf(0),r[t][n]=-1,i=f(r)){let e=i.winner;if("B"===e){o=4*t+n;break}}}if(!isNaN(o))return o}(r);r[Math.floor(e/4)][e%4]=1,n=f(r)}return{board:r.flat(),winnerInfo:n}}(u,!0);return u=r.board,await pusher.trigger("score-four","move",{message:{...r},sender:"computer"}),new Response("success",{status:200})},d=async()=>{let e=a();return g[e]={board:Array(64).fill(0),winner:"",winningPegs:[],whiteToMove:!0},l.Z.json({gameId:e},{status:200})};async function p(e,t){let{message:r,sender:n}=await e.json();switch(r.type){case"new-game":return await d(r,n);case"move":return await c(r,n);default:return new Response("Invalid request",{status:400})}}let w=i.AppRouteRouteModule,h=new w({definition:{kind:o.x.APP_ROUTE,page:"/api/route",pathname:"/api",filename:"route",bundlePath:"app/api/route"},resolvedPagePath:"/Users/alan/programming/score-four/src/app/api/route.js",nextConfigOutput:"",userland:n}),{requestAsyncStorage:P,staticGenerationAsyncStorage:m,serverHooks:v,headerHooks:x,staticGenerationBailout:y}=h,O="/api/route"}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[506,405,886],()=>r(20818));module.exports=n})();