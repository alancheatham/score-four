(()=>{var e={};e.id=531,e.ids=[531],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},85158:e=>{"use strict";e.exports=require("http2")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},67740:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>f,originalPathname:()=>p,pages:()=>d,routeModule:()=>g,tree:()=>c});var n=r(73137),s=r(54647),i=r(4183),o=r.n(i),l=r(71775),a={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(a[e]=()=>l[e]);r.d(t,a);let u=n.AppPageRouteModule,c=["",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,20391)),"/Users/alan/programming/score-four/src/app/[id]/page.js"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,26543)),"/Users/alan/programming/score-four/src/app/layout.js"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,51918,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["/Users/alan/programming/score-four/src/app/[id]/page.js"],p="/[id]/page",f={require:r,loadChunk:()=>Promise.resolve()},g=new u({definition:{kind:s.x.APP_PAGE,page:"/[id]/page",pathname:"/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},28143:(e,t,r)=>{Promise.resolve().then(r.bind(r,20286))},20286:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f});var n=r(60080);r(52451);var s=r(9885),i=r(91311),o=r(48203),l=r(53255),a=r(4030);function u(e){if(16!==e.length){let t=[];for(let r=0;r<16;r++)t.push(e.slice(4*r,4*r+4));e=t}let t="";return(t=function(e){let t=[];for(let r=0;r<4;r++)for(let n=0;n<4;n++)for(let s=0;s<4;s++){let i=4*n+s,o=e[i][r],l=c(o,t,s);if(l)return{winner:l,winningPegs:[i,i-1,i-2,i-3]};!1===l&&(t=[])}}(e))||(t=function(e){let t=[];for(let r=0;r<4;r++)for(let n=0;n<4;n++)for(let s=0;s<4;s++){let i=4*s+n,o=e[i][r],l=c(o,t,s);if(l)return{winner:l,winningPegs:[i,i-4,i-8,i-12]};!1===l&&(t=[])}}(e))||(t=function(e){let t=[];for(let r=0;r<4;r++){for(let n=0;n<4;n++){let s=5*n,i=e[s][r],o=c(i,t,n);if(o)return{winner:o,winningPegs:[0,5,10,15]};!1===o&&(t=[])}for(let n=0;n<4;n++){let s=3*n+3,i=e[s][r],o=c(i,t,n);if(o)return{winner:o,winningPegs:[3,6,9,12]};!1===o&&(t=[])}}}(e))||(t=function(e){let t=[];for(let r=0;r<4;r++)for(let n=0;n<4;n++)for(let s=0;s<4;s++){let i=4*r+n,o=e[i][s],l=c(o,t,s);if(l)return{winner:l,winningPegs:[i]};!1===l&&(t=[])}}(e))||(t=function(e){let t=[];for(let r=0;r<4;r++){for(let n=0;n<4;n++){let s=4*r+n,i=e[s][n],o=c(i,t,n);if(o)return{winner:o,winningPegs:[s,s-1,s-2,s-3]};!1===o&&(t=[])}for(let n=0;n<4;n++){let s=4*r+n,i=e[s][3-n],o=c(i,t,n);if(o)return{winner:o,winningPegs:[s,s-1,s-2,s-3]};!1===o&&(t=[])}}}(e))||(t=function(e){let t=[];for(let r=0;r<4;r++){for(let n=0;n<4;n++){let s=4*n+r,i=e[s][n],o=c(i,t,n);if(o)return{winner:o,winningPegs:[s,s-4,s-8,s-12]};!1===o&&(t=[])}for(let n=0;n<4;n++){let s=4*n+r,i=e[s][3-n],o=c(i,t,n);if(o)return{winner:o,winningPegs:[s,s-4,s-8,s-12]};!1===o&&(t=[])}}}(e))||(t=function(e){let t=[];for(let r=0;r<2;r++)for(let n=0;n<4;n++){let s=5*n,i=0===r?e[s][3-n]:e[s][n],o=c(i,t,n);if(o)return{winner:o,winningPegs:[0,5,10,15]};!1===o&&(t=[])}for(let r=0;r<2;r++)for(let n=0;n<4;n++){let s=3*n+3,i=0===r?e[s][3-n]:e[s][n],o=c(i,t,n);if(o)return{winner:o,winningPegs:[3,6,9,12]};!1===o&&(t=[])}}(e))?t:!function(e){for(let t=0;t<16;t++)if(e[t].findIndex(e=>0===e)>-1)return!1;return!0}(e)?t:{winner:"draw",winningPegs:[],board:e}}function c(e,t,r){if(0===e)return!1;if(0===r)t.push(e);else{if(e!==t[r-1])return!1;if(3===r)return 1==e?"W":"B";t.push(e)}}function d({beads:e,onPegClick:t,className:r}){return n.jsx("div",{className:`bg-gray-400 rounded w-8 h-28 flex flex-col-reverse items-center justify-start overflow-hidden ${r}`,onClick:t,children:e.filter(e=>0!==e).map((e,t)=>n.jsx("div",{className:`w-full h-6 border-t border-gray-400 ${1===e?"bg-white":"bg-black"}`},`bead-${t}`))})}function p({board:e,onPegClick:t,winningPegs:r,myTurn:s,status:i}){let o=[];for(let t=0;t<16;t++)o.push(e.slice(4*t,4*t+4));return n.jsx("div",{className:"grid grid-cols-4 grid-rows-4 gap-10",children:o.map((e,o)=>n.jsx(d,{beads:e,onPegClick:()=>t(o),className:`${r.length>0&&!r.includes(o)&&"opacity-30"} ${s&&!e.find(e=>0===e)&&i===l.Bj&&"cursor-pointer"}`},`peg-${o}`))})}function f({game:e,id:t}){let[r,c]=(0,s.useState)(JSON.parse(e.moves.slice(-1)[0].position)),[d,f]=(0,s.useState)(e.moves),[g,m]=(0,s.useState)(e.status),[x,h]=(0,s.useState)(e.winner),[w,v]=(0,s.useState)(e.winningPegs),b=(0,s.useRef)(!1),P=localStorage.getItem("user")===e.blackPlayer.uid,[j,y]=(0,s.useState)(P?e.moves.length%2==1:e.moves.length%2==0),q=d.findIndex(e=>e.position===JSON.stringify(r)),k=q===d.length-1,_=(0,s.useRef)(null);(0,s.useEffect)(()=>{if(_.current){let e=_.current.scrollHeight*(parseInt((q-1)/2)/(d.length/2))-_.current.getBoundingClientRect().height/2+30;_.current.scrollTop=e}},[_,q,d]);let N=u(r);!x&&N&&(v(N.winningPegs),h(N.winner));let S=(0,s.useCallback)(e=>{c(JSON.parse(e.position)),h(""),v([])},[_,q,d]),I=(0,s.useCallback)(e=>{switch(e.key){case"ArrowLeft":q>1&&S(d[q-1]);break;case"ArrowRight":q<d.length-1&&S(d[q+1]);break;case"ArrowUp":q>1&&S(d[1]);break;case"ArrowDown":q<d.length-1&&S(d[d.length-1])}},[q,d,S]);return(0,s.useEffect)(()=>{b.current||((0,a.am)(t,e=>{let t=JSON.parse(e.moves.slice(-1)[0].position);c(t),f(e.moves),m(e.status),y(P?e.moves.length%2==1:e.moves.length%2==0)}),b.current=!0)},[b]),(0,s.useEffect)(()=>(document.addEventListener("keydown",I),()=>{document.removeEventListener("keydown",I)}),[I]),(0,n.jsxs)("main",{className:"flex min-h-screen items-center text-white justify-center p-16",children:[n.jsx("div",{className:`bg-slate-500 p-20 rounded-md relative ${"W"===x?"text-white":"B"===x?"text-black":""}`,children:n.jsx("div",{children:n.jsx(p,{board:r,onPegClick:e=>{let n=[...r],s=n.slice(4*e,4*e+4),a=s.findIndex(e=>0===e);if(!j||-1===a||g!==l.Bj||!k)return;y(!1),n[4*e+a]=P?-1:1,c(n);let d=u(n);d&&(v(d.winningPegs),h(d.winner)),(0,i.Ss)(t,(0,o.c)(e),n,d?.winner,d?.winningPegs)},winningPegs:w,myTurn:j,status:g})})}),(0,n.jsxs)("div",{className:"bg-slate-800 w-64 h-48 ml-8 flex flex-col rounded overflow-hidden",children:[n.jsx("div",{className:`text-xl w-full text-center h-8 flex align-items-center justify-center ${(j&&!P||!j&&P)&&"text-white"}`,children:x?"W"===x?"White Wins":"B"===x?"Black Wins":"Draw":g!==l.Qc?g===l.Rl?"Waiting for Opponent":j?"Your Turn":"Opponent's Turn":"Game Completed"}),n.jsx("div",{ref:_,className:"grid grid-cols-[30px_1fr_1fr] grow-1 bg-slate-800 m-h-0 overflow-y-auto overflow-x-hidden no-scrollbar",children:d.slice(1).map((e,t)=>(0,n.jsxs)(s.Fragment,{children:[t%2==0&&n.jsx("div",{className:"text-center bg-slate-500",children:t/2+1}),n.jsx("div",{className:`cursor-pointer pl-4 ${q===t+1?"bg-slate-600":"hover:bg-slate-700"}`,onClick:()=>S(e),children:e.lastMove})]},`move-${t}`))})]})]})}r(49050)},20391:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var n=r(48144),s=r(17536);let i=(0,s.createProxy)(String.raw`/Users/alan/programming/score-four/src/components/Game.js`),{__esModule:o,$$typeof:l}=i,a=i.default;var u=r(57613),c=r(40125),d=r(19186);let p=(0,u.ZF)({apiKey:"AIzaSyD9eYEtwrIUPDp4b_4x_e1zset6SmIpt_I",authDomain:"score-four.firebaseapp.com",projectId:"score-four",storageBucket:"485195295425",messagingSenderId:"1:485195295425:web:07b44dbcecb811a6014240",appId:"G-RNN3F03DQJ"}),f=(0,c.ad)(p);async function g(e){let t=await (0,c.QT)((0,c.JU)(f,"games",e));return t.data()}async function m({params:e}){let t=await g(e.id);return n.jsx("div",{children:n.jsx(a,{id:e.id,game:t})})}(0,d.v0)(p),new d.hJ}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[430,506,885,997,543,425],()=>r(67740));module.exports=n})();