exports.id=68,exports.ids=[68],exports.modules={2068:(t,e,r)=>{/*!
 * Pusher JavaScript Library v8.3.0
 * https://pusher.com/
 *
 * Copyright 2020, Pusher
 * Released under the MIT licence.
 */t.exports=function(t){var e={};function r(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,r),s.l=!0,s.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e||4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(n,s,(function(e){return t[e]}).bind(null,s));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=21)}([function(t,e){t.exports=r(3837)},function(t,e,r){var n=r(22),s=n.Buffer;function i(t,e){for(var r in t)e[r]=t[r]}function o(t,e,r){return s(t,e,r)}s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?t.exports=n:(i(n,e),e.Buffer=o),i(s,o),o.from=function(t,e,r){if("number"==typeof t)throw TypeError("Argument must not be a number");return s(t,e,r)},o.alloc=function(t,e,r){if("number"!=typeof t)throw TypeError("Argument must be a number");var n=s(t);return void 0!==e?"string"==typeof r?n.fill(e,r):n.fill(e):n.fill(0),n},o.allocUnsafe=function(t){if("number"!=typeof t)throw TypeError("Argument must be a number");return s(t)},o.allocUnsafeSlow=function(t){if("number"!=typeof t)throw TypeError("Argument must be a number");return n.SlowBuffer(t)}},function(t,e,r){"use strict";var n=r(1).Buffer,s=r(23).EventEmitter,i=r(0),o=r(24),a=r(9),h=r(25),c=function(t,e,r){s.call(this),c.validateOptions(r||{},["maxLength","masking","requireMasking","protocols"]),this._request=t,this._reader=new h,this._options=r||{},this._maxLength=this._options.maxLength||this.MAX_LENGTH,this._headers=new a,this.__queue=[],this.readyState=0,this.url=e,this.io=new o.IO(this),this.messages=new o.Messages(this),this._bindEventListeners()};i.inherits(c,s),c.isWebSocket=function(t){var e=t.headers.connection||"",r=t.headers.upgrade||"";return"GET"===t.method&&e.toLowerCase().split(/ *, */).indexOf("upgrade")>=0&&"websocket"===r.toLowerCase()},c.validateOptions=function(t,e){for(var r in t)if(0>e.indexOf(r))throw Error("Unrecognized option: "+r)};var u={MAX_LENGTH:67108863,STATES:["connecting","open","closing","closed"],_bindEventListeners:function(){var t=this;this.messages.on("error",function(){}),this.on("message",function(e){var r=t.messages;r.readable&&r.emit("data",e.data)}),this.on("error",function(e){var r=t.messages;r.readable&&r.emit("error",e)}),this.on("close",function(){var e=t.messages;e.readable&&(e.readable=e.writable=!1,e.emit("end"))})},getState:function(){return this.STATES[this.readyState]||null},addExtension:function(t){return!1},setHeader:function(t,e){return!(this.readyState>0)&&(this._headers.set(t,e),!0)},start:function(){var t;if(0!==this.readyState)return!1;if(!c.isWebSocket(this._request))return this._failHandshake(Error("Not a WebSocket request"));try{t=this._handshakeResponse()}catch(t){return this._failHandshake(t)}return this._write(t),-1!==this._stage&&this._open(),!0},_failHandshake:function(t){var e=new a;return e.set("Content-Type","text/plain"),e.set("Content-Length",n.byteLength(t.message,"utf8")),e=["HTTP/1.1 400 Bad Request",e.toString(),t.message],this._write(n.from(e.join("\r\n"),"utf8")),this._fail("protocol_error",t.message),!1},text:function(t){return this.frame(t)},binary:function(t){return!1},ping:function(){return!1},pong:function(){return!1},close:function(t,e){return 1===this.readyState&&(this.readyState=3,this.emit("close",new c.CloseEvent(null,null)),!0)},_open:function(){this.readyState=1,this.__queue.forEach(function(t){this.frame.apply(this,t)},this),this.__queue=[],this.emit("open",new c.OpenEvent)},_queue:function(t){return this.__queue.push(t),!0},_write:function(t){var e=this.io;e.readable&&e.emit("data",t)},_fail:function(t,e){this.readyState=2,this.emit("error",Error(e)),this.close()}};for(var l in u)c.prototype[l]=u[l];c.ConnectEvent=function(){},c.OpenEvent=function(){},c.CloseEvent=function(t,e){this.code=t,this.reason=e},c.MessageEvent=function(t){this.data=t},c.PingEvent=function(t){this.data=t},c.PongEvent=function(t){this.data=t},t.exports=c},function(t,e){t.exports=r(6113)},function(t,e,r){"use strict";var n=r(2),s=r(26),i=r(37);t.exports={client:function(t,e){return void 0===(e=e||{}).masking&&(e.masking=!0),new s(t,e)},server:function(t){return void 0===(t=t||{}).requireMasking&&(t.requireMasking=!0),new i(t)},http:function(){return i.http.apply(i,arguments)},isSecureRequest:function(t){return i.isSecureRequest(t)},isWebSocket:function(t){return n.isWebSocket(t)},validateOptions:function(t,e){n.validateOptions(t,e)}}},function(t,e){t.exports=r(2781)},function(t,e){t.exports=r(7310)},function(t,e,r){"use strict";var n=function(t,e){for(var r in this.type=t,e)this[r]=e[r]};n.prototype.initEvent=function(t,e,r){this.type=t,this.bubbles=e,this.cancelable=r},n.prototype.stopPropagation=function(){},n.prototype.preventDefault=function(){},n.CAPTURING_PHASE=1,n.AT_TARGET=2,n.BUBBLING_PHASE=3,t.exports=n},function(t,e,r){"use strict";var n,s=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){void 0===t&&(t="="),this._paddingCharacter=t}return t.prototype.encodedLength=function(t){return this._paddingCharacter?(t+2)/3*4|0:(8*t+5)/6|0},t.prototype.encode=function(t){for(var e="",r=0;r<t.length-2;r+=3){var n=t[r]<<16|t[r+1]<<8|t[r+2];e+=this._encodeByte(n>>>18&63)+this._encodeByte(n>>>12&63)+this._encodeByte(n>>>6&63)+this._encodeByte(n>>>0&63)}var s=t.length-r;if(s>0){var n=t[r]<<16|(2===s?t[r+1]<<8:0);e+=this._encodeByte(n>>>18&63)+this._encodeByte(n>>>12&63),2===s?e+=this._encodeByte(n>>>6&63):e+=this._paddingCharacter||"",e+=this._paddingCharacter||""}return e},t.prototype.maxDecodedLength=function(t){return this._paddingCharacter?t/4*3|0:(6*t+7)/8|0},t.prototype.decodedLength=function(t){return this.maxDecodedLength(t.length-this._getPaddingLength(t))},t.prototype.decode=function(t){if(0===t.length)return new Uint8Array(0);for(var e=this._getPaddingLength(t),r=t.length-e,n=new Uint8Array(this.maxDecodedLength(r)),s=0,i=0,o=0,a=0,h=0,c=0,u=0;i<r-4;i+=4)a=this._decodeChar(t.charCodeAt(i+0)),h=this._decodeChar(t.charCodeAt(i+1)),c=this._decodeChar(t.charCodeAt(i+2)),u=this._decodeChar(t.charCodeAt(i+3)),n[s++]=a<<2|h>>>4,n[s++]=h<<4|c>>>2,n[s++]=c<<6|u,o|=256&a,o|=256&h,o|=256&c,o|=256&u;if(i<r-1&&(a=this._decodeChar(t.charCodeAt(i)),h=this._decodeChar(t.charCodeAt(i+1)),n[s++]=a<<2|h>>>4,o|=256&a,o|=256&h),i<r-2&&(c=this._decodeChar(t.charCodeAt(i+2)),n[s++]=h<<4|c>>>2,o|=256&c),i<r-3&&(u=this._decodeChar(t.charCodeAt(i+3)),n[s++]=c<<6|u,o|=256&u),0!==o)throw Error("Base64Coder: incorrect characters for decoding");return n},t.prototype._encodeByte=function(t){var e=t;return String.fromCharCode(e+=65+(25-t>>>8&6)+(51-t>>>8&-75)+(61-t>>>8&-15)+(62-t>>>8&3))},t.prototype._decodeChar=function(t){return 256+((42-t&t-44)>>>8&-256+t-43+62)+((46-t&t-48)>>>8&-256+t-47+63)+((47-t&t-58)>>>8&-256+t-48+52)+((64-t&t-91)>>>8&-256+t-65+0)+((96-t&t-123)>>>8&-256+t-97+26)},t.prototype._getPaddingLength=function(t){var e=0;if(this._paddingCharacter){for(var r=t.length-1;r>=0&&t[r]===this._paddingCharacter;r--)e++;if(t.length<4||e>2)throw Error("Base64Coder: incorrect padding")}return e},t}();e.Coder=i;var o=new i;e.encode=function(t){return o.encode(t)},e.decode=function(t){return o.decode(t)};var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype._encodeByte=function(t){var e=t;return String.fromCharCode(e+=65+(25-t>>>8&6)+(51-t>>>8&-75)+(61-t>>>8&-13)+(62-t>>>8&49))},e.prototype._decodeChar=function(t){return 256+((44-t&t-46)>>>8&-256+t-45+62)+((94-t&t-96)>>>8&-256+t-95+63)+((47-t&t-58)>>>8&-256+t-48+52)+((64-t&t-91)>>>8&-256+t-65+0)+((96-t&t-123)>>>8&-256+t-97+26)},e}(i);e.URLSafeCoder=a;var h=new a;e.encodeURLSafe=function(t){return h.encode(t)},e.decodeURLSafe=function(t){return h.decode(t)},e.encodedLength=function(t){return o.encodedLength(t)},e.maxDecodedLength=function(t){return o.maxDecodedLength(t)},e.decodedLength=function(t){return o.decodedLength(t)}},function(t,e,r){"use strict";var n=function(){this.clear()};n.prototype.ALLOWED_DUPLICATES=["set-cookie","set-cookie2","warning","www-authenticate"],n.prototype.clear=function(){this._sent={},this._lines=[]},n.prototype.set=function(t,e){if(void 0!==e){t=this._strip(t),e=this._strip(e);var r=t.toLowerCase();(!this._sent.hasOwnProperty(r)||this.ALLOWED_DUPLICATES.indexOf(r)>=0)&&(this._sent[r]=!0,this._lines.push(t+": "+e+"\r\n"))}},n.prototype.toString=function(){return this._lines.join("")},n.prototype._strip=function(t){return t.toString().replace(/^ */,"").replace(/ *$/,"")},t.exports=n},function(t,e,r){"use strict";var n=r(27).HTTPParser,s=r(1).Buffer,i={request:n.REQUEST||"request",response:n.RESPONSE||"response"},o=function(t){this._type=t,this._parser=new n(i[t]),this._complete=!1,this.headers={};var e=null,r=this;this._parser.onHeaderField=function(t,r,n){e=t.toString("utf8",r,r+n).toLowerCase()},this._parser.onHeaderValue=function(t,n,s){var i=t.toString("utf8",n,n+s);r.headers.hasOwnProperty(e)?r.headers[e]+=", "+i:r.headers[e]=i},this._parser.onHeadersComplete=this._parser[n.kOnHeadersComplete]=function(t,e,n,s,i,a){var h=arguments[0];if("object"==typeof h&&(s=h.method,i=h.url,a=h.statusCode,n=h.headers),r.method="number"==typeof s?o.METHODS[s]:s,r.statusCode=a,r.url=i,n){for(var c,u,l=0,d=n.length;l<d;l+=2)c=n[l].toLowerCase(),u=n[l+1],r.headers.hasOwnProperty(c)?r.headers[c]+=", "+u:r.headers[c]=u;r._complete=!0}}};o.METHODS={0:"DELETE",1:"GET",2:"HEAD",3:"POST",4:"PUT",5:"CONNECT",6:"OPTIONS",7:"TRACE",8:"COPY",9:"LOCK",10:"MKCOL",11:"MOVE",12:"PROPFIND",13:"PROPPATCH",14:"SEARCH",15:"UNLOCK",16:"BIND",17:"REBIND",18:"UNBIND",19:"ACL",20:"REPORT",21:"MKACTIVITY",22:"CHECKOUT",23:"MERGE",24:"M-SEARCH",25:"NOTIFY",26:"SUBSCRIBE",27:"UNSUBSCRIBE",28:"PATCH",29:"PURGE",30:"MKCALENDAR",31:"LINK",32:"UNLINK"};var a=process.version?process.version.match(/[0-9]+/g).map(function(t){return parseInt(t,10)}):[];0===a[0]&&12===a[1]&&(o.METHODS[16]="REPORT",o.METHODS[17]="MKACTIVITY",o.METHODS[18]="CHECKOUT",o.METHODS[19]="MERGE",o.METHODS[20]="M-SEARCH",o.METHODS[21]="NOTIFY",o.METHODS[22]="SUBSCRIBE",o.METHODS[23]="UNSUBSCRIBE",o.METHODS[24]="PATCH",o.METHODS[25]="PURGE"),o.prototype.isComplete=function(){return this._complete},o.prototype.parse=function(t){var e=this._parser.execute(t,0,t.length);if("number"!=typeof e){this.error=e,this._complete=!0;return}this._complete&&(this.body=e<t.length?t.slice(e):s.alloc(0))},t.exports=o},function(t,e,r){"use strict";var n=r(5).Stream,s=r(0),i=r(4),o=r(16),a=r(7),h=function(t){t=t||{},i.validateOptions(t,["headers","extensions","maxLength","ping","proxy","tls","ca"]),this.readable=this.writable=!0;var e=t.headers;if(e)for(var r in e)this._driver.setHeader(r,e[r]);var n=t.extensions;n&&[].concat(n).forEach(this._driver.addExtension,this._driver),this._ping=t.ping,this._pingId=0,this.readyState=h.CONNECTING,this.bufferedAmount=0,this.protocol="",this.url=this._driver.url,this.version=this._driver.version;var s=this;this._driver.on("open",function(t){s._open()}),this._driver.on("message",function(t){s._receiveMessage(t.data)}),this._driver.on("close",function(t){s._beginClose(t.reason,t.code)}),this._driver.on("error",function(t){s._emitError(t.message)}),this.on("error",function(){}),this._driver.messages.on("drain",function(){s.emit("drain")}),this._ping&&(this._pingTimer=setInterval(function(){s._pingId+=1,s.ping(s._pingId.toString())},1e3*this._ping)),this._configureStream(),this._proxy||(this._stream.pipe(this._driver.io),this._driver.io.pipe(this._stream))};s.inherits(h,n),h.CONNECTING=0,h.OPEN=1,h.CLOSING=2,h.CLOSED=3,h.CLOSE_TIMEOUT=3e4;var c={write:function(t){return this.send(t)},end:function(t){void 0!==t&&this.send(t),this.close()},pause:function(){return this._driver.messages.pause()},resume:function(){return this._driver.messages.resume()},send:function(t){return!(this.readyState>h.OPEN)&&(t instanceof Buffer||(t=String(t)),this._driver.messages.write(t))},ping:function(t,e){return!(this.readyState>h.OPEN)&&this._driver.ping(t,e)},close:function(t,e){if(void 0===t&&(t=1e3),void 0===e&&(e=""),1e3!==t&&(t<3e3||t>4999))throw Error("Failed to execute 'close' on WebSocket: The code must be either 1000, or between 3000 and 4999. "+t+" is neither.");this.readyState!==h.CLOSED&&(this.readyState=h.CLOSING);var r=this;this._closeTimer=setTimeout(function(){r._beginClose("",1006)},h.CLOSE_TIMEOUT),this._driver.close(e,t)},_configureStream:function(){var t=this;this._stream.setTimeout(0),this._stream.setNoDelay(!0),["close","end"].forEach(function(e){this._stream.on(e,function(){t._finalizeClose()})},this),this._stream.on("error",function(e){t._emitError("Network error: "+t.url+": "+e.message),t._finalizeClose()})},_open:function(){if(this.readyState===h.CONNECTING){this.readyState=h.OPEN,this.protocol=this._driver.protocol||"";var t=new a("open");t.initEvent("open",!1,!1),this.dispatchEvent(t)}},_receiveMessage:function(t){if(this.readyState>h.OPEN)return!1;this.readable&&this.emit("data",t);var e=new a("message",{data:t});e.initEvent("message",!1,!1),this.dispatchEvent(e)},_emitError:function(t){if(!(this.readyState>=h.CLOSING)){var e=new a("error",{message:t});e.initEvent("error",!1,!1),this.dispatchEvent(e)}},_beginClose:function(t,e){this.readyState!==h.CLOSED&&(this.readyState=h.CLOSING,this._closeParams=[t,e],this._stream&&(this._stream.destroy(),this._stream.readable||this._finalizeClose()))},_finalizeClose:function(){if(this.readyState!==h.CLOSED){this.readyState=h.CLOSED,this._closeTimer&&clearTimeout(this._closeTimer),this._pingTimer&&clearInterval(this._pingTimer),this._stream&&this._stream.end(),this.readable&&this.emit("end"),this.readable=this.writable=!1;var t=this._closeParams?this._closeParams[0]:"",e=this._closeParams?this._closeParams[1]:1006,r=new a("close",{code:e,reason:t});r.initEvent("close",!1,!1),this.dispatchEvent(r)}}};for(var u in c)h.prototype[u]=c[u];for(var l in o)h.prototype[l]=o[l];t.exports=h},function(t,e,r){"use strict";var n=r(1).Buffer,s=r(3),i=r(0),o=r(29),a=r(2),h=r(34),c=r(35),u=function(t,e,r){if(a.apply(this,arguments),this._extensions=new o,this._stage=0,this._masking=this._options.masking,this._protocols=this._options.protocols||[],this._requireMasking=this._options.requireMasking,this._pingCallbacks={},"string"==typeof this._protocols&&(this._protocols=this._protocols.split(/ *, */)),this._request){var n=this._request.headers["sec-websocket-protocol"],s=this._protocols;void 0!==n&&("string"==typeof n&&(n=n.split(/ *, */)),this.protocol=n.filter(function(t){return s.indexOf(t)>=0})[0]),this.version="hybi-"+u.VERSION}};i.inherits(u,a),u.VERSION="13",u.mask=function(t,e,r){if(!e||0===e.length)return t;r=r||0;for(var n=0,s=t.length-r;n<s;n++)t[r+n]=t[r+n]^e[n%4];return t},u.generateAccept=function(t){var e=s.createHash("sha1");return e.update(t+u.GUID),e.digest("base64")},u.GUID="258EAFA5-E914-47DA-95CA-C5AB0DC85B11";var l={FIN:128,MASK:128,RSV1:64,RSV2:32,RSV3:16,OPCODE:15,LENGTH:127,OPCODES:{continuation:0,text:1,binary:2,close:8,ping:9,pong:10},OPCODE_CODES:[0,1,2,8,9,10],MESSAGE_OPCODES:[0,1,2],OPENING_OPCODES:[1,2],ERRORS:{normal_closure:1e3,going_away:1001,protocol_error:1002,unacceptable:1003,encoding_error:1007,policy_violation:1008,too_large:1009,extension_error:1010,unexpected_condition:1011},ERROR_CODES:[1e3,1001,1002,1003,1007,1008,1009,1010,1011],DEFAULT_ERROR_CODE:1e3,MIN_RESERVED_ERROR:3e3,MAX_RESERVED_ERROR:4999,UTF8_MATCH:/^([\x00-\x7F]|[\xC2-\xDF][\x80-\xBF]|\xE0[\xA0-\xBF][\x80-\xBF]|[\xE1-\xEC\xEE\xEF][\x80-\xBF]{2}|\xED[\x80-\x9F][\x80-\xBF]|\xF0[\x90-\xBF][\x80-\xBF]{2}|[\xF1-\xF3][\x80-\xBF]{3}|\xF4[\x80-\x8F][\x80-\xBF]{2})*$/,addExtension:function(t){return this._extensions.add(t),!0},parse:function(t){this._reader.put(t);for(var e=!0;e;)switch(this._stage){case 0:(e=this._reader.read(1))&&this._parseOpcode(e[0]);break;case 1:(e=this._reader.read(1))&&this._parseLength(e[0]);break;case 2:(e=this._reader.read(this._frame.lengthBytes))&&this._parseExtendedLength(e);break;case 3:(e=this._reader.read(4))&&(this._stage=4,this._frame.maskingKey=e);break;case 4:(e=this._reader.read(this._frame.length))&&(this._stage=0,this._emitFrame(e));break;default:e=null}},text:function(t){return!(this.readyState>1)&&this.frame(t,"text")},binary:function(t){return!(this.readyState>1)&&this.frame(t,"binary")},ping:function(t,e){return!(this.readyState>1)&&(t=t||"",e&&(this._pingCallbacks[t]=e),this.frame(t,"ping"))},pong:function(t){return!(this.readyState>1)&&(t=t||"",this.frame(t,"pong"))},close:function(t,e){return(t=t||"",e=e||this.ERRORS.normal_closure,this.readyState<=0)?(this.readyState=3,this.emit("close",new a.CloseEvent(e,t)),!0):1===this.readyState&&(this.readyState=2,this._extensions.close(function(){this.frame(t,"close",e)},this),!0)},frame:function(t,e,r){if(this.readyState<=0)return this._queue([t,e,r]);if(this.readyState>2)return!1;t instanceof Array&&(t=n.from(t)),"number"==typeof t&&(t=t.toString());var i,o,a=new c,u="string"==typeof t;a.rsv1=a.rsv2=a.rsv3=!1,a.opcode=this.OPCODES[e||(u?"text":"binary")],i=u?n.from(t,"utf8"):t,r&&(o=i,(i=n.allocUnsafe(2+o.length)).writeUInt16BE(r,0),o.copy(i,2)),a.data=i;var l=function(t){var e=new h;e.final=!0,e.rsv1=t.rsv1,e.rsv2=t.rsv2,e.rsv3=t.rsv3,e.opcode=t.opcode,e.masked=!!this._masking,e.length=t.data.length,e.payload=t.data,e.masked&&(e.maskingKey=s.randomBytes(4)),this._sendFrame(e)};return this.MESSAGE_OPCODES.indexOf(a.opcode)>=0?this._extensions.processOutgoingMessage(a,function(t,e){if(t)return this._fail("extension_error",t.message);l.call(this,e)},this):l.call(this,a),!0},_sendFrame:function(t){var e=t.length,r=e<=125?2:e<=65535?4:10,s=r+(t.masked?4:0),i=n.allocUnsafe(s+e),o=t.masked?this.MASK:0;i[0]=(t.final?this.FIN:0)|(t.rsv1?this.RSV1:0)|(t.rsv2?this.RSV2:0)|(t.rsv3?this.RSV3:0)|t.opcode,e<=125?i[1]=o|e:e<=65535?(i[1]=126|o,i.writeUInt16BE(e,2)):(i[1]=127|o,i.writeUInt32BE(Math.floor(e/4294967296),2),i.writeUInt32BE(e%4294967296,6)),t.payload.copy(i,s),t.masked&&(t.maskingKey.copy(i,r),u.mask(i,t.maskingKey,s)),this._write(i)},_handshakeResponse:function(){var t=this._request.headers["sec-websocket-key"],e=this._request.headers["sec-websocket-version"];if(e!==u.VERSION)throw Error("Unsupported WebSocket version: "+e);if("string"!=typeof t)throw Error("Missing handshake request header: Sec-WebSocket-Key");this._headers.set("Upgrade","websocket"),this._headers.set("Connection","Upgrade"),this._headers.set("Sec-WebSocket-Accept",u.generateAccept(t)),this.protocol&&this._headers.set("Sec-WebSocket-Protocol",this.protocol);var r=this._extensions.generateResponse(this._request.headers["sec-websocket-extensions"]);r&&this._headers.set("Sec-WebSocket-Extensions",r);var s=["HTTP/1.1 101 Switching Protocols",this._headers.toString(),""];return n.from(s.join("\r\n"),"utf8")},_shutdown:function(t,e,r){delete this._frame,delete this._message,this._stage=5;var n=1===this.readyState;this.readyState=2,this._extensions.close(function(){n&&this.frame(e,"close",t),this.readyState=3,r&&this.emit("error",Error(e)),this.emit("close",new a.CloseEvent(t,e))},this)},_fail:function(t,e){this.readyState>1||this._shutdown(this.ERRORS[t],e,!0)},_parseOpcode:function(t){var e=[this.RSV1,this.RSV2,this.RSV3].map(function(e){return(t&e)===e}),r=this._frame=new h;return(r.final=(t&this.FIN)===this.FIN,r.rsv1=e[0],r.rsv2=e[1],r.rsv3=e[2],r.opcode=t&this.OPCODE,this._stage=1,this._extensions.validFrameRsv(r))?0>this.OPCODE_CODES.indexOf(r.opcode)?this._fail("protocol_error","Unrecognized frame opcode: "+r.opcode):0>this.MESSAGE_OPCODES.indexOf(r.opcode)&&!r.final?this._fail("protocol_error","Received fragmented control frame: opcode = "+r.opcode):this._message&&this.OPENING_OPCODES.indexOf(r.opcode)>=0?this._fail("protocol_error","Received new data frame but previous continuous frame is unfinished"):void 0:this._fail("protocol_error","One or more reserved bits are on: reserved1 = "+(r.rsv1?1:0)+", reserved2 = "+(r.rsv2?1:0)+", reserved3 = "+(r.rsv3?1:0))},_parseLength:function(t){var e=this._frame;if(e.masked=(t&this.MASK)===this.MASK,e.length=t&this.LENGTH,e.length>=0&&e.length<=125){if(this._stage=e.masked?3:4,!this._checkFrameLength())return}else this._stage=2,e.lengthBytes=126===e.length?2:8;if(this._requireMasking&&!e.masked)return this._fail("unacceptable","Received unmasked frame but masking is required")},_parseExtendedLength:function(t){var e=this._frame;if(e.length=this._readUInt(t),this._stage=e.masked?3:4,0>this.MESSAGE_OPCODES.indexOf(e.opcode)&&e.length>125)return this._fail("protocol_error","Received control frame having too long payload: "+e.length);if(!this._checkFrameLength())return},_checkFrameLength:function(){return!((this._message?this._message.length:0)+this._frame.length>this._maxLength)||(this._fail("too_large","WebSocket frame length too large"),!1)},_emitFrame:function(t){var e,r,n,s,i,o=this._frame,h=o.payload=u.mask(t,o.maskingKey),l=o.opcode;if(delete this._frame,l===this.OPCODES.continuation){if(!this._message)return this._fail("protocol_error","Received unexpected continuation frame");this._message.pushFrame(o)}if((l===this.OPCODES.text||l===this.OPCODES.binary)&&(this._message=new c,this._message.pushFrame(o)),o.final&&this.MESSAGE_OPCODES.indexOf(l)>=0)return this._emitMessage(this._message);l===this.OPCODES.close&&(r=h.length>=2?h.readUInt16BE(0):null,n=h.length>2?this._encode(h.slice(2)):null,0!==h.length&&!(null!==r&&r>=this.MIN_RESERVED_ERROR&&r<=this.MAX_RESERVED_ERROR)&&0>this.ERROR_CODES.indexOf(r)&&(r=this.ERRORS.protocol_error),(h.length>125||h.length>2&&!n)&&(r=this.ERRORS.protocol_error),this._shutdown(r||this.DEFAULT_ERROR_CODE,n||"")),l===this.OPCODES.ping&&(this.frame(h,"pong"),this.emit("ping",new a.PingEvent(h.toString()))),l===this.OPCODES.pong&&(i=(s=this._pingCallbacks)[e=this._encode(h)],delete s[e],i&&i(),this.emit("pong",new a.PongEvent(h.toString())))},_emitMessage:function(t){var t=this._message;t.read(),delete this._message,this._extensions.processIncomingMessage(t,function(t,e){if(t)return this._fail("extension_error",t.message);var r=e.data;if(e.opcode===this.OPCODES.text&&(r=this._encode(r)),null===r)return this._fail("encoding_error","Could not decode a text frame as UTF-8");this.emit("message",new a.MessageEvent(r))},this)},_encode:function(t){try{var e=t.toString("binary",0,t.length);if(!this.UTF8_MATCH.test(e))return null}catch(t){}return t.toString("utf8",0,t.length)},_readUInt:function(t){return 2===t.length?t.readUInt16BE(0):4294967296*t.readUInt32BE(0)+t.readUInt32BE(4)}};for(var d in l)u.prototype[d]=l[d];t.exports=u},function(t,e,r){"use strict";var n=function(t){this._bufferSize=t,this.clear()};n.prototype.clear=function(){this._buffer=Array(this._bufferSize),this._ringOffset=0,this._ringSize=this._bufferSize,this._head=0,this._tail=0,this.length=0},n.prototype.push=function(t){var e=!1,r=!1;this._ringSize<this._bufferSize?e=0===this._tail:this._ringOffset===this._ringSize&&(e=!0,r=0===this._tail),e&&(this._tail=this._bufferSize,this._buffer=this._buffer.concat(Array(this._bufferSize)),this._bufferSize=this._buffer.length,r&&(this._ringSize=this._bufferSize)),this._buffer[this._tail]=t,this.length+=1,this._tail<this._ringSize&&(this._ringOffset+=1),this._tail=(this._tail+1)%this._bufferSize},n.prototype.peek=function(){if(0!==this.length)return this._buffer[this._head]},n.prototype.shift=function(){if(0!==this.length){var t=this._buffer[this._head];return this._buffer[this._head]=void 0,this.length-=1,this._ringOffset-=1,0===this._ringOffset&&this.length>0?(this._head=this._ringSize,this._ringOffset=this.length,this._ringSize=this._bufferSize):this._head=(this._head+1)%this._ringSize,t}},t.exports=n},function(t,e,r){"use strict";var n=r(13),s=function(){this._complete=!1,this._callbacks=new n(s.QUEUE_SIZE)};s.QUEUE_SIZE=4,s.all=function(t){var e=new s,r=t.length,n=r;for(0===r&&e.done();n--;)t[n].then(function(){0==(r-=1)&&e.done()});return e},s.prototype.then=function(t){this._complete?t():this._callbacks.push(t)},s.prototype.done=function(){this._complete=!0;for(var t,e=this._callbacks;t=e.shift();)t()},t.exports=s},function(t,e,r){"use strict";var n=r(1).Buffer,s=r(2),i=r(0),o=function(t,e,r){s.apply(this,arguments),this._stage=0,this.version="hixie-75",this._headers.set("Upgrade","WebSocket"),this._headers.set("Connection","Upgrade"),this._headers.set("WebSocket-Origin",this._request.headers.origin),this._headers.set("WebSocket-Location",this.url)};i.inherits(o,s);var a={close:function(){return 3!==this.readyState&&(this.readyState=3,this.emit("close",new s.CloseEvent(null,null)),!0)},parse:function(t){this.readyState>1||(this._reader.put(t),this._reader.eachByte(function(t){var e;switch(this._stage){case -1:this._body.push(t),this._sendHandshakeBody();break;case 0:this._parseLeadingByte(t);break;case 1:if(this._length=(127&t)+128*this._length,this._closing&&0===this._length)return this.close();(128&t)!=128&&(0===this._length?this._stage=0:(this._skipped=0,this._stage=2));break;case 2:if(255===t)this._stage=0,e=n.from(this._buffer).toString("utf8",0,this._buffer.length),this.emit("message",new s.MessageEvent(e));else if(this._length)this._skipped+=1,this._skipped===this._length&&(this._stage=0);else if(this._buffer.push(t),this._buffer.length>this._maxLength)return this.close()}},this))},frame:function(t){if(0===this.readyState)return this._queue([t]);if(this.readyState>1)return!1;"string"!=typeof t&&(t=t.toString());var e=n.byteLength(t),r=n.allocUnsafe(e+2);return r[0]=0,r.write(t,1),r[r.length-1]=255,this._write(r),!0},_handshakeResponse:function(){var t=["HTTP/1.1 101 Web Socket Protocol Handshake",this._headers.toString(),""];return n.from(t.join("\r\n"),"utf8")},_parseLeadingByte:function(t){(128&t)==128?(this._length=0,this._stage=1):(delete this._length,delete this._skipped,this._buffer=[],this._stage=2)}};for(var h in a)o.prototype[h]=a[h];t.exports=o},function(t,e,r){"use strict";var n=r(7);t.exports={onopen:null,onmessage:null,onerror:null,onclose:null,addEventListener:function(t,e,r){this.on(t,e)},removeEventListener:function(t,e,r){this.removeListener(t,e)},dispatchEvent:function(t){t.target=t.currentTarget=this,t.eventPhase=n.AT_TARGET,this["on"+t.type]&&this["on"+t.type](t),this.emit(t.type,t)}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n="utf8: invalid string",s="utf8: invalid source encoding";function i(t){for(var e=0,r=0;r<t.length;r++){var s=t.charCodeAt(r);if(s<128)e+=1;else if(s<2048)e+=2;else if(s<55296)e+=3;else if(s<=57343){if(r>=t.length-1)throw Error(n);r++,e+=4}else throw Error(n)}return e}e.encode=function(t){for(var e=new Uint8Array(i(t)),r=0,n=0;n<t.length;n++){var s=t.charCodeAt(n);s<128?e[r++]=s:(s<2048?e[r++]=192|s>>6:(s<55296?e[r++]=224|s>>12:(n++,s=((1023&s)<<10|1023&t.charCodeAt(n))+65536,e[r++]=240|s>>18,e[r++]=128|s>>12&63),e[r++]=128|s>>6&63),e[r++]=128|63&s)}return e},e.encodedLength=i,e.decode=function(t){for(var e=[],r=0;r<t.length;r++){var n=t[r];if(128&n){var i=void 0;if(n<224){if(r>=t.length)throw Error(s);var o=t[++r];if((192&o)!=128)throw Error(s);n=(31&n)<<6|63&o,i=128}else if(n<240){if(r>=t.length-1)throw Error(s);var o=t[++r],a=t[++r];if((192&o)!=128||(192&a)!=128)throw Error(s);n=(15&n)<<12|(63&o)<<6|63&a,i=2048}else if(n<248){if(r>=t.length-2)throw Error(s);var o=t[++r],a=t[++r],h=t[++r];if((192&o)!=128||(192&a)!=128||(192&h)!=128)throw Error(s);n=(15&n)<<18|(63&o)<<12|(63&a)<<6|63&h,i=65536}else throw Error(s);if(n<i||n>=55296&&n<=57343)throw Error(s);if(n>=65536){if(n>1114111)throw Error(s);n-=65536,e.push(String.fromCharCode(55296|n>>10)),n=56320|1023&n}}e.push(String.fromCharCode(n))}return e.join("")}},function(t,e,r){"use strict";var n=r(0),s=r(4),i=r(11),o=function(t,e,r,n,o){o=o||{},this._stream=e,this._driver=s.http(t,{maxLength:o.maxLength,protocols:n});var a=this;if(this._stream&&this._stream.writable){if(!this._stream.readable)return this._stream.end();var h=function(){a._stream.removeListener("data",h)};this._stream.on("data",h),i.call(this,o),process.nextTick(function(){a._driver.start(),a._driver.io.write(r)})}};n.inherits(o,i),o.isWebSocket=function(t){return s.isWebSocket(t)},o.validateOptions=function(t,e){s.validateOptions(t,e)},o.WebSocket=o,o.Client=r(39),o.EventSource=r(42),t.exports=o},function(t,e,r){/**
 * Wrapper for built-in http.js to emulate the browser XMLHttpRequest object.
 *
 * This can be used with JS designed for browsers to improve reuse of code and
 * allow the use of existing libraries.
 *
 * Usage: include("XMLHttpRequest.js") and use XMLHttpRequest per W3C specs.
 *
 * @author Dan DeFelippi <dan@driverdan.com>
 * @contributor David Ellis <d.f.ellis@ieee.org>
 * @license MIT
 */var n=r(6),s=r(43).spawn,i=r(44);e.XMLHttpRequest=function(){"use strict";var t,e,o=this,a=r(45),h=r(46),c={},u=!1,l={"User-Agent":"node-XMLHttpRequest",Accept:"*/*"},d={},f={},p=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","content-transfer-encoding","cookie","cookie2","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"],g=["TRACE","TRACK","CONNECT"],_=!1,v=!1,y={};this.UNSENT=0,this.OPENED=1,this.HEADERS_RECEIVED=2,this.LOADING=3,this.DONE=4,this.readyState=this.UNSENT,this.onreadystatechange=null,this.responseText="",this.responseXML="",this.status=null,this.statusText=null,this.withCredentials=!1,this.open=function(t,e,r,n,s){if(this.abort(),v=!1,!(t&&-1===g.indexOf(t)))throw Error("SecurityError: Request method not allowed");c={method:t,url:e.toString(),async:"boolean"!=typeof r||r,user:n||null,password:s||null},m(this.OPENED)},this.setDisableHeaderCheck=function(t){u=t},this.setRequestHeader=function(t,e){var r;if(this.readyState!==this.OPENED)throw Error("INVALID_STATE_ERR: setRequestHeader can only be called when state is OPEN");if(r=t,!u&&(!r||-1!==p.indexOf(r.toLowerCase()))){console.warn('Refused to set unsafe header "'+t+'"');return}if(_)throw Error("INVALID_STATE_ERR: send flag is true");t=f[t.toLowerCase()]||t,f[t.toLowerCase()]=t,d[t]=d[t]?d[t]+", "+e:e},this.getResponseHeader=function(t){return"string"==typeof t&&this.readyState>this.OPENED&&e&&e.headers&&e.headers[t.toLowerCase()]&&!v?e.headers[t.toLowerCase()]:null},this.getAllResponseHeaders=function(){if(this.readyState<this.HEADERS_RECEIVED||v)return"";var t="";for(var r in e.headers)"set-cookie"!==r&&"set-cookie2"!==r&&(t+=r+": "+e.headers[r]+"\r\n");return t.substr(0,t.length-2)},this.getRequestHeader=function(t){return"string"==typeof t&&f[t.toLowerCase()]?d[f[t.toLowerCase()]]:""},this.send=function(r){if(this.readyState!==this.OPENED)throw Error("INVALID_STATE_ERR: connection must be opened before send() is called");if(_)throw Error("INVALID_STATE_ERR: send has already been called");var u,p=!1,g=!1,y=n.parse(c.url);switch(y.protocol){case"https:":p=!0;case"http:":u=y.hostname;break;case"file:":g=!0;break;case void 0:case null:case"":u="localhost";break;default:throw Error("Protocol not supported.")}if(g){if("GET"!==c.method)throw Error("XMLHttpRequest: Only GET method is supported");if(c.async)i.readFile(y.pathname,"utf8",function(t,e){t?o.handleError(t):(o.status=200,o.responseText=e,m(o.DONE))});else try{this.responseText=i.readFileSync(y.pathname,"utf8"),this.status=200,m(o.DONE)}catch(t){this.handleError(t)}return}var b=y.port||(p?443:80),S=y.pathname+(y.search?y.search:"");for(var E in l)f[E.toLowerCase()]||(d[E]=l[E]);if(d.Host=u,p&&443===b||80===b||(d.Host+=":"+y.port),c.user){void 0===c.password&&(c.password="");var w=new Buffer(c.user+":"+c.password);d.Authorization="Basic "+w.toString("base64")}"GET"===c.method||"HEAD"===c.method?r=null:r?(d["Content-Length"]=Buffer.isBuffer(r)?r.length:Buffer.byteLength(r),d["Content-Type"]||(d["Content-Type"]="text/plain;charset=UTF-8")):"POST"===c.method&&(d["Content-Length"]=0);var C={host:u,port:b,path:S,method:c.method,headers:d,agent:!1,withCredentials:o.withCredentials};if(v=!1,c.async){var k=p?h.request:a.request;_=!0,o.dispatchEvent("readystatechange");var O=function(t){o.handleError(t)};t=k(C,function r(s){if(301===(e=s).statusCode||302===e.statusCode||303===e.statusCode||307===e.statusCode){c.url=e.headers.location;var i=n.parse(c.url);u=i.hostname,(t=k({hostname:i.hostname,port:i.port,path:i.path,method:303===e.statusCode?"GET":c.method,headers:d,withCredentials:o.withCredentials},r).on("error",O)).end();return}e.setEncoding("utf8"),m(o.HEADERS_RECEIVED),o.status=e.statusCode,e.on("data",function(t){t&&(o.responseText+=t),_&&m(o.LOADING)}),e.on("end",function(){_&&(m(o.DONE),_=!1)}),e.on("error",function(t){o.handleError(t)})}).on("error",O),r&&t.write(r),t.end(),o.dispatchEvent("loadstart")}else{var T=".node-xmlhttprequest-content-"+process.pid,x=".node-xmlhttprequest-sync-"+process.pid;i.writeFileSync(x,"","utf8");for(var P="var http = require('http'), https = require('https'), fs = require('fs');var doRequest = http"+(p?"s":"")+".request;var options = "+JSON.stringify(C)+";var responseText = '';var req = doRequest(options, function(response) {response.setEncoding('utf8');response.on('data', function(chunk) {  responseText += chunk;});response.on('end', function() {fs.writeFileSync('"+T+"', JSON.stringify({err: null, data: {statusCode: response.statusCode, headers: response.headers, text: responseText}}), 'utf8');fs.unlinkSync('"+x+"');});response.on('error', function(error) {fs.writeFileSync('"+T+"', JSON.stringify({err: error}), 'utf8');fs.unlinkSync('"+x+"');});}).on('error', function(error) {fs.writeFileSync('"+T+"', JSON.stringify({err: error}), 'utf8');fs.unlinkSync('"+x+"');});"+(r?"req.write('"+JSON.stringify(r).slice(1,-1).replace(/'/g,"\\'")+"');":"")+"req.end();",A=s(process.argv[0],["-e",P]);i.existsSync(x););var R=JSON.parse(i.readFileSync(T,"utf8"));A.stdin.end(),i.unlinkSync(T),R.err?o.handleError(R.err):(e=R.data,o.status=R.data.statusCode,o.responseText=R.data.text,m(o.DONE))}},this.handleError=function(t){this.status=0,this.statusText=t,this.responseText=t.stack,v=!0,m(this.DONE),this.dispatchEvent("error")},this.abort=function(){t&&(t.abort(),t=null),d=l,this.status=0,this.responseText="",this.responseXML="",v=!0,this.readyState!==this.UNSENT&&(this.readyState!==this.OPENED||_)&&this.readyState!==this.DONE&&(_=!1,m(this.DONE)),this.readyState=this.UNSENT,this.dispatchEvent("abort")},this.addEventListener=function(t,e){t in y||(y[t]=[]),y[t].push(e)},this.removeEventListener=function(t,e){t in y&&(y[t]=y[t].filter(function(t){return t!==e}))},this.dispatchEvent=function(t){if("function"==typeof o["on"+t]&&o["on"+t](),t in y)for(var e=0,r=y[t].length;e<r;e++)y[t][e].call(o)};var m=function(t){t!=o.LOADING&&o.readyState===t||(o.readyState=t,(c.async||o.readyState<o.OPENED||o.readyState===o.DONE)&&o.dispatchEvent("readystatechange"),o.readyState!==o.DONE||v||(o.dispatchEvent("load"),o.dispatchEvent("loadend")))}}},function(t,e,r){!function(t){"use strict";var e,n=function(t){var e,r=new Float64Array(16);if(t)for(e=0;e<t.length;e++)r[e]=t[e];return r},s=function(){throw Error("no PRNG")},i=new Uint8Array(16),o=new Uint8Array(32);o[0]=9;var a=n(),h=n([1]),c=n([56129,1]),u=n([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),l=n([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),d=n([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),f=n([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),p=n([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function g(t,e,r,n){t[e]=r>>24&255,t[e+1]=r>>16&255,t[e+2]=r>>8&255,t[e+3]=255&r,t[e+4]=n>>24&255,t[e+5]=n>>16&255,t[e+6]=n>>8&255,t[e+7]=255&n}function _(t,e,r,n,s){var i,o=0;for(i=0;i<s;i++)o|=t[e+i]^r[n+i];return(1&o-1>>>8)-1}function v(t,e,r,n){return _(t,e,r,n,16)}function y(t,e,r,n){return _(t,e,r,n,32)}function m(t,e,r,n){!function(t,e,r,n){for(var s,i=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,o=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,h=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,c=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,u=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,l=255&e[0]|(255&e[1])<<8|(255&e[2])<<16|(255&e[3])<<24,d=255&e[4]|(255&e[5])<<8|(255&e[6])<<16|(255&e[7])<<24,f=255&e[8]|(255&e[9])<<8|(255&e[10])<<16|(255&e[11])<<24,p=255&e[12]|(255&e[13])<<8|(255&e[14])<<16|(255&e[15])<<24,g=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,_=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,v=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,y=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,m=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,b=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,S=i,E=o,w=a,C=h,k=c,O=u,T=l,x=d,P=f,A=p,R=g,L=_,N=v,U=y,I=m,D=b,M=0;M<20;M+=2)k^=(s=S+N|0)<<7|s>>>25,P^=(s=k+S|0)<<9|s>>>23,N^=(s=P+k|0)<<13|s>>>19,S^=(s=N+P|0)<<18|s>>>14,A^=(s=O+E|0)<<7|s>>>25,U^=(s=A+O|0)<<9|s>>>23,E^=(s=U+A|0)<<13|s>>>19,O^=(s=E+U|0)<<18|s>>>14,I^=(s=R+T|0)<<7|s>>>25,w^=(s=I+R|0)<<9|s>>>23,T^=(s=w+I|0)<<13|s>>>19,R^=(s=T+w|0)<<18|s>>>14,C^=(s=D+L|0)<<7|s>>>25,x^=(s=C+D|0)<<9|s>>>23,L^=(s=x+C|0)<<13|s>>>19,D^=(s=L+x|0)<<18|s>>>14,E^=(s=S+C|0)<<7|s>>>25,w^=(s=E+S|0)<<9|s>>>23,C^=(s=w+E|0)<<13|s>>>19,S^=(s=C+w|0)<<18|s>>>14,T^=(s=O+k|0)<<7|s>>>25,x^=(s=T+O|0)<<9|s>>>23,k^=(s=x+T|0)<<13|s>>>19,O^=(s=k+x|0)<<18|s>>>14,L^=(s=R+A|0)<<7|s>>>25,P^=(s=L+R|0)<<9|s>>>23,A^=(s=P+L|0)<<13|s>>>19,R^=(s=A+P|0)<<18|s>>>14,N^=(s=D+I|0)<<7|s>>>25,U^=(s=N+D|0)<<9|s>>>23,I^=(s=U+N|0)<<13|s>>>19,D^=(s=I+U|0)<<18|s>>>14;S=S+i|0,E=E+o|0,w=w+a|0,C=C+h|0,k=k+c|0,O=O+u|0,T=T+l|0,x=x+d|0,P=P+f|0,A=A+p|0,R=R+g|0,L=L+_|0,N=N+v|0,U=U+y|0,I=I+m|0,D=D+b|0,t[0]=S>>>0&255,t[1]=S>>>8&255,t[2]=S>>>16&255,t[3]=S>>>24&255,t[4]=E>>>0&255,t[5]=E>>>8&255,t[6]=E>>>16&255,t[7]=E>>>24&255,t[8]=w>>>0&255,t[9]=w>>>8&255,t[10]=w>>>16&255,t[11]=w>>>24&255,t[12]=C>>>0&255,t[13]=C>>>8&255,t[14]=C>>>16&255,t[15]=C>>>24&255,t[16]=k>>>0&255,t[17]=k>>>8&255,t[18]=k>>>16&255,t[19]=k>>>24&255,t[20]=O>>>0&255,t[21]=O>>>8&255,t[22]=O>>>16&255,t[23]=O>>>24&255,t[24]=T>>>0&255,t[25]=T>>>8&255,t[26]=T>>>16&255,t[27]=T>>>24&255,t[28]=x>>>0&255,t[29]=x>>>8&255,t[30]=x>>>16&255,t[31]=x>>>24&255,t[32]=P>>>0&255,t[33]=P>>>8&255,t[34]=P>>>16&255,t[35]=P>>>24&255,t[36]=A>>>0&255,t[37]=A>>>8&255,t[38]=A>>>16&255,t[39]=A>>>24&255,t[40]=R>>>0&255,t[41]=R>>>8&255,t[42]=R>>>16&255,t[43]=R>>>24&255,t[44]=L>>>0&255,t[45]=L>>>8&255,t[46]=L>>>16&255,t[47]=L>>>24&255,t[48]=N>>>0&255,t[49]=N>>>8&255,t[50]=N>>>16&255,t[51]=N>>>24&255,t[52]=U>>>0&255,t[53]=U>>>8&255,t[54]=U>>>16&255,t[55]=U>>>24&255,t[56]=I>>>0&255,t[57]=I>>>8&255,t[58]=I>>>16&255,t[59]=I>>>24&255,t[60]=D>>>0&255,t[61]=D>>>8&255,t[62]=D>>>16&255,t[63]=D>>>24&255}(t,e,r,n)}function b(t,e,r,n){!function(t,e,r,n){for(var s,i=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,o=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,h=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,c=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,u=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,l=255&e[0]|(255&e[1])<<8|(255&e[2])<<16|(255&e[3])<<24,d=255&e[4]|(255&e[5])<<8|(255&e[6])<<16|(255&e[7])<<24,f=255&e[8]|(255&e[9])<<8|(255&e[10])<<16|(255&e[11])<<24,p=255&e[12]|(255&e[13])<<8|(255&e[14])<<16|(255&e[15])<<24,g=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,_=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,v=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,y=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,m=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,b=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,S=i,E=o,w=a,C=h,k=c,O=u,T=l,x=d,P=f,A=p,R=g,L=_,N=v,U=y,I=m,D=b,M=0;M<20;M+=2)k^=(s=S+N|0)<<7|s>>>25,P^=(s=k+S|0)<<9|s>>>23,N^=(s=P+k|0)<<13|s>>>19,S^=(s=N+P|0)<<18|s>>>14,A^=(s=O+E|0)<<7|s>>>25,U^=(s=A+O|0)<<9|s>>>23,E^=(s=U+A|0)<<13|s>>>19,O^=(s=E+U|0)<<18|s>>>14,I^=(s=R+T|0)<<7|s>>>25,w^=(s=I+R|0)<<9|s>>>23,T^=(s=w+I|0)<<13|s>>>19,R^=(s=T+w|0)<<18|s>>>14,C^=(s=D+L|0)<<7|s>>>25,x^=(s=C+D|0)<<9|s>>>23,L^=(s=x+C|0)<<13|s>>>19,D^=(s=L+x|0)<<18|s>>>14,E^=(s=S+C|0)<<7|s>>>25,w^=(s=E+S|0)<<9|s>>>23,C^=(s=w+E|0)<<13|s>>>19,S^=(s=C+w|0)<<18|s>>>14,T^=(s=O+k|0)<<7|s>>>25,x^=(s=T+O|0)<<9|s>>>23,k^=(s=x+T|0)<<13|s>>>19,O^=(s=k+x|0)<<18|s>>>14,L^=(s=R+A|0)<<7|s>>>25,P^=(s=L+R|0)<<9|s>>>23,A^=(s=P+L|0)<<13|s>>>19,R^=(s=A+P|0)<<18|s>>>14,N^=(s=D+I|0)<<7|s>>>25,U^=(s=N+D|0)<<9|s>>>23,I^=(s=U+N|0)<<13|s>>>19,D^=(s=I+U|0)<<18|s>>>14;t[0]=S>>>0&255,t[1]=S>>>8&255,t[2]=S>>>16&255,t[3]=S>>>24&255,t[4]=O>>>0&255,t[5]=O>>>8&255,t[6]=O>>>16&255,t[7]=O>>>24&255,t[8]=R>>>0&255,t[9]=R>>>8&255,t[10]=R>>>16&255,t[11]=R>>>24&255,t[12]=D>>>0&255,t[13]=D>>>8&255,t[14]=D>>>16&255,t[15]=D>>>24&255,t[16]=T>>>0&255,t[17]=T>>>8&255,t[18]=T>>>16&255,t[19]=T>>>24&255,t[20]=x>>>0&255,t[21]=x>>>8&255,t[22]=x>>>16&255,t[23]=x>>>24&255,t[24]=P>>>0&255,t[25]=P>>>8&255,t[26]=P>>>16&255,t[27]=P>>>24&255,t[28]=A>>>0&255,t[29]=A>>>8&255,t[30]=A>>>16&255,t[31]=A>>>24&255}(t,e,r,n)}var S=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function E(t,e,r,n,s,i,o){var a,h,c=new Uint8Array(16),u=new Uint8Array(64);for(h=0;h<16;h++)c[h]=0;for(h=0;h<8;h++)c[h]=i[h];for(;s>=64;){for(m(u,c,o,S),h=0;h<64;h++)t[e+h]=r[n+h]^u[h];for(h=8,a=1;h<16;h++)a=a+(255&c[h])|0,c[h]=255&a,a>>>=8;s-=64,e+=64,n+=64}if(s>0)for(m(u,c,o,S),h=0;h<s;h++)t[e+h]=r[n+h]^u[h];return 0}function w(t,e,r,n,s){var i,o,a=new Uint8Array(16),h=new Uint8Array(64);for(o=0;o<16;o++)a[o]=0;for(o=0;o<8;o++)a[o]=n[o];for(;r>=64;){for(m(h,a,s,S),o=0;o<64;o++)t[e+o]=h[o];for(o=8,i=1;o<16;o++)i=i+(255&a[o])|0,a[o]=255&i,i>>>=8;r-=64,e+=64}if(r>0)for(m(h,a,s,S),o=0;o<r;o++)t[e+o]=h[o];return 0}function C(t,e,r,n,s){var i=new Uint8Array(32);b(i,n,s,S);for(var o=new Uint8Array(8),a=0;a<8;a++)o[a]=n[a+16];return w(t,e,r,o,i)}function k(t,e,r,n,s,i,o){var a=new Uint8Array(32);b(a,i,o,S);for(var h=new Uint8Array(8),c=0;c<8;c++)h[c]=i[c+16];return E(t,e,r,n,s,h,a)}var O=function(t){var e,r,n,s,i,o,a,h;this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0,e=255&t[0]|(255&t[1])<<8,this.r[0]=8191&e,r=255&t[2]|(255&t[3])<<8,this.r[1]=(e>>>13|r<<3)&8191,n=255&t[4]|(255&t[5])<<8,this.r[2]=(r>>>10|n<<6)&7939,s=255&t[6]|(255&t[7])<<8,this.r[3]=(n>>>7|s<<9)&8191,i=255&t[8]|(255&t[9])<<8,this.r[4]=(s>>>4|i<<12)&255,this.r[5]=i>>>1&8190,o=255&t[10]|(255&t[11])<<8,this.r[6]=(i>>>14|o<<2)&8191,a=255&t[12]|(255&t[13])<<8,this.r[7]=(o>>>11|a<<5)&8065,h=255&t[14]|(255&t[15])<<8,this.r[8]=(a>>>8|h<<8)&8191,this.r[9]=h>>>5&127,this.pad[0]=255&t[16]|(255&t[17])<<8,this.pad[1]=255&t[18]|(255&t[19])<<8,this.pad[2]=255&t[20]|(255&t[21])<<8,this.pad[3]=255&t[22]|(255&t[23])<<8,this.pad[4]=255&t[24]|(255&t[25])<<8,this.pad[5]=255&t[26]|(255&t[27])<<8,this.pad[6]=255&t[28]|(255&t[29])<<8,this.pad[7]=255&t[30]|(255&t[31])<<8};function T(t,e,r,n,s,i){var o=new O(i);return o.update(r,n,s),o.finish(t,e),0}function x(t,e,r,n,s,i){var o=new Uint8Array(16);return T(o,0,r,n,s,i),v(t,e,o,0)}function P(t,e,r,n,s){var i;if(r<32)return -1;for(k(t,0,e,0,r,n,s),T(t,16,t,32,r-32,t),i=0;i<16;i++)t[i]=0;return 0}function A(t,e,r,n,s){var i,o=new Uint8Array(32);if(r<32||(C(o,0,32,n,s),0!==x(e,16,e,32,r-32,o)))return -1;for(k(t,0,e,0,r,n,s),i=0;i<32;i++)t[i]=0;return 0}function R(t,e){var r;for(r=0;r<16;r++)t[r]=0|e[r]}function L(t){var e,r,n=1;for(e=0;e<16;e++)n=Math.floor((r=t[e]+n+65535)/65536),t[e]=r-65536*n;t[0]+=n-1+37*(n-1)}function N(t,e,r){for(var n,s=~(r-1),i=0;i<16;i++)n=s&(t[i]^e[i]),t[i]^=n,e[i]^=n}function U(t,e){var r,s,i,o=n(),a=n();for(r=0;r<16;r++)a[r]=e[r];for(L(a),L(a),L(a),s=0;s<2;s++){for(r=1,o[0]=a[0]-65517;r<15;r++)o[r]=a[r]-65535-(o[r-1]>>16&1),o[r-1]&=65535;o[15]=a[15]-32767-(o[14]>>16&1),i=o[15]>>16&1,o[14]&=65535,N(a,o,1-i)}for(r=0;r<16;r++)t[2*r]=255&a[r],t[2*r+1]=a[r]>>8}function I(t,e){var r=new Uint8Array(32),n=new Uint8Array(32);return U(r,t),U(n,e),y(r,0,n,0)}function D(t){var e=new Uint8Array(32);return U(e,t),1&e[0]}function M(t,e){var r;for(r=0;r<16;r++)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767}function H(t,e,r){for(var n=0;n<16;n++)t[n]=e[n]+r[n]}function B(t,e,r){for(var n=0;n<16;n++)t[n]=e[n]-r[n]}function q(t,e,r){var n,s,i=0,o=0,a=0,h=0,c=0,u=0,l=0,d=0,f=0,p=0,g=0,_=0,v=0,y=0,m=0,b=0,S=0,E=0,w=0,C=0,k=0,O=0,T=0,x=0,P=0,A=0,R=0,L=0,N=0,U=0,I=0,D=r[0],M=r[1],H=r[2],B=r[3],q=r[4],z=r[5],F=r[6],j=r[7],K=r[8],G=r[9],Y=r[10],W=r[11],V=r[12],$=r[13],X=r[14],J=r[15];i+=(n=e[0])*D,o+=n*M,a+=n*H,h+=n*B,c+=n*q,u+=n*z,l+=n*F,d+=n*j,f+=n*K,p+=n*G,g+=n*Y,_+=n*W,v+=n*V,y+=n*$,m+=n*X,b+=n*J,o+=(n=e[1])*D,a+=n*M,h+=n*H,c+=n*B,u+=n*q,l+=n*z,d+=n*F,f+=n*j,p+=n*K,g+=n*G,_+=n*Y,v+=n*W,y+=n*V,m+=n*$,b+=n*X,S+=n*J,a+=(n=e[2])*D,h+=n*M,c+=n*H,u+=n*B,l+=n*q,d+=n*z,f+=n*F,p+=n*j,g+=n*K,_+=n*G,v+=n*Y,y+=n*W,m+=n*V,b+=n*$,S+=n*X,E+=n*J,h+=(n=e[3])*D,c+=n*M,u+=n*H,l+=n*B,d+=n*q,f+=n*z,p+=n*F,g+=n*j,_+=n*K,v+=n*G,y+=n*Y,m+=n*W,b+=n*V,S+=n*$,E+=n*X,w+=n*J,c+=(n=e[4])*D,u+=n*M,l+=n*H,d+=n*B,f+=n*q,p+=n*z,g+=n*F,_+=n*j,v+=n*K,y+=n*G,m+=n*Y,b+=n*W,S+=n*V,E+=n*$,w+=n*X,C+=n*J,u+=(n=e[5])*D,l+=n*M,d+=n*H,f+=n*B,p+=n*q,g+=n*z,_+=n*F,v+=n*j,y+=n*K,m+=n*G,b+=n*Y,S+=n*W,E+=n*V,w+=n*$,C+=n*X,k+=n*J,l+=(n=e[6])*D,d+=n*M,f+=n*H,p+=n*B,g+=n*q,_+=n*z,v+=n*F,y+=n*j,m+=n*K,b+=n*G,S+=n*Y,E+=n*W,w+=n*V,C+=n*$,k+=n*X,O+=n*J,d+=(n=e[7])*D,f+=n*M,p+=n*H,g+=n*B,_+=n*q,v+=n*z,y+=n*F,m+=n*j,b+=n*K,S+=n*G,E+=n*Y,w+=n*W,C+=n*V,k+=n*$,O+=n*X,T+=n*J,f+=(n=e[8])*D,p+=n*M,g+=n*H,_+=n*B,v+=n*q,y+=n*z,m+=n*F,b+=n*j,S+=n*K,E+=n*G,w+=n*Y,C+=n*W,k+=n*V,O+=n*$,T+=n*X,x+=n*J,p+=(n=e[9])*D,g+=n*M,_+=n*H,v+=n*B,y+=n*q,m+=n*z,b+=n*F,S+=n*j,E+=n*K,w+=n*G,C+=n*Y,k+=n*W,O+=n*V,T+=n*$,x+=n*X,P+=n*J,g+=(n=e[10])*D,_+=n*M,v+=n*H,y+=n*B,m+=n*q,b+=n*z,S+=n*F,E+=n*j,w+=n*K,C+=n*G,k+=n*Y,O+=n*W,T+=n*V,x+=n*$,P+=n*X,A+=n*J,_+=(n=e[11])*D,v+=n*M,y+=n*H,m+=n*B,b+=n*q,S+=n*z,E+=n*F,w+=n*j,C+=n*K,k+=n*G,O+=n*Y,T+=n*W,x+=n*V,P+=n*$,A+=n*X,R+=n*J,v+=(n=e[12])*D,y+=n*M,m+=n*H,b+=n*B,S+=n*q,E+=n*z,w+=n*F,C+=n*j,k+=n*K,O+=n*G,T+=n*Y,x+=n*W,P+=n*V,A+=n*$,R+=n*X,L+=n*J,y+=(n=e[13])*D,m+=n*M,b+=n*H,S+=n*B,E+=n*q,w+=n*z,C+=n*F,k+=n*j,O+=n*K,T+=n*G,x+=n*Y,P+=n*W,A+=n*V,R+=n*$,L+=n*X,N+=n*J,m+=(n=e[14])*D,b+=n*M,S+=n*H,E+=n*B,w+=n*q,C+=n*z,k+=n*F,O+=n*j,T+=n*K,x+=n*G,P+=n*Y,A+=n*W,R+=n*V,L+=n*$,N+=n*X,U+=n*J,b+=(n=e[15])*D,S+=n*M,E+=n*H,w+=n*B,C+=n*q,k+=n*z,O+=n*F,T+=n*j,x+=n*K,P+=n*G,A+=n*Y,R+=n*W,L+=n*V,N+=n*$,U+=n*X,I+=n*J,i+=38*S,o+=38*E,a+=38*w,h+=38*C,c+=38*k,u+=38*O,l+=38*T,d+=38*x,f+=38*P,p+=38*A,g+=38*R,_+=38*L,v+=38*N,y+=38*U,m+=38*I,s=Math.floor((n=i+(s=1)+65535)/65536),i=n-65536*s,s=Math.floor((n=o+s+65535)/65536),o=n-65536*s,s=Math.floor((n=a+s+65535)/65536),a=n-65536*s,s=Math.floor((n=h+s+65535)/65536),h=n-65536*s,s=Math.floor((n=c+s+65535)/65536),c=n-65536*s,s=Math.floor((n=u+s+65535)/65536),u=n-65536*s,s=Math.floor((n=l+s+65535)/65536),l=n-65536*s,s=Math.floor((n=d+s+65535)/65536),d=n-65536*s,s=Math.floor((n=f+s+65535)/65536),f=n-65536*s,s=Math.floor((n=p+s+65535)/65536),p=n-65536*s,s=Math.floor((n=g+s+65535)/65536),g=n-65536*s,s=Math.floor((n=_+s+65535)/65536),_=n-65536*s,s=Math.floor((n=v+s+65535)/65536),v=n-65536*s,s=Math.floor((n=y+s+65535)/65536),y=n-65536*s,s=Math.floor((n=m+s+65535)/65536),m=n-65536*s,s=Math.floor((n=b+s+65535)/65536),b=n-65536*s,i+=s-1+37*(s-1),s=Math.floor((n=i+(s=1)+65535)/65536),i=n-65536*s,s=Math.floor((n=o+s+65535)/65536),o=n-65536*s,s=Math.floor((n=a+s+65535)/65536),a=n-65536*s,s=Math.floor((n=h+s+65535)/65536),h=n-65536*s,s=Math.floor((n=c+s+65535)/65536),c=n-65536*s,s=Math.floor((n=u+s+65535)/65536),u=n-65536*s,s=Math.floor((n=l+s+65535)/65536),l=n-65536*s,s=Math.floor((n=d+s+65535)/65536),d=n-65536*s,s=Math.floor((n=f+s+65535)/65536),f=n-65536*s,s=Math.floor((n=p+s+65535)/65536),p=n-65536*s,s=Math.floor((n=g+s+65535)/65536),g=n-65536*s,s=Math.floor((n=_+s+65535)/65536),_=n-65536*s,s=Math.floor((n=v+s+65535)/65536),v=n-65536*s,s=Math.floor((n=y+s+65535)/65536),y=n-65536*s,s=Math.floor((n=m+s+65535)/65536),m=n-65536*s,s=Math.floor((n=b+s+65535)/65536),b=n-65536*s,i+=s-1+37*(s-1),t[0]=i,t[1]=o,t[2]=a,t[3]=h,t[4]=c,t[5]=u,t[6]=l,t[7]=d,t[8]=f,t[9]=p,t[10]=g,t[11]=_,t[12]=v,t[13]=y,t[14]=m,t[15]=b}function z(t,e){q(t,e,e)}function F(t,e){var r,s=n();for(r=0;r<16;r++)s[r]=e[r];for(r=253;r>=0;r--)z(s,s),2!==r&&4!==r&&q(s,s,e);for(r=0;r<16;r++)t[r]=s[r]}function j(t,e){var r,s=n();for(r=0;r<16;r++)s[r]=e[r];for(r=250;r>=0;r--)z(s,s),1!==r&&q(s,s,e);for(r=0;r<16;r++)t[r]=s[r]}function K(t,e,r){var s,i,o=new Uint8Array(32),a=new Float64Array(80),h=n(),u=n(),l=n(),d=n(),f=n(),p=n();for(i=0;i<31;i++)o[i]=e[i];for(o[31]=127&e[31]|64,o[0]&=248,M(a,r),i=0;i<16;i++)u[i]=a[i],d[i]=h[i]=l[i]=0;for(i=254,h[0]=d[0]=1;i>=0;--i)N(h,u,s=o[i>>>3]>>>(7&i)&1),N(l,d,s),H(f,h,l),B(h,h,l),H(l,u,d),B(u,u,d),z(d,f),z(p,h),q(h,l,h),q(l,u,f),H(f,h,l),B(h,h,l),z(u,h),B(l,d,p),q(h,l,c),H(h,h,d),q(l,l,h),q(h,d,p),q(d,u,a),z(u,f),N(h,u,s),N(l,d,s);for(i=0;i<16;i++)a[i+16]=h[i],a[i+32]=l[i],a[i+48]=u[i],a[i+64]=d[i];var g=a.subarray(32),_=a.subarray(16);return F(g,g),q(_,_,g),U(t,_),0}function G(t,e){return K(t,e,o)}function Y(t,e){return s(e,32),G(t,e)}function W(t,e,r){var n=new Uint8Array(32);return K(n,r,e),b(t,i,n,S)}O.prototype.blocks=function(t,e,r){for(var n,s,i,o,a,h,c,u,l,d,f,p,g,_,v,y,m,b,S,E=this.fin?0:2048,w=this.h[0],C=this.h[1],k=this.h[2],O=this.h[3],T=this.h[4],x=this.h[5],P=this.h[6],A=this.h[7],R=this.h[8],L=this.h[9],N=this.r[0],U=this.r[1],I=this.r[2],D=this.r[3],M=this.r[4],H=this.r[5],B=this.r[6],q=this.r[7],z=this.r[8],F=this.r[9];r>=16;)w+=8191&(n=255&t[e+0]|(255&t[e+1])<<8),C+=(n>>>13|(s=255&t[e+2]|(255&t[e+3])<<8)<<3)&8191,k+=(s>>>10|(i=255&t[e+4]|(255&t[e+5])<<8)<<6)&8191,O+=(i>>>7|(o=255&t[e+6]|(255&t[e+7])<<8)<<9)&8191,T+=(o>>>4|(a=255&t[e+8]|(255&t[e+9])<<8)<<12)&8191,x+=a>>>1&8191,P+=(a>>>14|(h=255&t[e+10]|(255&t[e+11])<<8)<<2)&8191,A+=(h>>>11|(c=255&t[e+12]|(255&t[e+13])<<8)<<5)&8191,R+=(c>>>8|(u=255&t[e+14]|(255&t[e+15])<<8)<<8)&8191,L+=u>>>5|E,l=(d=(l=0)+w*N+C*(5*F)+k*(5*z)+O*(5*q)+T*(5*B))>>>13,d&=8191,d+=x*(5*H)+P*(5*M)+A*(5*D)+R*(5*I)+L*(5*U),l+=d>>>13,d&=8191,l=(f=l+w*U+C*N+k*(5*F)+O*(5*z)+T*(5*q))>>>13,f&=8191,f+=x*(5*B)+P*(5*H)+A*(5*M)+R*(5*D)+L*(5*I),l+=f>>>13,f&=8191,l=(p=l+w*I+C*U+k*N+O*(5*F)+T*(5*z))>>>13,p&=8191,p+=x*(5*q)+P*(5*B)+A*(5*H)+R*(5*M)+L*(5*D),l+=p>>>13,p&=8191,l=(g=l+w*D+C*I+k*U+O*N+T*(5*F))>>>13,g&=8191,g+=x*(5*z)+P*(5*q)+A*(5*B)+R*(5*H)+L*(5*M),l+=g>>>13,g&=8191,l=(_=l+w*M+C*D+k*I+O*U+T*N)>>>13,_&=8191,_+=x*(5*F)+P*(5*z)+A*(5*q)+R*(5*B)+L*(5*H),l+=_>>>13,_&=8191,l=(v=l+w*H+C*M+k*D+O*I+T*U)>>>13,v&=8191,v+=x*N+P*(5*F)+A*(5*z)+R*(5*q)+L*(5*B),l+=v>>>13,v&=8191,l=(y=l+w*B+C*H+k*M+O*D+T*I)>>>13,y&=8191,y+=x*U+P*N+A*(5*F)+R*(5*z)+L*(5*q),l+=y>>>13,y&=8191,l=(m=l+w*q+C*B+k*H+O*M+T*D)>>>13,m&=8191,m+=x*I+P*U+A*N+R*(5*F)+L*(5*z),l+=m>>>13,m&=8191,l=(b=l+w*z+C*q+k*B+O*H+T*M)>>>13,b&=8191,b+=x*D+P*I+A*U+R*N+L*(5*F),l+=b>>>13,b&=8191,l=(S=l+w*F+C*z+k*q+O*B+T*H)>>>13,S&=8191,S+=x*M+P*D+A*I+R*U+L*N,l+=S>>>13,S&=8191,d=8191&(l=(l=(l<<2)+l|0)+d|0),l>>>=13,f+=l,w=d,C=f,k=p,O=g,T=_,x=v,P=y,A=m,R=b,L=S,e+=16,r-=16;this.h[0]=w,this.h[1]=C,this.h[2]=k,this.h[3]=O,this.h[4]=T,this.h[5]=x,this.h[6]=P,this.h[7]=A,this.h[8]=R,this.h[9]=L},O.prototype.finish=function(t,e){var r,n,s,i,o=new Uint16Array(10);if(this.leftover){for(i=this.leftover,this.buffer[i++]=1;i<16;i++)this.buffer[i]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(r=this.h[1]>>>13,this.h[1]&=8191,i=2;i<10;i++)this.h[i]+=r,r=this.h[i]>>>13,this.h[i]&=8191;for(this.h[0]+=5*r,r=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=r,r=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=r,o[0]=this.h[0]+5,r=o[0]>>>13,o[0]&=8191,i=1;i<10;i++)o[i]=this.h[i]+r,r=o[i]>>>13,o[i]&=8191;for(o[9]-=8192,n=(1^r)-1,i=0;i<10;i++)o[i]&=n;for(i=0,n=~n;i<10;i++)this.h[i]=this.h[i]&n|o[i];for(i=1,this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,s=this.h[0]+this.pad[0],this.h[0]=65535&s;i<8;i++)s=(this.h[i]+this.pad[i]|0)+(s>>>16)|0,this.h[i]=65535&s;t[e+0]=this.h[0]>>>0&255,t[e+1]=this.h[0]>>>8&255,t[e+2]=this.h[1]>>>0&255,t[e+3]=this.h[1]>>>8&255,t[e+4]=this.h[2]>>>0&255,t[e+5]=this.h[2]>>>8&255,t[e+6]=this.h[3]>>>0&255,t[e+7]=this.h[3]>>>8&255,t[e+8]=this.h[4]>>>0&255,t[e+9]=this.h[4]>>>8&255,t[e+10]=this.h[5]>>>0&255,t[e+11]=this.h[5]>>>8&255,t[e+12]=this.h[6]>>>0&255,t[e+13]=this.h[6]>>>8&255,t[e+14]=this.h[7]>>>0&255,t[e+15]=this.h[7]>>>8&255},O.prototype.update=function(t,e,r){var n,s;if(this.leftover){for((s=16-this.leftover)>r&&(s=r),n=0;n<s;n++)this.buffer[this.leftover+n]=t[e+n];if(r-=s,e+=s,this.leftover+=s,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(r>=16&&(s=r-r%16,this.blocks(t,e,s),e+=s,r-=s),r){for(n=0;n<r;n++)this.buffer[this.leftover+n]=t[e+n];this.leftover+=r}};var V=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function $(t,e,r,n){for(var s,i,o,a,h,c,u,l,d,f,p,g,_,v,y,m,b,S,E,w,C,k,O,T,x,P,A=new Int32Array(16),R=new Int32Array(16),L=t[0],N=t[1],U=t[2],I=t[3],D=t[4],M=t[5],H=t[6],B=t[7],q=e[0],z=e[1],F=e[2],j=e[3],K=e[4],G=e[5],Y=e[6],W=e[7],$=0;n>=128;){for(E=0;E<16;E++)w=8*E+$,A[E]=r[w+0]<<24|r[w+1]<<16|r[w+2]<<8|r[w+3],R[E]=r[w+4]<<24|r[w+5]<<16|r[w+6]<<8|r[w+7];for(E=0;E<80;E++)if(s=L,i=N,o=U,a=I,h=D,c=M,u=H,l=B,d=q,f=z,p=F,g=j,_=K,v=G,y=Y,m=W,C=B,O=65535&(k=W),T=k>>>16,x=65535&C,P=C>>>16,C=(D>>>14|K<<18)^(D>>>18|K<<14)^(K>>>9|D<<23),O+=65535&(k=(K>>>14|D<<18)^(K>>>18|D<<14)^(D>>>9|K<<23)),T+=k>>>16,x+=65535&C,P+=C>>>16,C=D&M^~D&H,O+=65535&(k=K&G^~K&Y),T+=k>>>16,x+=65535&C,P+=C>>>16,C=V[2*E],O+=65535&(k=V[2*E+1]),T+=k>>>16,x+=65535&C,P+=C>>>16,C=A[E%16],O+=65535&(k=R[E%16]),T+=k>>>16,x+=65535&C,P+=C>>>16,T+=O>>>16,x+=T>>>16,P+=x>>>16,b=65535&x|P<<16,S=65535&O|T<<16,C=b,O=65535&(k=S),T=k>>>16,x=65535&C,P=C>>>16,C=(L>>>28|q<<4)^(q>>>2|L<<30)^(q>>>7|L<<25),O+=65535&(k=(q>>>28|L<<4)^(L>>>2|q<<30)^(L>>>7|q<<25)),T+=k>>>16,x+=65535&C,P+=C>>>16,C=L&N^L&U^N&U,O+=65535&(k=q&z^q&F^z&F),T+=k>>>16,x+=65535&C,P+=C>>>16,T+=O>>>16,x+=T>>>16,P+=x>>>16,l=65535&x|P<<16,m=65535&O|T<<16,C=a,O=65535&(k=g),T=k>>>16,x=65535&C,P=C>>>16,C=b,O+=65535&(k=S),T+=k>>>16,x+=65535&C,P+=C>>>16,T+=O>>>16,x+=T>>>16,P+=x>>>16,a=65535&x|P<<16,g=65535&O|T<<16,N=s,U=i,I=o,D=a,M=h,H=c,B=u,L=l,z=d,F=f,j=p,K=g,G=_,Y=v,W=y,q=m,E%16==15)for(w=0;w<16;w++)C=A[w],O=65535&(k=R[w]),T=k>>>16,x=65535&C,P=C>>>16,C=A[(w+9)%16],O+=65535&(k=R[(w+9)%16]),T+=k>>>16,x+=65535&C,P+=C>>>16,C=((b=A[(w+1)%16])>>>1|(S=R[(w+1)%16])<<31)^(b>>>8|S<<24)^b>>>7,O+=65535&(k=(S>>>1|b<<31)^(S>>>8|b<<24)^(S>>>7|b<<25)),T+=k>>>16,x+=65535&C,P+=C>>>16,C=((b=A[(w+14)%16])>>>19|(S=R[(w+14)%16])<<13)^(S>>>29|b<<3)^b>>>6,O+=65535&(k=(S>>>19|b<<13)^(b>>>29|S<<3)^(S>>>6|b<<26)),T+=k>>>16,x+=65535&C,P+=C>>>16,T+=O>>>16,x+=T>>>16,P+=x>>>16,A[w]=65535&x|P<<16,R[w]=65535&O|T<<16;C=L,O=65535&(k=q),T=k>>>16,x=65535&C,P=C>>>16,C=t[0],O+=65535&(k=e[0]),T+=k>>>16,x+=65535&C,P+=C>>>16,T+=O>>>16,x+=T>>>16,P+=x>>>16,t[0]=L=65535&x|P<<16,e[0]=q=65535&O|T<<16,C=N,O=65535&(k=z),T=k>>>16,x=65535&C,P=C>>>16,C=t[1],O+=65535&(k=e[1]),T+=k>>>16,x+=65535&C,P+=C>>>16,T+=O>>>16,x+=T>>>16,P+=x>>>16,t[1]=N=65535&x|P<<16,e[1]=z=65535&O|T<<16,C=U,O=65535&(k=F),T=k>>>16,x=65535&C,P=C>>>16,C=t[2],O+=65535&(k=e[2]),T+=k>>>16,x+=65535&C,P+=C>>>16,T+=O>>>16,x+=T>>>16,P+=x>>>16,t[2]=U=65535&x|P<<16,e[2]=F=65535&O|T<<16,C=I,O=65535&(k=j),T=k>>>16,x=65535&C,P=C>>>16,C=t[3],O+=65535&(k=e[3]),T+=k>>>16,x+=65535&C,P+=C>>>16,T+=O>>>16,x+=T>>>16,P+=x>>>16,t[3]=I=65535&x|P<<16,e[3]=j=65535&O|T<<16,C=D,O=65535&(k=K),T=k>>>16,x=65535&C,P=C>>>16,C=t[4],O+=65535&(k=e[4]),T+=k>>>16,x+=65535&C,P+=C>>>16,T+=O>>>16,x+=T>>>16,P+=x>>>16,t[4]=D=65535&x|P<<16,e[4]=K=65535&O|T<<16,C=M,O=65535&(k=G),T=k>>>16,x=65535&C,P=C>>>16,C=t[5],O+=65535&(k=e[5]),T+=k>>>16,x+=65535&C,P+=C>>>16,T+=O>>>16,x+=T>>>16,P+=x>>>16,t[5]=M=65535&x|P<<16,e[5]=G=65535&O|T<<16,C=H,O=65535&(k=Y),T=k>>>16,x=65535&C,P=C>>>16,C=t[6],O+=65535&(k=e[6]),T+=k>>>16,x+=65535&C,P+=C>>>16,T+=O>>>16,x+=T>>>16,P+=x>>>16,t[6]=H=65535&x|P<<16,e[6]=Y=65535&O|T<<16,C=B,O=65535&(k=W),T=k>>>16,x=65535&C,P=C>>>16,C=t[7],O+=65535&(k=e[7]),T+=k>>>16,x+=65535&C,P+=C>>>16,T+=O>>>16,x+=T>>>16,P+=x>>>16,t[7]=B=65535&x|P<<16,e[7]=W=65535&O|T<<16,$+=128,n-=128}return n}function X(t,e,r){var n,s=new Int32Array(8),i=new Int32Array(8),o=new Uint8Array(256),a=r;for(s[0]=1779033703,s[1]=3144134277,s[2]=1013904242,s[3]=2773480762,s[4]=1359893119,s[5]=2600822924,s[6]=528734635,s[7]=1541459225,i[0]=4089235720,i[1]=2227873595,i[2]=4271175723,i[3]=1595750129,i[4]=2917565137,i[5]=725511199,i[6]=4215389547,i[7]=327033209,$(s,i,e,r),r%=128,n=0;n<r;n++)o[n]=e[a-r+n];for(o[r]=128,o[(r=256-128*(r<112?1:0))-9]=0,g(o,r-8,a/536870912|0,a<<3),$(s,i,o,r),n=0;n<8;n++)g(t,8*n,s[n],i[n]);return 0}function J(t,e){var r=n(),s=n(),i=n(),o=n(),a=n(),h=n(),c=n(),u=n(),d=n();B(r,t[1],t[0]),B(d,e[1],e[0]),q(r,r,d),H(s,t[0],t[1]),H(d,e[0],e[1]),q(s,s,d),q(i,t[3],e[3]),q(i,i,l),q(o,t[2],e[2]),H(o,o,o),B(a,s,r),B(h,o,i),H(c,o,i),H(u,s,r),q(t[0],a,h),q(t[1],u,c),q(t[2],c,h),q(t[3],a,u)}function Z(t,e,r){var n;for(n=0;n<4;n++)N(t[n],e[n],r)}function Q(t,e){var r=n(),s=n(),i=n();F(i,e[2]),q(r,e[0],i),q(s,e[1],i),U(t,s),t[31]^=D(r)<<7}function tt(t,e,r){var n,s;for(R(t[0],a),R(t[1],h),R(t[2],h),R(t[3],a),s=255;s>=0;--s)Z(t,e,n=r[s/8|0]>>(7&s)&1),J(e,t),J(t,t),Z(t,e,n)}function te(t,e){var r=[n(),n(),n(),n()];R(r[0],d),R(r[1],f),R(r[2],h),q(r[3],d,f),tt(t,r,e)}function tr(t,e,r){var i,o=new Uint8Array(64),a=[n(),n(),n(),n()];for(r||s(e,32),X(o,e,32),o[0]&=248,o[31]&=127,o[31]|=64,te(a,o),Q(t,a),i=0;i<32;i++)e[i+32]=t[i];return 0}var tn=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function ts(t,e){var r,n,s,i;for(n=63;n>=32;--n){for(r=0,s=n-32,i=n-12;s<i;++s)e[s]+=r-16*e[n]*tn[s-(n-32)],r=Math.floor((e[s]+128)/256),e[s]-=256*r;e[s]+=r,e[n]=0}for(s=0,r=0;s<32;s++)e[s]+=r-(e[31]>>4)*tn[s],r=e[s]>>8,e[s]&=255;for(s=0;s<32;s++)e[s]-=r*tn[s];for(n=0;n<32;n++)e[n+1]+=e[n]>>8,t[n]=255&e[n]}function ti(t){var e,r=new Float64Array(64);for(e=0;e<64;e++)r[e]=t[e];for(e=0;e<64;e++)t[e]=0;ts(t,r)}function to(t,e,r,s){var i,o,a=new Uint8Array(64),h=new Uint8Array(64),c=new Uint8Array(64),u=new Float64Array(64),l=[n(),n(),n(),n()];X(a,s,32),a[0]&=248,a[31]&=127,a[31]|=64;var d=r+64;for(i=0;i<r;i++)t[64+i]=e[i];for(i=0;i<32;i++)t[32+i]=a[32+i];for(X(c,t.subarray(32),r+32),ti(c),te(l,c),Q(t,l),i=32;i<64;i++)t[i]=s[i];for(X(h,t,r+64),ti(h),i=0;i<64;i++)u[i]=0;for(i=0;i<32;i++)u[i]=c[i];for(i=0;i<32;i++)for(o=0;o<32;o++)u[i+o]+=h[i]*a[o];return ts(t.subarray(32),u),d}function ta(t,e,r,s){var i,o,c,l,d,f,g,_,v=new Uint8Array(32),m=new Uint8Array(64),b=[n(),n(),n(),n()],S=[n(),n(),n(),n()];if(r<64||(i=n(),o=n(),c=n(),l=n(),d=n(),f=n(),g=n(),(R(S[2],h),M(S[1],s),z(c,S[1]),q(l,c,u),B(c,c,S[2]),H(l,S[2],l),z(d,l),z(f,d),q(g,f,d),q(i,g,c),q(i,i,l),j(i,i),q(i,i,c),q(i,i,l),q(i,i,l),q(S[0],i,l),z(o,S[0]),q(o,o,l),I(o,c)&&q(S[0],S[0],p),z(o,S[0]),q(o,o,l),I(o,c))?-1:(D(S[0])===s[31]>>7&&B(S[0],a,S[0]),q(S[3],S[0],S[1]),0)))return -1;for(_=0;_<r;_++)t[_]=e[_];for(_=0;_<32;_++)t[_+32]=s[_];if(X(m,t,r),ti(m),tt(b,S,m),te(S,e.subarray(32)),J(b,S),Q(v,b),r-=64,y(e,0,v,0)){for(_=0;_<r;_++)t[_]=0;return -1}for(_=0;_<r;_++)t[_]=e[_+64];return r}function th(t,e){if(32!==t.length)throw Error("bad key size");if(24!==e.length)throw Error("bad nonce size")}function tc(){for(var t=0;t<arguments.length;t++)if(!(arguments[t]instanceof Uint8Array))throw TypeError("unexpected type, use Uint8Array")}function tu(t){for(var e=0;e<t.length;e++)t[e]=0}t.lowlevel={crypto_core_hsalsa20:b,crypto_stream_xor:k,crypto_stream:C,crypto_stream_salsa20_xor:E,crypto_stream_salsa20:w,crypto_onetimeauth:T,crypto_onetimeauth_verify:x,crypto_verify_16:v,crypto_verify_32:y,crypto_secretbox:P,crypto_secretbox_open:A,crypto_scalarmult:K,crypto_scalarmult_base:G,crypto_box_beforenm:W,crypto_box_afternm:P,crypto_box:function(t,e,r,n,s,i){var o=new Uint8Array(32);return W(o,s,i),P(t,e,r,n,o)},crypto_box_open:function(t,e,r,n,s,i){var o=new Uint8Array(32);return W(o,s,i),A(t,e,r,n,o)},crypto_box_keypair:Y,crypto_hash:X,crypto_sign:to,crypto_sign_keypair:tr,crypto_sign_open:ta,crypto_secretbox_KEYBYTES:32,crypto_secretbox_NONCEBYTES:24,crypto_secretbox_ZEROBYTES:32,crypto_secretbox_BOXZEROBYTES:16,crypto_scalarmult_BYTES:32,crypto_scalarmult_SCALARBYTES:32,crypto_box_PUBLICKEYBYTES:32,crypto_box_SECRETKEYBYTES:32,crypto_box_BEFORENMBYTES:32,crypto_box_NONCEBYTES:24,crypto_box_ZEROBYTES:32,crypto_box_BOXZEROBYTES:16,crypto_sign_BYTES:64,crypto_sign_PUBLICKEYBYTES:32,crypto_sign_SECRETKEYBYTES:64,crypto_sign_SEEDBYTES:32,crypto_hash_BYTES:64,gf:n,D:u,L:tn,pack25519:U,unpack25519:M,M:q,A:H,S:z,Z:B,pow2523:j,add:J,set25519:R,modL:ts,scalarmult:tt,scalarbase:te},t.randomBytes=function(t){var e=new Uint8Array(t);return s(e,t),e},t.secretbox=function(t,e,r){tc(t,e,r),th(r,e);for(var n=new Uint8Array(32+t.length),s=new Uint8Array(n.length),i=0;i<t.length;i++)n[i+32]=t[i];return P(s,n,n.length,e,r),s.subarray(16)},t.secretbox.open=function(t,e,r){tc(t,e,r),th(r,e);for(var n=new Uint8Array(16+t.length),s=new Uint8Array(n.length),i=0;i<t.length;i++)n[i+16]=t[i];return n.length<32||0!==A(s,n,n.length,e,r)?null:s.subarray(32)},t.secretbox.keyLength=32,t.secretbox.nonceLength=24,t.secretbox.overheadLength=16,t.scalarMult=function(t,e){if(tc(t,e),32!==t.length)throw Error("bad n size");if(32!==e.length)throw Error("bad p size");var r=new Uint8Array(32);return K(r,t,e),r},t.scalarMult.base=function(t){if(tc(t),32!==t.length)throw Error("bad n size");var e=new Uint8Array(32);return G(e,t),e},t.scalarMult.scalarLength=32,t.scalarMult.groupElementLength=32,t.box=function(e,r,n,s){var i=t.box.before(n,s);return t.secretbox(e,r,i)},t.box.before=function(t,e){tc(t,e),function(t,e){if(32!==t.length)throw Error("bad public key size");if(32!==e.length)throw Error("bad secret key size")}(t,e);var r=new Uint8Array(32);return W(r,t,e),r},t.box.after=t.secretbox,t.box.open=function(e,r,n,s){var i=t.box.before(n,s);return t.secretbox.open(e,r,i)},t.box.open.after=t.secretbox.open,t.box.keyPair=function(){var t=new Uint8Array(32),e=new Uint8Array(32);return Y(t,e),{publicKey:t,secretKey:e}},t.box.keyPair.fromSecretKey=function(t){if(tc(t),32!==t.length)throw Error("bad secret key size");var e=new Uint8Array(32);return G(e,t),{publicKey:e,secretKey:new Uint8Array(t)}},t.box.publicKeyLength=32,t.box.secretKeyLength=32,t.box.sharedKeyLength=32,t.box.nonceLength=24,t.box.overheadLength=t.secretbox.overheadLength,t.sign=function(t,e){if(tc(t,e),64!==e.length)throw Error("bad secret key size");var r=new Uint8Array(64+t.length);return to(r,t,t.length,e),r},t.sign.open=function(t,e){if(tc(t,e),32!==e.length)throw Error("bad public key size");var r=new Uint8Array(t.length),n=ta(r,t,t.length,e);if(n<0)return null;for(var s=new Uint8Array(n),i=0;i<s.length;i++)s[i]=r[i];return s},t.sign.detached=function(e,r){for(var n=t.sign(e,r),s=new Uint8Array(64),i=0;i<s.length;i++)s[i]=n[i];return s},t.sign.detached.verify=function(t,e,r){if(tc(t,e,r),64!==e.length)throw Error("bad signature size");if(32!==r.length)throw Error("bad public key size");var n,s=new Uint8Array(64+t.length),i=new Uint8Array(64+t.length);for(n=0;n<64;n++)s[n]=e[n];for(n=0;n<t.length;n++)s[n+64]=t[n];return ta(i,s,s.length,r)>=0},t.sign.keyPair=function(){var t=new Uint8Array(32),e=new Uint8Array(64);return tr(t,e),{publicKey:t,secretKey:e}},t.sign.keyPair.fromSecretKey=function(t){if(tc(t),64!==t.length)throw Error("bad secret key size");for(var e=new Uint8Array(32),r=0;r<e.length;r++)e[r]=t[32+r];return{publicKey:e,secretKey:new Uint8Array(t)}},t.sign.keyPair.fromSeed=function(t){if(tc(t),32!==t.length)throw Error("bad seed size");for(var e=new Uint8Array(32),r=new Uint8Array(64),n=0;n<32;n++)r[n]=t[n];return tr(e,r,!0),{publicKey:e,secretKey:r}},t.sign.publicKeyLength=32,t.sign.secretKeyLength=64,t.sign.seedLength=32,t.sign.signatureLength=64,t.hash=function(t){tc(t);var e=new Uint8Array(64);return X(e,t,t.length),e},t.hash.hashLength=64,t.verify=function(t,e){return tc(t,e),0!==t.length&&0!==e.length&&t.length===e.length&&0===_(t,0,e,0,t.length)},t.setPRNG=function(t){s=t},(e="undefined"!=typeof self?self.crypto||self.msCrypto:null)&&e.getRandomValues?t.setPRNG(function(t,r){var n,s=new Uint8Array(r);for(n=0;n<r;n+=65536)e.getRandomValues(s.subarray(n,n+Math.min(r-n,65536)));for(n=0;n<r;n++)t[n]=s[n];tu(s)}):(e=r(3))&&e.randomBytes&&t.setPRNG(function(t,r){var n,s=e.randomBytes(r);for(n=0;n<r;n++)t[n]=s[n];tu(s)})}(t.exports?t.exports:self.nacl=self.nacl||{})},function(t,e,r){t.exports=r(47).default},function(t,e){t.exports=r(4300)},function(t,e){t.exports=r(2361)},function(t,e,r){"use strict";var n=r(5).Stream,s=r(0),i=function(t){this.readable=this.writable=!0,this._paused=!1,this._driver=t};s.inherits(i,n),i.prototype.pause=function(){this._paused=!0,this._driver.messages._paused=!0},i.prototype.resume=function(){this._paused=!1,this.emit("drain");var t=this._driver.messages;t._paused=!1,t.emit("drain")},i.prototype.write=function(t){return!!this.writable&&(this._driver.parse(t),!this._paused)},i.prototype.end=function(t){if(this.writable){void 0!==t&&this.write(t),this.writable=!1;var e=this._driver.messages;e.readable&&(e.readable=e.writable=!1,e.emit("end"))}},i.prototype.destroy=function(){this.end()};var o=function(t){this.readable=this.writable=!0,this._paused=!1,this._driver=t};s.inherits(o,n),o.prototype.pause=function(){this._driver.io._paused=!0},o.prototype.resume=function(){this._driver.io._paused=!1,this._driver.io.emit("drain")},o.prototype.write=function(t){return!!this.writable&&("string"==typeof t?this._driver.text(t):this._driver.binary(t),!this._paused)},o.prototype.end=function(t){void 0!==t&&this.write(t)},o.prototype.destroy=function(){},e.IO=i,e.Messages=o},function(t,e,r){"use strict";var n=r(1).Buffer,s=function(){this._queue=[],this._queueSize=0,this._offset=0};s.prototype.put=function(t){t&&0!==t.length&&(n.isBuffer(t)||(t=n.from(t)),this._queue.push(t),this._queueSize+=t.length)},s.prototype.read=function(t){if(t>this._queueSize)return null;if(0===t)return n.alloc(0);this._queueSize-=t;var e,r,s=this._queue,i=t,o=s[0];if(o.length>=t)return o.length===t?s.shift():(r=o.slice(0,t),s[0]=o.slice(t),r);for(var a=0,h=s.length;a<h&&!(i<s[a].length);a++)i-=s[a].length;return e=s.splice(0,a),i>0&&s.length>0&&(e.push(s[0].slice(0,i)),s[0]=s[0].slice(i)),n.concat(e,t)},s.prototype.eachByte=function(t,e){for(var r,n,s;this._queue.length>0;){for(n=(r=this._queue[0]).length;this._offset<n;)s=this._offset,this._offset+=1,t.call(e,r[s]);this._offset=0,this._queue.shift()}},t.exports=s},function(t,e,r){"use strict";var n=r(1).Buffer,s=r(3),i=r(6),o=r(0),a=r(10),h=r(2),c=r(12),u=r(36),l=function(t,e){this.version="hybi-"+c.VERSION,c.call(this,null,t,e),this.readyState=-1,this._key=l.generateKey(),this._accept=c.generateAccept(this._key),this._http=new a("response");var r=i.parse(this.url),s=r.auth&&n.from(r.auth,"utf8").toString("base64");if(0>this.VALID_PROTOCOLS.indexOf(r.protocol))throw Error(this.url+" is not a valid WebSocket URL");this._pathname=(r.pathname||"/")+(r.search||""),this._headers.set("Host",r.host),this._headers.set("Upgrade","websocket"),this._headers.set("Connection","Upgrade"),this._headers.set("Sec-WebSocket-Key",this._key),this._headers.set("Sec-WebSocket-Version",c.VERSION),this._protocols.length>0&&this._headers.set("Sec-WebSocket-Protocol",this._protocols.join(", ")),s&&this._headers.set("Authorization","Basic "+s)};o.inherits(l,c),l.generateKey=function(){return s.randomBytes(16).toString("base64")};var d={VALID_PROTOCOLS:["ws:","wss:"],proxy:function(t,e){return new u(this,t,e)},start:function(){return -1===this.readyState&&(this._write(this._handshakeRequest()),this.readyState=0,!0)},parse:function(t){if(3!==this.readyState){if(this.readyState>0)return c.prototype.parse.call(this,t);this._http.parse(t),this._http.isComplete()&&(this._validateHandshake(),3!==this.readyState&&(this._open(),this.parse(this._http.body)))}},_handshakeRequest:function(){var t=this._extensions.generateOffer();t&&this._headers.set("Sec-WebSocket-Extensions",t);var e=["GET "+this._pathname+" HTTP/1.1",this._headers.toString(),""];return n.from(e.join("\r\n"),"utf8")},_failHandshake:function(t){t="Error during WebSocket handshake: "+t,this.readyState=3,this.emit("error",Error(t)),this.emit("close",new h.CloseEvent(this.ERRORS.protocol_error,t))},_validateHandshake:function(){if(this.statusCode=this._http.statusCode,this.headers=this._http.headers,this._http.error)return this._failHandshake(this._http.error.message);if(101!==this._http.statusCode)return this._failHandshake("Unexpected response code: "+this._http.statusCode);var t=this._http.headers,e=t.upgrade||"",r=t.connection||"",n=t["sec-websocket-accept"]||"",s=t["sec-websocket-protocol"]||"";if(""===e)return this._failHandshake("'Upgrade' header is missing");if("websocket"!==e.toLowerCase())return this._failHandshake("'Upgrade' header value is not 'WebSocket'");if(""===r)return this._failHandshake("'Connection' header is missing");if("upgrade"!==r.toLowerCase())return this._failHandshake("'Connection' header value is not 'Upgrade'");if(n!==this._accept)return this._failHandshake("Sec-WebSocket-Accept mismatch");if(this.protocol=null,""!==s){if(0>this._protocols.indexOf(s))return this._failHandshake("Sec-WebSocket-Protocol mismatch");this.protocol=s}try{this._extensions.activate(this.headers["sec-websocket-extensions"])}catch(t){return this._failHandshake(t.message)}}};for(var f in d)l.prototype[f]=d[f];t.exports=l},function(t,e,r){var n=r(28);function s(t){n.ok(t===s.REQUEST||t===s.RESPONSE||void 0===t),void 0===t||this.initialize(t),this.maxHeaderSize=s.maxHeaderSize}e.HTTPParser=s,s.prototype.initialize=function(t,e){n.ok(t===s.REQUEST||t===s.RESPONSE),this.type=t,this.state=t+"_LINE",this.info={headers:[],upgrade:!1},this.trailers=[],this.line="",this.isChunked=!1,this.connection="",this.headerSize=0,this.body_bytes=null,this.isUserCall=!1,this.hadError=!1},s.encoding="ascii",s.maxHeaderSize=81920,s.REQUEST="REQUEST",s.RESPONSE="RESPONSE";var i=s.kOnHeaders=1,o=s.kOnHeadersComplete=2,a=s.kOnBody=3,h=s.kOnMessageComplete=4;s.prototype[i]=s.prototype[o]=s.prototype[a]=s.prototype[h]=function(){};var c=!0;Object.defineProperty(s,"kOnExecute",{get:function(){return c=!1,99}});var u=e.methods=s.methods=["DELETE","GET","HEAD","POST","PUT","CONNECT","OPTIONS","TRACE","COPY","LOCK","MKCOL","MOVE","PROPFIND","PROPPATCH","SEARCH","UNLOCK","BIND","REBIND","UNBIND","ACL","REPORT","MKACTIVITY","CHECKOUT","MERGE","M-SEARCH","NOTIFY","SUBSCRIBE","UNSUBSCRIBE","PATCH","PURGE","MKCALENDAR","LINK","UNLINK","SOURCE"],l=u.indexOf("CONNECT");s.prototype.reinitialize=s,s.prototype.close=s.prototype.pause=s.prototype.resume=s.prototype.free=function(){},s.prototype._compatMode0_11=!1,s.prototype.getAsyncId=function(){return 0};var d={REQUEST_LINE:!0,RESPONSE_LINE:!0,HEADER:!0};s.prototype.execute=function(t,e,r){if(!(this instanceof s))throw TypeError("not a HTTPParser");e=e||0,r="number"==typeof r?r:t.length,this.chunk=t,this.offset=e;var n=this.end=e+r;try{for(;this.offset<n&&!this[this.state](););}catch(t){if(this.isUserCall)throw t;return this.hadError=!0,t}return(this.chunk=null,r=this.offset-e,d[this.state]&&(this.headerSize+=r,this.headerSize>(this.maxHeaderSize||s.maxHeaderSize)))?Error("max header size exceeded"):r};var f={REQUEST_LINE:!0,RESPONSE_LINE:!0,BODY_RAW:!0};s.prototype.finish=function(){if(!this.hadError){if(!f[this.state])return Error("invalid state for EOF");"BODY_RAW"===this.state&&this.userCall()(this[h]())}},s.prototype.consume=s.prototype.unconsume=s.prototype.getCurrentBuffer=function(){},s.prototype.userCall=function(){this.isUserCall=!0;var t=this;return function(e){return t.isUserCall=!1,e}},s.prototype.nextRequest=function(){this.userCall()(this[h]()),this.reinitialize(this.type)},s.prototype.consumeLine=function(){for(var t=this.end,e=this.chunk,r=this.offset;r<t;r++)if(10===e[r]){var n=this.line+e.toString(s.encoding,this.offset,r);return"\r"===n.charAt(n.length-1)&&(n=n.substr(0,n.length-1)),this.line="",this.offset=r+1,n}this.line+=e.toString(s.encoding,this.offset,this.end),this.offset=this.end};var p=/^([^: \t]+):[ \t]*((?:.*[^ \t])|)/,g=/^[ \t]+(.*[^ \t])/;s.prototype.parseHeader=function(t,e){if(-1!==t.indexOf("\r"))throw y("HPE_LF_EXPECTED");var r=p.exec(t),n=r&&r[1];if(n)e.push(n),e.push(r[2]);else{var s=g.exec(t);s&&e.length&&(e[e.length-1]&&(e[e.length-1]+=" "),e[e.length-1]+=s[1])}};var _=/^([A-Z-]+) ([^ ]+) HTTP\/(\d)\.(\d)$/;s.prototype.REQUEST_LINE=function(){var t=this.consumeLine();if(t){var e=_.exec(t);if(null===e)throw y("HPE_INVALID_CONSTANT");if(this.info.method=this._compatMode0_11?e[1]:u.indexOf(e[1]),-1===this.info.method)throw Error("invalid request method");this.info.url=e[2],this.info.versionMajor=+e[3],this.info.versionMinor=+e[4],this.body_bytes=0,this.state="HEADER"}};var v=/^HTTP\/(\d)\.(\d) (\d{3}) ?(.*)$/;function y(t){var e=Error("Parse Error");return e.code=t,e}s.prototype.RESPONSE_LINE=function(){var t=this.consumeLine();if(t){var e=v.exec(t);if(null===e)throw y("HPE_INVALID_CONSTANT");this.info.versionMajor=+e[1],this.info.versionMinor=+e[2];var r=this.info.statusCode=+e[3];this.info.statusMessage=e[4],((r/100|0)==1||204===r||304===r)&&(this.body_bytes=0),this.state="HEADER"}},s.prototype.shouldKeepAlive=function(){if(this.info.versionMajor>0&&this.info.versionMinor>0){if(-1!==this.connection.indexOf("close"))return!1}else if(-1===this.connection.indexOf("keep-alive"))return!1;return null!==this.body_bytes||!!this.isChunked},s.prototype.HEADER=function(){var t=this.consumeLine();if(void 0!==t){var e=this.info;if(t)this.parseHeader(t,e.headers);else{for(var r,n,i=e.headers,a=!1,h=!1,u=0;u<i.length;u+=2)switch(i[u].toLowerCase()){case"transfer-encoding":this.isChunked="chunked"===i[u+1].toLowerCase();break;case"content-length":if(r=+i[u+1],a){if(r!==this.body_bytes)throw y("HPE_UNEXPECTED_CONTENT_LENGTH")}else a=!0,this.body_bytes=r;break;case"connection":this.connection+=i[u+1].toLowerCase();break;case"upgrade":h=!0}if(this.isChunked&&a&&(a=!1,this.body_bytes=null),h&&-1!=this.connection.indexOf("upgrade")?e.upgrade=this.type===s.REQUEST||101===e.statusCode:e.upgrade=e.method===l,this.isChunked&&e.upgrade&&(this.isChunked=!1),e.shouldKeepAlive=this.shouldKeepAlive(),2===(n=c?this.userCall()(this[o](e)):this.userCall()(this[o](e.versionMajor,e.versionMinor,e.headers,e.method,e.url,e.statusCode,e.statusMessage,e.upgrade,e.shouldKeepAlive))))return this.nextRequest(),!0;if(this.isChunked&&!n)this.state="BODY_CHUNKHEAD";else{if(n||0===this.body_bytes)return this.nextRequest(),e.upgrade;null===this.body_bytes?this.state="BODY_RAW":this.state="BODY_SIZED"}}}},s.prototype.BODY_CHUNKHEAD=function(){var t=this.consumeLine();void 0!==t&&(this.body_bytes=parseInt(t,16),this.body_bytes?this.state="BODY_CHUNK":this.state="BODY_CHUNKTRAILERS")},s.prototype.BODY_CHUNK=function(){var t=Math.min(this.end-this.offset,this.body_bytes);this.userCall()(this[a](this.chunk,this.offset,t)),this.offset+=t,this.body_bytes-=t,this.body_bytes||(this.state="BODY_CHUNKEMPTYLINE")},s.prototype.BODY_CHUNKEMPTYLINE=function(){var t=this.consumeLine();void 0!==t&&(n.equal(t,""),this.state="BODY_CHUNKHEAD")},s.prototype.BODY_CHUNKTRAILERS=function(){var t=this.consumeLine();void 0!==t&&(t?this.parseHeader(t,this.trailers):(this.trailers.length&&this.userCall()(this[i](this.trailers,"")),this.nextRequest()))},s.prototype.BODY_RAW=function(){var t=this.end-this.offset;this.userCall()(this[a](this.chunk,this.offset,t)),this.offset=this.end},s.prototype.BODY_SIZED=function(){var t=Math.min(this.end-this.offset,this.body_bytes);this.userCall()(this[a](this.chunk,this.offset,t)),this.offset+=t,this.body_bytes-=t,this.body_bytes||this.nextRequest()},["Headers","HeadersComplete","Body","MessageComplete"].forEach(function(t){var e=s["kOn"+t];Object.defineProperty(s.prototype,"on"+t,{get:function(){return this[e]},set:function(t){return this._compatMode0_11=!0,l="CONNECT",this[e]=t}})})},function(t,e){t.exports=r(9491)},function(t,e,r){"use strict";var n=r(30),s=r(31),i=function(){this._rsv1=this._rsv2=this._rsv3=null,this._byName={},this._inOrder=[],this._sessions=[],this._index={}};i.MESSAGE_OPCODES=[1,2];var o={add:function(t){if("string"!=typeof t.name)throw TypeError("extension.name must be a string");if("permessage"!==t.type)throw TypeError('extension.type must be "permessage"');if("boolean"!=typeof t.rsv1)throw TypeError("extension.rsv1 must be true or false");if("boolean"!=typeof t.rsv2)throw TypeError("extension.rsv2 must be true or false");if("boolean"!=typeof t.rsv3)throw TypeError("extension.rsv3 must be true or false");if(this._byName.hasOwnProperty(t.name))throw TypeError('An extension with name "'+t.name+'" is already registered');this._byName[t.name]=t,this._inOrder.push(t)},generateOffer:function(){var t=[],e=[],r={};return this._inOrder.forEach(function(s){var i=s.createClientSession();if(i){var o=[s,i];t.push(o),r[s.name]=o;var a=i.generateOffer();(a=a?[].concat(a):[]).forEach(function(t){e.push(n.serializeParams(s.name,t))},this)}},this),this._sessions=t,this._index=r,e.length>0?e.join(", "):null},activate:function(t){var e=n.parseHeader(t),r=[];e.eachOffer(function(t,e){var s=this._index[t];if(!s)throw Error('Server sent an extension response for unknown extension "'+t+'"');var i=s[0],o=s[1],a=this._reserved(i);if(a)throw Error("Server sent two extension responses that use the RSV"+a[0]+' bit: "'+a[1]+'" and "'+i.name+'"');if(!0!==o.activate(e))throw Error("Server sent unacceptable extension parameters: "+n.serializeParams(t,e));this._reserve(i),r.push(s)},this),this._sessions=r,this._pipeline=new s(r)},generateResponse:function(t){var e=[],r=[],i=n.parseHeader(t);return this._inOrder.forEach(function(t){var s=i.byName(t.name);if(!(0===s.length||this._reserved(t))){var o=t.createServerSession(s);o&&(this._reserve(t),e.push([t,o]),r.push(n.serializeParams(t.name,o.generateResponse())))}},this),this._sessions=e,this._pipeline=new s(e),r.length>0?r.join(", "):null},validFrameRsv:function(t){var e,r={rsv1:!1,rsv2:!1,rsv3:!1};if(i.MESSAGE_OPCODES.indexOf(t.opcode)>=0)for(var n=0,s=this._sessions.length;n<s;n++)e=this._sessions[n][0],r.rsv1=r.rsv1||e.rsv1,r.rsv2=r.rsv2||e.rsv2,r.rsv3=r.rsv3||e.rsv3;return(r.rsv1||!t.rsv1)&&(r.rsv2||!t.rsv2)&&(r.rsv3||!t.rsv3)},processIncomingMessage:function(t,e,r){this._pipeline.processIncomingMessage(t,e,r)},processOutgoingMessage:function(t,e,r){this._pipeline.processOutgoingMessage(t,e,r)},close:function(t,e){if(!this._pipeline)return t.call(e);this._pipeline.close(t,e)},_reserve:function(t){this._rsv1=this._rsv1||t.rsv1&&t.name,this._rsv2=this._rsv2||t.rsv2&&t.name,this._rsv3=this._rsv3||t.rsv3&&t.name},_reserved:function(t){return this._rsv1&&t.rsv1?[1,this._rsv1]:this._rsv2&&t.rsv2?[2,this._rsv2]:!!this._rsv3&&!!t.rsv3&&[3,this._rsv3]}};for(var a in o)i.prototype[a]=o[a];t.exports=i},function(t,e,r){"use strict";var n=/([!#\$%&'\*\+\-\.\^_`\|~0-9A-Za-z]+)/,s=/([^!#\$%&'\*\+\-\.\^_`\|~0-9A-Za-z])/g,i=RegExp(n.source+"(?:=(?:"+n.source+"|"+/"((?:\\[\x00-\x7f]|[^\x00-\x08\x0a-\x1f\x7f"\\])*)"/.source+"))?"),o=RegExp(n.source+"(?: *; *"+i.source+")*","g"),a=RegExp("^"+o.source+"(?: *, *"+o.source+")*$"),h=/^-?(0|[1-9][0-9]*)(\.[0-9]+)?$/,c=Object.prototype.hasOwnProperty,u=function(){this._byName={},this._inOrder=[]};u.prototype.push=function(t,e){c.call(this._byName,t)||(this._byName[t]=[]),this._byName[t].push(e),this._inOrder.push({name:t,params:e})},u.prototype.eachOffer=function(t,e){for(var r=this._inOrder,n=0,s=r.length;n<s;n++)t.call(e,r[n].name,r[n].params)},u.prototype.byName=function(t){return this._byName[t]||[]},u.prototype.toArray=function(){return this._inOrder.slice()},t.exports={parseHeader:function(t){var e=new u;if(""===t||void 0===t)return e;if(!a.test(t))throw SyntaxError("Invalid Sec-WebSocket-Extensions header: "+t);return t.match(o).forEach(function(t){var r=t.match(RegExp(i.source,"g")),n=r.shift(),s={};r.forEach(function(t){var e,r=t.match(i),n=r[1];e=void 0!==r[2]?r[2]:void 0===r[3]||r[3].replace(/\\/g,""),h.test(e)&&(e=parseFloat(e)),c.call(s,n)?(s[n]=[].concat(s[n]),s[n].push(e)):s[n]=e},this),e.push(n,s)},this),e},serializeParams:function(t,e){var r=[],n=function(t,e){e instanceof Array?e.forEach(function(e){n(t,e)}):!0===e?r.push(t):"number"==typeof e?r.push(t+"="+e):s.test(e)?r.push(t+'="'+e.replace(/"/g,'\\"')+'"'):r.push(t+"="+e)};for(var i in e)n(i,e[i]);return[t].concat(r).join("; ")}}},function(t,e,r){"use strict";var n=r(32),s=r(14),i=function(t){this._cells=t.map(function(t){return new n(t)}),this._stopped={incoming:!1,outgoing:!1}};i.prototype.processIncomingMessage=function(t,e,r){this._stopped.incoming||this._loop("incoming",this._cells.length-1,-1,-1,t,e,r)},i.prototype.processOutgoingMessage=function(t,e,r){this._stopped.outgoing||this._loop("outgoing",0,this._cells.length,1,t,e,r)},i.prototype.close=function(t,e){this._stopped={incoming:!0,outgoing:!0};var r=this._cells.map(function(t){return t.close()});t&&s.all(r).then(function(){t.call(e)})},i.prototype._loop=function(t,e,r,n,s,i,o){for(var a=this._cells,h=a.length,c=this;h--;)a[h].pending(t);var u=function(e,s,h){if(e===r)return i.call(o,s,h);a[e][t](s,h,function(r,s){r&&(c._stopped[t]=!0),u(e+n,r,s)})};u(e,null,s)},t.exports=i},function(t,e,r){"use strict";var n=r(33),s=r(14),i=function(t){this._ext=t[0],this._session=t[1],this._functors={incoming:new n(this._session,"processIncomingMessage"),outgoing:new n(this._session,"processOutgoingMessage")}};i.prototype.pending=function(t){var e=this._functors[t];e._stopped||(e.pending+=1)},i.prototype.incoming=function(t,e,r,n){this._exec("incoming",t,e,r,n)},i.prototype.outgoing=function(t,e,r,n){this._exec("outgoing",t,e,r,n)},i.prototype.close=function(){return this._closed=this._closed||new s,this._doClose(),this._closed},i.prototype._exec=function(t,e,r,n,s){this._functors[t].call(e,r,function(t,e){t&&(t.message=this._ext.name+": "+t.message),n.call(s,t,e),this._doClose()},this)},i.prototype._doClose=function(){var t=this._functors.incoming,e=this._functors.outgoing;this._closed&&t.pending+e.pending===0&&(this._session&&this._session.close(),this._session=null,this._closed.done())},t.exports=i},function(t,e,r){"use strict";var n=r(13),s=function(t,e){this._session=t,this._method=e,this._queue=new n(s.QUEUE_SIZE),this._stopped=!1,this.pending=0};s.QUEUE_SIZE=8,s.prototype.call=function(t,e,r,n){if(!this._stopped){var s={error:t,message:e,callback:r,context:n,done:!1},i=!1,o=this;if(this._queue.push(s),s.error)return s.done=!0,this._stop(),this._flushQueue();var a=function(t,e){i^(i=!0)&&(t?(o._stop(),s.error=t,s.message=null):s.message=e,s.done=!0,o._flushQueue())};try{this._session[this._method](e,a)}catch(t){a(t)}}},s.prototype._stop=function(){this.pending=this._queue.length,this._stopped=!0},s.prototype._flushQueue=function(){for(var t,e=this._queue;e.length>0&&e.peek().done;)(t=e.shift()).error?(this.pending=0,e.clear()):this.pending-=1,t.callback.call(t.context,t.error,t.message)},t.exports=s},function(t,e,r){"use strict";var n=function(){},s={final:!1,rsv1:!1,rsv2:!1,rsv3:!1,opcode:null,masked:!1,maskingKey:null,lengthBytes:1,length:0,payload:null};for(var i in s)n.prototype[i]=s[i];t.exports=n},function(t,e,r){"use strict";var n=r(1).Buffer,s=function(){this.rsv1=!1,this.rsv2=!1,this.rsv3=!1,this.opcode=null,this.length=0,this._chunks=[]},i={read:function(){return this.data=this.data||n.concat(this._chunks,this.length)},pushFrame:function(t){this.rsv1=this.rsv1||t.rsv1,this.rsv2=this.rsv2||t.rsv2,this.rsv3=this.rsv3||t.rsv3,null===this.opcode&&(this.opcode=t.opcode),this._chunks.push(t.payload),this.length+=t.length}};for(var o in i)s.prototype[o]=i[o];t.exports=s},function(t,e,r){"use strict";var n=r(1).Buffer,s=r(5).Stream,i=r(6),o=r(0),a=r(2),h=r(9),c=r(10),u={"ws:":80,"wss:":443},l=function(t,e,r){this._client=t,this._http=new c("response"),this._origin="object"==typeof t.url?t.url:i.parse(t.url),this._url="object"==typeof e?e:i.parse(e),this._options=r||{},this._state=0,this.readable=this.writable=!0,this._paused=!1,this._headers=new h,this._headers.set("Host",this._origin.host),this._headers.set("Connection","keep-alive"),this._headers.set("Proxy-Connection","keep-alive");var s=this._url.auth&&n.from(this._url.auth,"utf8").toString("base64");s&&this._headers.set("Proxy-Authorization","Basic "+s)};o.inherits(l,s);var d={setHeader:function(t,e){return 0===this._state&&(this._headers.set(t,e),!0)},start:function(){if(0!==this._state)return!1;this._state=1;var t=this._origin,e=t.port||u[t.protocol],r=["CONNECT "+t.hostname+":"+e+" HTTP/1.1",this._headers.toString(),""];return this.emit("data",n.from(r.join("\r\n"),"utf8")),!0},pause:function(){this._paused=!0},resume:function(){this._paused=!1,this.emit("drain")},write:function(t){if(!this.writable)return!1;if(this._http.parse(t),!this._http.isComplete())return!this._paused;if(this.statusCode=this._http.statusCode,this.headers=this._http.headers,200===this.statusCode)this.emit("connect",new a.ConnectEvent);else{var e="Can't establish a connection to the server at "+this._origin.href;this.emit("error",Error(e))}return this.end(),!this._paused},end:function(t){this.writable&&(void 0!==t&&this.write(t),this.readable=this.writable=!1,this.emit("close"),this.emit("end"))},destroy:function(){this.end()}};for(var f in d)l.prototype[f]=d[f];t.exports=l},function(t,e,r){"use strict";var n=r(0),s=r(10),i=r(2),o=r(15),a=r(38),h=r(12),c=function(t){i.call(this,null,null,t),this._http=new s("request")};n.inherits(c,i);var u={EVENTS:["open","message","error","close","ping","pong"],_bindEventListeners:function(){this.messages.on("error",function(){}),this.on("error",function(){})},parse:function(t){if(this._delegate)return this._delegate.parse(t);if(this._http.parse(t),this._http.isComplete()){this.method=this._http.method,this.url=this._http.url,this.headers=this._http.headers,this.body=this._http.body;var e=this;this._delegate=c.http(this,this._options),this._delegate.messages=this.messages,this._delegate.io=this.io,this._open(),this.EVENTS.forEach(function(t){this._delegate.on(t,function(r){e.emit(t,r)})},this),this.protocol=this._delegate.protocol,this.version=this._delegate.version,this.parse(this._http.body),this.emit("connect",new i.ConnectEvent)}},_open:function(){this.__queue.forEach(function(t){this._delegate[t[0]].apply(this._delegate,t[1])},this),this.__queue=[]}};for(var l in["addExtension","setHeader","start","frame","text","binary","ping","close"].forEach(function(t){u[t]=function(){return this._delegate?this._delegate[t].apply(this._delegate,arguments):(this.__queue.push([t,arguments]),!0)}}),u)c.prototype[l]=u[l];c.isSecureRequest=function(t){if(t.connection&&void 0!==t.connection.authorized||t.socket&&t.socket.secure)return!0;var e=t.headers;return!!e&&("on"===e.https||"on"===e["x-forwarded-ssl"]||"https"===e["x-forwarded-scheme"]||"https"===e["x-forwarded-proto"])},c.determineUrl=function(t){return(this.isSecureRequest(t)?"wss:":"ws:")+"//"+t.headers.host+t.url},c.http=function(t,e){void 0===(e=e||{}).requireMasking&&(e.requireMasking=!0);var r=t.headers,n=r["sec-websocket-version"],s=r["sec-websocket-key"],i=r["sec-websocket-key1"],c=r["sec-websocket-key2"],u=this.determineUrl(t);return n||s?new h(t,u,e):i||c?new a(t,u,e):new o(t,u,e)},t.exports=c},function(t,e,r){"use strict";var n=r(1).Buffer,s=r(2),i=r(15),o=r(3),a=r(0),h=function(t){return parseInt((t.match(/[0-9]/g)||[]).join(""),10)},c=function(t){return(t.match(/ /g)||[]).length},u=function(t,e,r){i.apply(this,arguments),this._stage=-1,this._body=[],this.version="hixie-76",this._headers.clear(),this._headers.set("Upgrade","WebSocket"),this._headers.set("Connection","Upgrade"),this._headers.set("Sec-WebSocket-Origin",this._request.headers.origin),this._headers.set("Sec-WebSocket-Location",this.url)};a.inherits(u,i);var l={BODY_SIZE:8,start:function(){return!!i.prototype.start.call(this)&&(this._started=!0,this._sendHandshakeBody(),!0)},close:function(){return 3!==this.readyState&&(1===this.readyState&&this._write(n.from([255,0])),this.readyState=3,this.emit("close",new s.CloseEvent(null,null)),!0)},_handshakeResponse:function(){var t=this._request.headers,e=t["sec-websocket-key1"],r=t["sec-websocket-key2"];if(!e)throw Error("Missing required header: Sec-WebSocket-Key1");if(!r)throw Error("Missing required header: Sec-WebSocket-Key2");var s=h(e),i=c(e),o=h(r),a=c(r);if(s%i!=0||o%a!=0)throw Error("Client sent invalid Sec-WebSocket-Key headers");this._keyValues=[s/i,o/a];var t=["HTTP/1.1 101 WebSocket Protocol Handshake",this._headers.toString(),""];return n.from(t.join("\r\n"),"binary")},_handshakeSignature:function(){if(this._body.length<this.BODY_SIZE)return null;var t=o.createHash("md5"),e=n.allocUnsafe(8+this.BODY_SIZE);return e.writeUInt32BE(this._keyValues[0],0),e.writeUInt32BE(this._keyValues[1],4),n.from(this._body).copy(e,8,0,this.BODY_SIZE),t.update(e),n.from(t.digest("binary"),"binary")},_sendHandshakeBody:function(){if(this._started){var t=this._handshakeSignature();t&&(this._write(t),this._stage=0,this._open(),this._body.length>this.BODY_SIZE&&this.parse(this._body.slice(this.BODY_SIZE)))}},_parseLeadingByte:function(t){if(255!==t)return i.prototype._parseLeadingByte.call(this,t);this._closing=!0,this._length=0,this._stage=1}};for(var d in l)u.prototype[d]=l[d];t.exports=u},function(t,e,r){"use strict";var n=r(0),s=r(40),i=r(41),o=r(6),a=r(4),h=r(11);r(7);var c={"http:":80,"https:":443,"ws:":80,"wss:":443},u=["https:","wss:"],l=function(t,e,r){r=r||{},this.url=t,this._driver=a.client(this.url,{maxLength:r.maxLength,protocols:e}),["open","error"].forEach(function(t){this._driver.on(t,function(){y.headers=y._driver.headers,y.statusCode=y._driver.statusCode})},this);var n=r.proxy||{},l=o.parse(n.origin||this.url),d=l.port||c[l.protocol],f=u.indexOf(l.protocol)>=0,p=function(){y._onConnect()},g=r.net||{},_=r.tls||{},v=n.origin?n.tls||{}:_,y=this;g.host=v.host=l.hostname,g.port=v.port=d,_.ca=_.ca||r.ca,v.servername=v.servername||l.hostname,this._stream=f?i.connect(v,p):s.connect(g,p),n.origin&&this._configureProxy(n,_),h.call(this,r)};n.inherits(l,h),l.prototype._onConnect=function(){(this._proxy||this._driver).start()},l.prototype._configureProxy=function(t,e){var r,n=o.parse(this.url),s=u.indexOf(n.protocol)>=0,a=this;if(this._proxy=this._driver.proxy(t.origin),t.headers)for(r in t.headers)this._proxy.setHeader(r,t.headers[r]);this._proxy.pipe(this._stream,{end:!1}),this._stream.pipe(this._proxy),this._proxy.on("connect",function(){if(s){var t={socket:a._stream,servername:n.hostname};for(r in e)t[r]=e[r];a._stream=i.connect(t),a._configureStream()}a._driver.io.pipe(a._stream),a._stream.pipe(a._driver.io),a._driver.start()}),this._proxy.on("error",function(t){a._driver.emit("error",t)})},t.exports=l},function(t,e){t.exports=r(1808)},function(t,e){t.exports=r(4404)},function(t,e,r){"use strict";var n=r(5).Stream,s=r(0),i=r(4),o=r(9),a=r(11),h=r(16),c=r(7),u=function(t,e,r){this.writable=!0,r=r||{},this._stream=e.socket,this._ping=r.ping||this.DEFAULT_PING,this._retry=r.retry||this.DEFAULT_RETRY;var n=i.isSecureRequest(t)?"https:":"http:";this.url=n+"//"+t.headers.host+t.url,this.lastEventId=t.headers["last-event-id"]||"",this.readyState=a.CONNECTING;var s=new o,h=this;if(r.headers)for(var c in r.headers)s.set(c,r.headers[c]);if(this._stream&&this._stream.writable){process.nextTick(function(){h._open()}),this._stream.setTimeout(0),this._stream.setNoDelay(!0);var u="HTTP/1.1 200 OK\r\nContent-Type: text/event-stream\r\nCache-Control: no-cache, no-store\r\nConnection: close\r\n"+s.toString()+"\r\nretry: "+Math.floor(1e3*this._retry)+"\r\n\r\n";this._write(u),this._stream.on("drain",function(){h.emit("drain")}),this._ping&&(this._pingTimer=setInterval(function(){h.ping()},1e3*this._ping)),["error","end"].forEach(function(t){h._stream.on(t,function(){h.close()})})}};s.inherits(u,n),u.isEventSource=function(t){return"GET"===t.method&&(t.headers.accept||"").split(/\s*,\s*/).indexOf("text/event-stream")>=0};var l={DEFAULT_PING:10,DEFAULT_RETRY:5,_write:function(t){if(!this.writable)return!1;try{return this._stream.write(t,"utf8")}catch(t){return!1}},_open:function(){if(this.readyState===a.CONNECTING){this.readyState=a.OPEN;var t=new c("open");t.initEvent("open",!1,!1),this.dispatchEvent(t)}},write:function(t){return this.send(t)},end:function(t){void 0!==t&&this.write(t),this.close()},send:function(t,e){if(this.readyState>a.OPEN)return!1;t=String(t).replace(/(\r\n|\r|\n)/g,"$1data: ");var r="";return(e=e||{}).event&&(r+="event: "+e.event+"\r\n"),e.id&&(r+="id: "+e.id+"\r\n"),r+="data: "+t+"\r\n\r\n",this._write(r)},ping:function(){return this._write(":\r\n\r\n")},close:function(){if(this.readyState>a.OPEN)return!1;this.readyState=a.CLOSED,this.writable=!1,this._pingTimer&&clearInterval(this._pingTimer),this._stream&&this._stream.end();var t=new c("close");return t.initEvent("close",!1,!1),this.dispatchEvent(t),!0}};for(var d in l)u.prototype[d]=l[d];for(var f in h)u.prototype[f]=h[f];t.exports=u},function(t,e){t.exports=r(2081)},function(t,e){t.exports=r(7147)},function(t,e){t.exports=r(3685)},function(t,e){t.exports=r(5687)},function(t,e,r){"use strict";r.r(e),r.d(e,"default",function(){return ef});for(var n,s,i,o,a,h,c=String.fromCharCode,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l={},d=0,f=u.length;d<f;d++)l[u.charAt(d)]=d;var p=function(t){var e=t.charCodeAt(0);return e<128?t:e<2048?c(192|e>>>6)+c(128|63&e):c(224|e>>>12&15)+c(128|e>>>6&63)+c(128|63&e)},g=function(t){var e=[0,2,1][t.length%3],r=t.charCodeAt(0)<<16|(t.length>1?t.charCodeAt(1):0)<<8|(t.length>2?t.charCodeAt(2):0);return[u.charAt(r>>>18),u.charAt(r>>>12&63),e>=2?"=":u.charAt(r>>>6&63),e>=1?"=":u.charAt(63&r)].join("")},_=global.btoa||function(t){return t.replace(/[\s\S]{1,3}/g,g)},v=class{constructor(t,e,r,n){this.clear=e,this.timer=t(()=>{this.timer&&(this.timer=n(this.timer))},r)}isRunning(){return null!==this.timer}ensureAborted(){this.timer&&(this.clear(this.timer),this.timer=null)}};function y(t){global.clearTimeout(t)}function m(t){global.clearInterval(t)}class b extends v{constructor(t,e){super(setTimeout,y,t,function(t){return e(),null})}}class S extends v{constructor(t,e){super(setInterval,m,t,function(t){return e(),t})}}var E={now:()=>Date.now?Date.now():new Date().valueOf(),defer:t=>new b(0,t),method(t,...e){var r=Array.prototype.slice.call(arguments,1);return function(e){return e[t].apply(e,r.concat(arguments))}}};function w(t,...e){for(var r=0;r<e.length;r++){var n=e[r];for(var s in n)n[s]&&n[s].constructor&&n[s].constructor===Object?t[s]=w(t[s]||{},n[s]):t[s]=n[s]}return t}function C(){for(var t=["Pusher"],e=0;e<arguments.length;e++)"string"==typeof arguments[e]?t.push(arguments[e]):t.push(N(arguments[e]));return t.join(" : ")}function k(t,e){var r=Array.prototype.indexOf;if(null===t)return -1;if(r&&t.indexOf===r)return t.indexOf(e);for(var n=0,s=t.length;n<s;n++)if(t[n]===e)return n;return -1}function O(t,e){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(t[r],r,t)}function T(t){var e=[];return O(t,function(t,r){e.push(r)}),e}function x(t,e,r){for(var n=0;n<t.length;n++)e.call(r||global,t[n],n,t)}function P(t,e){for(var r=[],n=0;n<t.length;n++)r.push(e(t[n],n,t,r));return r}function A(t,e){e=e||function(t){return!!t};for(var r=[],n=0;n<t.length;n++)e(t[n],n,t,r)&&r.push(t[n]);return r}function R(t,e){var r={};return O(t,function(n,s){(e&&e(n,s,t,r)||n)&&(r[s]=n)}),r}function L(t,e){for(var r=0;r<t.length;r++)if(e(t[r],r,t))return!0;return!1}function N(t){try{return JSON.stringify(t)}catch(n){var e,r;return JSON.stringify((e=[],r=[],function t(n,s){var i,o,a;switch(typeof n){case"object":if(!n)return null;for(i=0;i<e.length;i+=1)if(e[i]===n)return{$ref:r[i]};if(e.push(n),r.push(s),"[object Array]"===Object.prototype.toString.apply(n))for(i=0,a=[];i<n.length;i+=1)a[i]=t(n[i],s+"["+i+"]");else for(o in a={},n)Object.prototype.hasOwnProperty.call(n,o)&&(a[o]=t(n[o],s+"["+JSON.stringify(o)+"]"));return a;case"number":case"string":case"boolean":return n}}(t,"$")))}}var U={VERSION:"8.3.0",PROTOCOL:7,wsPort:80,wssPort:443,wsPath:"",httpHost:"sockjs.pusher.com",httpPort:80,httpsPort:443,httpPath:"/pusher",stats_host:"stats.pusher.com",authEndpoint:"/pusher/auth",authTransport:"ajax",activityTimeout:12e4,pongTimeout:3e4,unavailableTimeout:1e4,userAuthentication:{endpoint:"/pusher/user-auth",transport:"ajax"},channelAuthorization:{endpoint:"/pusher/auth",transport:"ajax"}};function I(t,e,r){return t+(e.useTLS?"s":"")+"://"+(e.useTLS?e.hostTLS:e.hostNonTLS)+r}function D(t,e){return"/app/"+t+("?protocol="+U.PROTOCOL+"&client=js&version=")+U.VERSION+(e?"&"+e:"")}class M{constructor(){this._callbacks={}}get(t){return this._callbacks["_"+t]}add(t,e,r){var n="_"+t;this._callbacks[n]=this._callbacks[n]||[],this._callbacks[n].push({fn:e,context:r})}remove(t,e,r){if(!t&&!e&&!r){this._callbacks={};return}var n=t?["_"+t]:T(this._callbacks);e||r?this.removeCallback(n,e,r):this.removeAllCallbacks(n)}removeCallback(t,e,r){x(t,function(t){this._callbacks[t]=A(this._callbacks[t]||[],function(t){return e&&e!==t.fn||r&&r!==t.context}),0===this._callbacks[t].length&&delete this._callbacks[t]},this)}removeAllCallbacks(t){x(t,function(t){delete this._callbacks[t]},this)}}class H{constructor(t){this.callbacks=new M,this.global_callbacks=[],this.failThrough=t}bind(t,e,r){return this.callbacks.add(t,e,r),this}bind_global(t){return this.global_callbacks.push(t),this}unbind(t,e,r){return this.callbacks.remove(t,e,r),this}unbind_global(t){return t?this.global_callbacks=A(this.global_callbacks||[],e=>e!==t):this.global_callbacks=[],this}unbind_all(){return this.unbind(),this.unbind_global(),this}emit(t,e,r){for(var n=0;n<this.global_callbacks.length;n++)this.global_callbacks[n](t,e);var s=this.callbacks.get(t),i=[];if(r?i.push(e,r):e&&i.push(e),s&&s.length>0)for(var n=0;n<s.length;n++)s[n].fn.apply(s[n].context||global,i);else this.failThrough&&this.failThrough(t,e);return this}}var B=new class{constructor(){this.globalLog=t=>{global.console&&global.console.log&&global.console.log(t)}}debug(...t){this.log(this.globalLog,t)}warn(...t){this.log(this.globalLogWarn,t)}error(...t){this.log(this.globalLogError,t)}globalLogWarn(t){global.console&&global.console.warn?global.console.warn(t):this.globalLog(t)}globalLogError(t){global.console&&global.console.error?global.console.error(t):this.globalLogWarn(t)}log(t,...e){var r=C.apply(this,arguments);if(el.log)el.log(r);else if(el.logToConsole){let e=t.bind(this);e(r)}}};class q extends H{constructor(t,e,r,n,s){super(),this.initialize=t0.transportConnectionInitializer,this.hooks=t,this.name=e,this.priority=r,this.key=n,this.options=s,this.state="new",this.timeline=s.timeline,this.activityTimeout=s.activityTimeout,this.id=this.timeline.generateUniqueID()}handlesActivityChecks(){return!!this.hooks.handlesActivityChecks}supportsPing(){return!!this.hooks.supportsPing}connect(){if(this.socket||"initialized"!==this.state)return!1;var t=this.hooks.urls.getInitial(this.key,this.options);try{this.socket=this.hooks.getSocket(t,this.options)}catch(t){return E.defer(()=>{this.onError(t),this.changeState("closed")}),!1}return this.bindListeners(),B.debug("Connecting",{transport:this.name,url:t}),this.changeState("connecting"),!0}close(){return!!this.socket&&(this.socket.close(),!0)}send(t){return"open"===this.state&&(E.defer(()=>{this.socket&&this.socket.send(t)}),!0)}ping(){"open"===this.state&&this.supportsPing()&&this.socket.ping()}onOpen(){this.hooks.beforeOpen&&this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options)),this.changeState("open"),this.socket.onopen=void 0}onError(t){this.emit("error",{type:"WebSocketError",error:t}),this.timeline.error(this.buildTimelineMessage({error:t.toString()}))}onClose(t){t?this.changeState("closed",{code:t.code,reason:t.reason,wasClean:t.wasClean}):this.changeState("closed"),this.unbindListeners(),this.socket=void 0}onMessage(t){this.emit("message",t)}onActivity(){this.emit("activity")}bindListeners(){this.socket.onopen=()=>{this.onOpen()},this.socket.onerror=t=>{this.onError(t)},this.socket.onclose=t=>{this.onClose(t)},this.socket.onmessage=t=>{this.onMessage(t)},this.supportsPing()&&(this.socket.onactivity=()=>{this.onActivity()})}unbindListeners(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=void 0,this.supportsPing()&&(this.socket.onactivity=void 0))}changeState(t,e){this.state=t,this.timeline.info(this.buildTimelineMessage({state:t,params:e})),this.emit(t,e)}buildTimelineMessage(t){return w({cid:this.id},t)}}class z{constructor(t){this.hooks=t}isSupported(t){return this.hooks.isSupported(t)}createConnection(t,e,r,n){return new q(this.hooks,t,e,r,n)}}var F=new z({urls:{getInitial:function(t,e){var r=(e.httpPath||"")+D(t,"flash=false");return I("ws",e,r)}},handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return!!t0.getWebSocketAPI()},isSupported:function(){return!!t0.getWebSocketAPI()},getSocket:function(t){return t0.createWebSocket(t)}}),j={urls:{getInitial:function(t,e){var r=(e.httpPath||"/pusher")+D(t);return I("http",e,r)}},handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return!0}},K=w({getSocket:function(t){return t0.HTTPFactory.createStreamingSocket(t)}},j),G=w({getSocket:function(t){return t0.HTTPFactory.createPollingSocket(t)}},j),Y={isSupported:function(){return t0.isXHRSupported()}},W={ws:F,xhr_streaming:new z(w({},K,Y)),xhr_polling:new z(w({},G,Y))};class V{constructor(t,e,r){this.manager=t,this.transport=e,this.minPingDelay=r.minPingDelay,this.maxPingDelay=r.maxPingDelay,this.pingDelay=void 0}createConnection(t,e,r,n){n=w({},n,{activityTimeout:this.pingDelay});var s=this.transport.createConnection(t,e,r,n),i=null,o=function(){s.unbind("open",o),s.bind("closed",a),i=E.now()},a=t=>{if(s.unbind("closed",a),1002===t.code||1003===t.code)this.manager.reportDeath();else if(!t.wasClean&&i){var e=E.now()-i;e<2*this.maxPingDelay&&(this.manager.reportDeath(),this.pingDelay=Math.max(e/2,this.minPingDelay))}};return s.bind("open",o),s}isSupported(t){return this.manager.isAlive()&&this.transport.isSupported(t)}}let $={decodeMessage:function(t){try{var e=JSON.parse(t.data),r=e.data;if("string"==typeof r)try{r=JSON.parse(e.data)}catch(t){}var n={event:e.event,channel:e.channel,data:r};return e.user_id&&(n.user_id=e.user_id),n}catch(e){throw{type:"MessageParseError",error:e,data:t.data}}},encodeMessage:function(t){return JSON.stringify(t)},processHandshake:function(t){var e=$.decodeMessage(t);if("pusher:connection_established"===e.event){if(!e.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:e.data.socket_id,activityTimeout:1e3*e.data.activity_timeout}}if("pusher:error"===e.event)return{action:this.getCloseAction(e.data),error:this.getCloseError(e.data)};throw"Invalid handshake"},getCloseAction:function(t){return t.code<4e3?t.code>=1002&&t.code<=1004?"backoff":null:4e3===t.code?"tls_only":t.code<4100?"refused":t.code<4200?"backoff":t.code<4300?"retry":"refused"},getCloseError:function(t){return 1e3!==t.code&&1001!==t.code?{type:"PusherError",data:{code:t.code,message:t.reason||t.message}}:null}};class X extends H{constructor(t,e){super(),this.id=t,this.transport=e,this.activityTimeout=e.activityTimeout,this.bindListeners()}handlesActivityChecks(){return this.transport.handlesActivityChecks()}send(t){return this.transport.send(t)}send_event(t,e,r){var n={event:t,data:e};return r&&(n.channel=r),B.debug("Event sent",n),this.send($.encodeMessage(n))}ping(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})}close(){this.transport.close()}bindListeners(){var t={message:t=>{var e;try{e=$.decodeMessage(t)}catch(e){this.emit("error",{type:"MessageParseError",error:e,data:t.data})}if(void 0!==e){switch(B.debug("Event recd",e),e.event){case"pusher:error":this.emit("error",{type:"PusherError",data:e.data});break;case"pusher:ping":this.emit("ping");break;case"pusher:pong":this.emit("pong")}this.emit("message",e)}},activity:()=>{this.emit("activity")},error:t=>{this.emit("error",t)},closed:t=>{e(),t&&t.code&&this.handleCloseEvent(t),this.transport=null,this.emit("closed")}},e=()=>{O(t,(t,e)=>{this.transport.unbind(e,t)})};O(t,(t,e)=>{this.transport.bind(e,t)})}handleCloseEvent(t){var e=$.getCloseAction(t),r=$.getCloseError(t);r&&this.emit("error",r),e&&this.emit(e,{action:e,error:r})}}class J{constructor(t,e){this.transport=t,this.callback=e,this.bindListeners()}close(){this.unbindListeners(),this.transport.close()}bindListeners(){this.onMessage=t=>{var e;this.unbindListeners();try{e=$.processHandshake(t)}catch(t){this.finish("error",{error:t}),this.transport.close();return}"connected"===e.action?this.finish("connected",{connection:new X(e.id,this.transport),activityTimeout:e.activityTimeout}):(this.finish(e.action,{error:e.error}),this.transport.close())},this.onClosed=t=>{this.unbindListeners();var e=$.getCloseAction(t)||"backoff",r=$.getCloseError(t);this.finish(e,{error:r})},this.transport.bind("message",this.onMessage),this.transport.bind("closed",this.onClosed)}unbindListeners(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)}finish(t,e){this.callback(w({transport:this.transport,action:t},e))}}class Z{constructor(t,e){this.timeline=t,this.options=e||{}}send(t,e){this.timeline.isEmpty()||this.timeline.send(t0.TimelineTransport.getAgent(this,t),e)}}class Q extends Error{constructor(t){super(t),Object.setPrototypeOf(this,new.target.prototype)}}class tt extends Error{constructor(t){super(t),Object.setPrototypeOf(this,new.target.prototype)}}class te extends Error{constructor(t){super(t),Object.setPrototypeOf(this,new.target.prototype)}}class tr extends Error{constructor(t){super(t),Object.setPrototypeOf(this,new.target.prototype)}}class tn extends Error{constructor(t){super(t),Object.setPrototypeOf(this,new.target.prototype)}}class ts extends Error{constructor(t){super(t),Object.setPrototypeOf(this,new.target.prototype)}}class ti extends Error{constructor(t){super(t),Object.setPrototypeOf(this,new.target.prototype)}}class to extends Error{constructor(t,e){super(e),this.status=t,Object.setPrototypeOf(this,new.target.prototype)}}let ta={baseUrl:"https://pusher.com",urls:{authenticationEndpoint:{path:"/docs/channels/server_api/authenticating_users"},authorizationEndpoint:{path:"/docs/channels/server_api/authorizing-users/"},javascriptQuickStart:{path:"/docs/javascript_quick_start"},triggeringClientEvents:{path:"/docs/client_api_guide/client_events#trigger-events"},encryptedChannelSupport:{fullUrl:"https://github.com/pusher/pusher-js/tree/cc491015371a4bde5743d1c87a0fbac0feb53195#encrypted-channel-support"}}};var th={buildLogSuffix:function(t){let e;let r=ta.urls[t];return r&&(r.fullUrl?e=r.fullUrl:r.path&&(e=ta.baseUrl+r.path),e)?`See: ${e}`:""}};class tc extends H{constructor(t,e){super(function(e,r){B.debug("No callbacks on "+t+" for "+e)}),this.name=t,this.pusher=e,this.subscribed=!1,this.subscriptionPending=!1,this.subscriptionCancelled=!1}authorize(t,e){return e(null,{auth:""})}trigger(t,e){if(0!==t.indexOf("client-"))throw new Q("Event '"+t+"' does not start with 'client-'");if(!this.subscribed){var r=th.buildLogSuffix("triggeringClientEvents");B.warn(`Client event triggered before channel 'subscription_succeeded' event . ${r}`)}return this.pusher.send_event(t,e,this.name)}disconnect(){this.subscribed=!1,this.subscriptionPending=!1}handleEvent(t){var e=t.event,r=t.data;"pusher_internal:subscription_succeeded"===e?this.handleSubscriptionSucceededEvent(t):"pusher_internal:subscription_count"===e?this.handleSubscriptionCountEvent(t):0!==e.indexOf("pusher_internal:")&&this.emit(e,r,{})}handleSubscriptionSucceededEvent(t){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):this.emit("pusher:subscription_succeeded",t.data)}handleSubscriptionCountEvent(t){t.data.subscription_count&&(this.subscriptionCount=t.data.subscription_count),this.emit("pusher:subscription_count",t.data)}subscribe(){this.subscribed||(this.subscriptionPending=!0,this.subscriptionCancelled=!1,this.authorize(this.pusher.connection.socket_id,(t,e)=>{t?(this.subscriptionPending=!1,B.error(t.toString()),this.emit("pusher:subscription_error",Object.assign({},{type:"AuthError",error:t.message},t instanceof to?{status:t.status}:{}))):this.pusher.send_event("pusher:subscribe",{auth:e.auth,channel_data:e.channel_data,channel:this.name})}))}unsubscribe(){this.subscribed=!1,this.pusher.send_event("pusher:unsubscribe",{channel:this.name})}cancelSubscription(){this.subscriptionCancelled=!0}reinstateSubscription(){this.subscriptionCancelled=!1}}class tu extends tc{authorize(t,e){return this.pusher.config.channelAuthorizer({channelName:this.name,socketId:t},e)}}class tl{constructor(){this.reset()}get(t){return Object.prototype.hasOwnProperty.call(this.members,t)?{id:t,info:this.members[t]}:null}each(t){O(this.members,(e,r)=>{t(this.get(r))})}setMyID(t){this.myID=t}onSubscription(t){this.members=t.presence.hash,this.count=t.presence.count,this.me=this.get(this.myID)}addMember(t){return null===this.get(t.user_id)&&this.count++,this.members[t.user_id]=t.user_info,this.get(t.user_id)}removeMember(t){var e=this.get(t.user_id);return e&&(delete this.members[t.user_id],this.count--),e}reset(){this.members={},this.count=0,this.myID=null,this.me=null}}class td extends tu{constructor(t,e){super(t,e),this.members=new tl}authorize(t,e){super.authorize(t,(t,r)=>{var n,s,i,o;return n=this,s=void 0,i=void 0,o=function*(){if(!t){if(null!=r.channel_data){var n=JSON.parse(r.channel_data);this.members.setMyID(n.user_id)}else if(yield this.pusher.user.signinDonePromise,null!=this.pusher.user.user_data)this.members.setMyID(this.pusher.user.user_data.id);else{let t=th.buildLogSuffix("authorizationEndpoint");B.error(`Invalid auth response for channel '${this.name}', expected 'channel_data' field. ${t}, or the user should be signed in.`),e("Invalid auth response");return}}e(t,r)},new(i||(i=Promise))(function(t,e){function r(t){try{h(o.next(t))}catch(t){e(t)}}function a(t){try{h(o.throw(t))}catch(t){e(t)}}function h(e){var n;e.done?t(e.value):((n=e.value)instanceof i?n:new i(function(t){t(n)})).then(r,a)}h((o=o.apply(n,s||[])).next())})})}handleEvent(t){var e=t.event;if(0===e.indexOf("pusher_internal:"))this.handleInternalEvent(t);else{var r=t.data,n={};t.user_id&&(n.user_id=t.user_id),this.emit(e,r,n)}}handleInternalEvent(t){var e=t.event,r=t.data;switch(e){case"pusher_internal:subscription_succeeded":this.handleSubscriptionSucceededEvent(t);break;case"pusher_internal:subscription_count":this.handleSubscriptionCountEvent(t);break;case"pusher_internal:member_added":var n=this.members.addMember(r);this.emit("pusher:member_added",n);break;case"pusher_internal:member_removed":var s=this.members.removeMember(r);s&&this.emit("pusher:member_removed",s)}}handleSubscriptionSucceededEvent(t){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):(this.members.onSubscription(t.data),this.emit("pusher:subscription_succeeded",this.members))}disconnect(){this.members.reset(),super.disconnect()}}var tf=r(17),tp=r(8);class tg extends tu{constructor(t,e,r){super(t,e),this.key=null,this.nacl=r}authorize(t,e){super.authorize(t,(t,r)=>{if(t){e(t,r);return}let n=r.shared_secret;if(!n){e(Error(`No shared_secret key in auth payload for encrypted channel: ${this.name}`),null);return}this.key=Object(tp.decode)(n),delete r.shared_secret,e(null,r)})}trigger(t,e){throw new tn("Client events are not currently supported for encrypted channels")}handleEvent(t){var e=t.event,r=t.data;if(0===e.indexOf("pusher_internal:")||0===e.indexOf("pusher:")){super.handleEvent(t);return}this.handleEncryptedEvent(e,r)}handleEncryptedEvent(t,e){if(!this.key){B.debug("Received encrypted event before key has been retrieved from the authEndpoint");return}if(!e.ciphertext||!e.nonce){B.error("Unexpected format for encrypted event, expected object with `ciphertext` and `nonce` fields, got: "+e);return}let r=Object(tp.decode)(e.ciphertext);if(r.length<this.nacl.secretbox.overheadLength){B.error(`Expected encrypted event ciphertext length to be ${this.nacl.secretbox.overheadLength}, got: ${r.length}`);return}let n=Object(tp.decode)(e.nonce);if(n.length<this.nacl.secretbox.nonceLength){B.error(`Expected encrypted event nonce length to be ${this.nacl.secretbox.nonceLength}, got: ${n.length}`);return}let s=this.nacl.secretbox.open(r,n,this.key);if(null===s){B.debug("Failed to decrypt an event, probably because it was encrypted with a different key. Fetching a new key from the authEndpoint..."),this.authorize(this.pusher.connection.socket_id,(e,i)=>{if(e){B.error(`Failed to make a request to the authEndpoint: ${i}. Unable to fetch new key, so dropping encrypted event`);return}if(null===(s=this.nacl.secretbox.open(r,n,this.key))){B.error("Failed to decrypt event with new key. Dropping encrypted event");return}this.emit(t,this.getDataToEmit(s))});return}this.emit(t,this.getDataToEmit(s))}getDataToEmit(t){let e=Object(tf.decode)(t);try{return JSON.parse(e)}catch(t){return e}}}class t_ extends H{constructor(t,e){super(),this.state="initialized",this.connection=null,this.key=t,this.options=e,this.timeline=this.options.timeline,this.usingTLS=this.options.useTLS,this.errorCallbacks=this.buildErrorCallbacks(),this.connectionCallbacks=this.buildConnectionCallbacks(this.errorCallbacks),this.handshakeCallbacks=this.buildHandshakeCallbacks(this.errorCallbacks);var r=t0.getNetwork();r.bind("online",()=>{this.timeline.info({netinfo:"online"}),("connecting"===this.state||"unavailable"===this.state)&&this.retryIn(0)}),r.bind("offline",()=>{this.timeline.info({netinfo:"offline"}),this.connection&&this.sendActivityCheck()}),this.updateStrategy()}connect(){if(!this.connection&&!this.runner){if(!this.strategy.isSupported()){this.updateState("failed");return}this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()}}send(t){return!!this.connection&&this.connection.send(t)}send_event(t,e,r){return!!this.connection&&this.connection.send_event(t,e,r)}disconnect(){this.disconnectInternally(),this.updateState("disconnected")}isUsingTLS(){return this.usingTLS}startConnecting(){var t=(e,r)=>{e?this.runner=this.strategy.connect(0,t):"error"===r.action?(this.emit("error",{type:"HandshakeError",error:r.error}),this.timeline.error({handshakeError:r.error})):(this.abortConnecting(),this.handshakeCallbacks[r.action](r))};this.runner=this.strategy.connect(0,t)}abortConnecting(){this.runner&&(this.runner.abort(),this.runner=null)}disconnectInternally(){this.abortConnecting(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.connection&&this.abandonConnection().close()}updateStrategy(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,useTLS:this.usingTLS})}retryIn(t){this.timeline.info({action:"retry",delay:t}),t>0&&this.emit("connecting_in",Math.round(t/1e3)),this.retryTimer=new b(t||0,()=>{this.disconnectInternally(),this.connect()})}clearRetryTimer(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)}setUnavailableTimer(){this.unavailableTimer=new b(this.options.unavailableTimeout,()=>{this.updateState("unavailable")})}clearUnavailableTimer(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()}sendActivityCheck(){this.stopActivityCheck(),this.connection.ping(),this.activityTimer=new b(this.options.pongTimeout,()=>{this.timeline.error({pong_timed_out:this.options.pongTimeout}),this.retryIn(0)})}resetActivityCheck(){this.stopActivityCheck(),this.connection&&!this.connection.handlesActivityChecks()&&(this.activityTimer=new b(this.activityTimeout,()=>{this.sendActivityCheck()}))}stopActivityCheck(){this.activityTimer&&this.activityTimer.ensureAborted()}buildConnectionCallbacks(t){return w({},t,{message:t=>{this.resetActivityCheck(),this.emit("message",t)},ping:()=>{this.send_event("pusher:pong",{})},activity:()=>{this.resetActivityCheck()},error:t=>{this.emit("error",t)},closed:()=>{this.abandonConnection(),this.shouldRetry()&&this.retryIn(1e3)}})}buildHandshakeCallbacks(t){return w({},t,{connected:t=>{this.activityTimeout=Math.min(this.options.activityTimeout,t.activityTimeout,t.connection.activityTimeout||1/0),this.clearUnavailableTimer(),this.setConnection(t.connection),this.socket_id=this.connection.id,this.updateState("connected",{socket_id:this.socket_id})}})}buildErrorCallbacks(){let t=t=>e=>{e.error&&this.emit("error",{type:"WebSocketError",error:e.error}),t(e)};return{tls_only:t(()=>{this.usingTLS=!0,this.updateStrategy(),this.retryIn(0)}),refused:t(()=>{this.disconnect()}),backoff:t(()=>{this.retryIn(1e3)}),retry:t(()=>{this.retryIn(0)})}}setConnection(t){for(var e in this.connection=t,this.connectionCallbacks)this.connection.bind(e,this.connectionCallbacks[e]);this.resetActivityCheck()}abandonConnection(){if(this.connection){for(var t in this.stopActivityCheck(),this.connectionCallbacks)this.connection.unbind(t,this.connectionCallbacks[t]);var e=this.connection;return this.connection=null,e}}updateState(t,e){var r=this.state;if(this.state=t,r!==t){var n=t;"connected"===n&&(n+=" with new socket ID "+e.socket_id),B.debug("State changed",r+" -> "+n),this.timeline.info({state:t,params:e}),this.emit("state_change",{previous:r,current:t}),this.emit(t,e)}}shouldRetry(){return"connecting"===this.state||"connected"===this.state}}class tv{constructor(){this.channels={}}add(t,e){return this.channels[t]||(this.channels[t]=function(t,e){if(0===t.indexOf("private-encrypted-")){if(e.config.nacl)return ty.createEncryptedChannel(t,e,e.config.nacl);let r=th.buildLogSuffix("encryptedChannelSupport");throw new tn(`Tried to subscribe to a private-encrypted- channel but no nacl implementation available. ${r}`)}if(0===t.indexOf("private-"))return ty.createPrivateChannel(t,e);if(0===t.indexOf("presence-"))return ty.createPresenceChannel(t,e);if(0!==t.indexOf("#"))return ty.createChannel(t,e);throw new tt('Cannot create a channel with name "'+t+'".')}(t,e)),this.channels[t]}all(){var t,e;return t=this.channels,e=[],O(t,function(t){e.push(t)}),e}find(t){return this.channels[t]}remove(t){var e=this.channels[t];return delete this.channels[t],e}disconnect(){O(this.channels,function(t){t.disconnect()})}}var ty={createChannels:()=>new tv,createConnectionManager:(t,e)=>new t_(t,e),createChannel:(t,e)=>new tc(t,e),createPrivateChannel:(t,e)=>new tu(t,e),createPresenceChannel:(t,e)=>new td(t,e),createEncryptedChannel:(t,e,r)=>new tg(t,e,r),createTimelineSender:(t,e)=>new Z(t,e),createHandshake:(t,e)=>new J(t,e),createAssistantToTheTransportManager:(t,e,r)=>new V(t,e,r)};class tm{constructor(t){this.options=t||{},this.livesLeft=this.options.lives||1/0}getAssistant(t){return ty.createAssistantToTheTransportManager(this,t,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})}isAlive(){return this.livesLeft>0}reportDeath(){this.livesLeft-=1}}class tb{constructor(t,e){this.strategies=t,this.loop=!!e.loop,this.failFast=!!e.failFast,this.timeout=e.timeout,this.timeoutLimit=e.timeoutLimit}isSupported(){return L(this.strategies,E.method("isSupported"))}connect(t,e){var r=this.strategies,n=0,s=this.timeout,i=null,o=(a,h)=>{h?e(null,h):(n+=1,this.loop&&(n%=r.length),n<r.length?(s&&(s*=2,this.timeoutLimit&&(s=Math.min(s,this.timeoutLimit))),i=this.tryStrategy(r[n],t,{timeout:s,failFast:this.failFast},o)):e(!0))};return i=this.tryStrategy(r[n],t,{timeout:s,failFast:this.failFast},o),{abort:function(){i.abort()},forceMinPriority:function(e){t=e,i&&i.forceMinPriority(e)}}}tryStrategy(t,e,r,n){var s=null,i=null;return r.timeout>0&&(s=new b(r.timeout,function(){i.abort(),n(!0)})),i=t.connect(e,function(t,e){(!(t&&s&&s.isRunning())||r.failFast)&&(s&&s.ensureAborted(),n(t,e))}),{abort:function(){s&&s.ensureAborted(),i.abort()},forceMinPriority:function(t){i.forceMinPriority(t)}}}}class tS{constructor(t){this.strategies=t}isSupported(){return L(this.strategies,E.method("isSupported"))}connect(t,e){var r;return r=P(this.strategies,function(r,n,s,i){var o,a;return r.connect(t,(o=n,a=i,function(t,r){if(a[o].error=t,t){(function(t,e){for(var r=0;r<t.length;r++)if(!e(t[r],r,t))return!1;return!0})(a,function(t){return!!t.error})&&e(!0);return}x(a,function(t){t.forceMinPriority(r.transport.priority)}),e(null,r)}))}),{abort:function(){x(r,tE)},forceMinPriority:function(t){x(r,function(e){e.forceMinPriority(t)})}}}}function tE(t){t.error||t.aborted||(t.abort(),t.aborted=!0)}class tw{constructor(t,e,r){this.strategy=t,this.transports=e,this.ttl=r.ttl||18e5,this.usingTLS=r.useTLS,this.timeline=r.timeline}isSupported(){return this.strategy.isSupported()}connect(t,e){var r=this.usingTLS,n=function(t){var e=t0.getLocalStorage();if(e)try{var r=e[tC(t)];if(r)return JSON.parse(r)}catch(e){tk(t)}return null}(r),s=n&&n.cacheSkipCount?n.cacheSkipCount:0,i=[this.strategy];if(n&&n.timestamp+this.ttl>=E.now()){var o=this.transports[n.transport];o&&(["ws","wss"].includes(n.transport)||s>3?(this.timeline.info({cached:!0,transport:n.transport,latency:n.latency}),i.push(new tb([o],{timeout:2*n.latency+1e3,failFast:!0}))):s++)}var a=E.now(),h=i.pop().connect(t,function n(o,c){o?(tk(r),i.length>0?(a=E.now(),h=i.pop().connect(t,n)):e(o)):(function(t,e,r,n){var s=t0.getLocalStorage();if(s)try{s[tC(t)]=N({timestamp:E.now(),transport:e,latency:r,cacheSkipCount:n})}catch(t){}}(r,c.transport.name,E.now()-a,s),e(null,c))});return{abort:function(){h.abort()},forceMinPriority:function(e){t=e,h&&h.forceMinPriority(e)}}}}function tC(t){return"pusherTransport"+(t?"TLS":"NonTLS")}function tk(t){var e=t0.getLocalStorage();if(e)try{delete e[tC(t)]}catch(t){}}class tO{constructor(t,{delay:e}){this.strategy=t,this.options={delay:e}}isSupported(){return this.strategy.isSupported()}connect(t,e){var r,n=this.strategy,s=new b(this.options.delay,function(){r=n.connect(t,e)});return{abort:function(){s.ensureAborted(),r&&r.abort()},forceMinPriority:function(e){t=e,r&&r.forceMinPriority(e)}}}}class tT{constructor(t,e,r){this.test=t,this.trueBranch=e,this.falseBranch=r}isSupported(){return(this.test()?this.trueBranch:this.falseBranch).isSupported()}connect(t,e){return(this.test()?this.trueBranch:this.falseBranch).connect(t,e)}}class tx{constructor(t){this.strategy=t}isSupported(){return this.strategy.isSupported()}connect(t,e){var r=this.strategy.connect(t,function(t,n){n&&r.abort(),e(t,n)});return r}}function tP(t){return function(){return t.isSupported()}}class tA extends H{constructor(t,e,r){super(),this.hooks=t,this.method=e,this.url=r}start(t){this.position=0,this.xhr=this.hooks.getRequest(this),this.unloader=()=>{this.close()},t0.addUnloadListener(this.unloader),this.xhr.open(this.method,this.url,!0),this.xhr.setRequestHeader&&this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.send(t)}close(){this.unloader&&(t0.removeUnloadListener(this.unloader),this.unloader=null),this.xhr&&(this.hooks.abortRequest(this.xhr),this.xhr=null)}onChunk(t,e){for(;;){var r=this.advanceBuffer(e);if(r)this.emit("chunk",{status:t,data:r});else break}this.isBufferTooLong(e)&&this.emit("buffer_too_long")}advanceBuffer(t){var e=t.slice(this.position),r=e.indexOf("\n");return -1!==r?(this.position+=r+1,e.slice(0,r)):null}isBufferTooLong(t){return this.position===t.length&&t.length>262144}}(n=o||(o={}))[n.CONNECTING=0]="CONNECTING",n[n.OPEN=1]="OPEN",n[n.CLOSED=3]="CLOSED";var tR=o,tL=1;function tN(t){var e=-1===t.indexOf("?")?"?":"&";return t+e+"t="+ +new Date+"&n="+tL++}function tU(t){return t0.randomInt(t)}var tI=class{constructor(t,e){var r;this.hooks=t,this.session=tU(1e3)+"/"+function(t){for(var e=[],r=0;r<8;r++)e.push(tU(32).toString(32));return e.join("")}(0),this.location={base:(r=/([^\?]*)\/*(\??.*)/.exec(e))[1],queryString:r[2]},this.readyState=tR.CONNECTING,this.openStream()}send(t){return this.sendRaw(JSON.stringify([t]))}ping(){this.hooks.sendHeartbeat(this)}close(t,e){this.onClose(t,e,!0)}sendRaw(t){if(this.readyState!==tR.OPEN)return!1;try{var e,r;return t0.createSocketRequest("POST",tN((e=this.location,r=this.session,e.base+"/"+r+"/xhr_send"))).start(t),!0}catch(t){return!1}}reconnect(){this.closeStream(),this.openStream()}onClose(t,e,r){this.closeStream(),this.readyState=tR.CLOSED,this.onclose&&this.onclose({code:t,reason:e,wasClean:r})}onChunk(t){if(200===t.status)switch(this.readyState===tR.OPEN&&this.onActivity(),t.data.slice(0,1)){case"o":e=JSON.parse(t.data.slice(1)||"{}"),this.onOpen(e);break;case"a":e=JSON.parse(t.data.slice(1)||"[]");for(var e,r=0;r<e.length;r++)this.onEvent(e[r]);break;case"m":e=JSON.parse(t.data.slice(1)||"null"),this.onEvent(e);break;case"h":this.hooks.onHeartbeat(this);break;case"c":e=JSON.parse(t.data.slice(1)||"[]"),this.onClose(e[0],e[1],!0)}}onOpen(t){var e,r,n;this.readyState===tR.CONNECTING?(t&&t.hostname&&(this.location.base=(e=this.location.base,r=t.hostname,(n=/(https?:\/\/)([^\/:]+)((\/|:)?.*)/.exec(e))[1]+r+n[3])),this.readyState=tR.OPEN,this.onopen&&this.onopen()):this.onClose(1006,"Server lost session",!0)}onEvent(t){this.readyState===tR.OPEN&&this.onmessage&&this.onmessage({data:t})}onActivity(){this.onactivity&&this.onactivity()}onError(t){this.onerror&&this.onerror(t)}openStream(){this.stream=t0.createSocketRequest("POST",tN(this.hooks.getReceiveURL(this.location,this.session))),this.stream.bind("chunk",t=>{this.onChunk(t)}),this.stream.bind("finished",t=>{this.hooks.onFinished(this,t)}),this.stream.bind("buffer_too_long",()=>{this.reconnect()});try{this.stream.start()}catch(t){E.defer(()=>{this.onError(t),this.onClose(1006,"Could not start streaming",!1)})}}closeStream(){this.stream&&(this.stream.unbind_all(),this.stream.close(),this.stream=null)}},tD={getReceiveURL:function(t,e){return t.base+"/"+e+"/xhr_streaming"+t.queryString},onHeartbeat:function(t){t.sendRaw("[]")},sendHeartbeat:function(t){t.sendRaw("[]")},onFinished:function(t,e){t.onClose(1006,"Connection interrupted ("+e+")",!1)}},tM={getReceiveURL:function(t,e){return t.base+"/"+e+"/xhr"+t.queryString},onHeartbeat:function(){},sendHeartbeat:function(t){t.sendRaw("[]")},onFinished:function(t,e){200===e?t.reconnect():t.onClose(1006,"Connection interrupted ("+e+")",!1)}},tH={getRequest:function(t){var e=new(t0.getXHRAPI());return e.onreadystatechange=e.onprogress=function(){switch(e.readyState){case 3:e.responseText&&e.responseText.length>0&&t.onChunk(e.status,e.responseText);break;case 4:e.responseText&&e.responseText.length>0&&t.onChunk(e.status,e.responseText),t.emit("finished",e.status),t.close()}},e},abortRequest:function(t){t.onreadystatechange=null,t.abort()}},tB=r(18),tq=r(19),tz=new class extends H{isOnline(){return!0}};(s=a||(a={})).UserAuthentication="user-authentication",s.ChannelAuthorization="channel-authorization";var tF=function(t,e,r,n,s){let i=t0.createXHR();for(var o in i.open("POST",r.endpoint,!0),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.headers)i.setRequestHeader(o,r.headers[o]);if(null!=r.headersProvider){let t=r.headersProvider();for(var o in t)i.setRequestHeader(o,t[o])}return i.onreadystatechange=function(){if(4===i.readyState){if(200===i.status){let t;let e=!1;try{t=JSON.parse(i.responseText),e=!0}catch(t){s(new to(200,`JSON returned from ${n.toString()} endpoint was invalid, yet status code was 200. Data was: ${i.responseText}`),null)}e&&s(null,t)}else{let t="";switch(n){case a.UserAuthentication:t=th.buildLogSuffix("authenticationEndpoint");break;case a.ChannelAuthorization:t=`Clients must be authorized to join private or presence channels. ${th.buildLogSuffix("authorizationEndpoint")}`}s(new to(i.status,`Unable to retrieve auth string from ${n.toString()} endpoint - received status: ${i.status} from ${r.endpoint}. ${t}`),null)}}},i.send(e),i},tj=r(3);let{getDefaultStrategy:tK,Transports:tG,setup:tY,getProtocol:tW,isXHRSupported:tV,getLocalStorage:t$,createXHR:tX,createWebSocket:tJ,addUnloadListener:tZ,removeUnloadListener:tQ,transportConnectionInitializer:t5,createSocketRequest:t1,HTTPFactory:t2}={getDefaultStrategy:function(t,e,r){var n,s={};function i(e,n,i,o,a){var h=r(t,e,n,i,o,a);return s[e]=h,h}var o=Object.assign({},e,{hostNonTLS:t.wsHost+":"+t.wsPort,hostTLS:t.wsHost+":"+t.wssPort,httpPath:t.wsPath}),a=w({},o,{useTLS:!0}),h=Object.assign({},e,{hostNonTLS:t.httpHost+":"+t.httpPort,hostTLS:t.httpHost+":"+t.httpsPort,httpPath:t.httpPath}),c={loop:!0,timeout:15e3,timeoutLimit:6e4},u=new tm({minPingDelay:1e4,maxPingDelay:t.activityTimeout}),l=new tm({lives:2,minPingDelay:1e4,maxPingDelay:t.activityTimeout}),d=i("ws","ws",3,o,u),f=i("wss","ws",3,a,u),p=i("xhr_streaming","xhr_streaming",1,h,l),g=i("xhr_polling","xhr_polling",1,h),_=new tb([d],c),v=new tb([f],c),y=new tb([p],c),m=new tb([g],c),b=new tb([new tT(tP(y),new tS([y,new tO(m,{delay:4e3})]),m)],c);return n=new tS(e.useTLS?[_,new tO(b,{delay:2e3})]:[_,new tO(v,{delay:2e3}),new tO(b,{delay:5e3})]),new tw(new tx(new tT(tP(d),n,b)),s,{ttl:18e5,timeline:e.timeline,useTLS:e.useTLS})},Transports:W,transportConnectionInitializer:function(){this.timeline.info(this.buildTimelineMessage({transport:this.name+(this.options.useTLS?"s":"")})),this.hooks.isInitialized()?this.changeState("initialized"):this.onClose()},HTTPFactory:{createStreamingSocket(t){return this.createSocket(tD,t)},createPollingSocket(t){return this.createSocket(tM,t)},createSocket:(t,e)=>new tI(t,e),createXHR(t,e){return this.createRequest(tH,t,e)},createRequest:(t,e,r)=>new tA(t,e,r)},setup(t){t.ready()},getLocalStorage(){},getClientFeatures:()=>T(R({ws:W.ws},function(t){return t.isSupported({})})),getProtocol:()=>"http:",isXHRSupported:()=>!0,createSocketRequest(t,e){if(this.isXHRSupported())return this.HTTPFactory.createXHR(t,e);throw"Cross-origin HTTP requests are not supported"},createXHR(){return new(this.getXHRAPI())},createWebSocket(t){return new(this.getWebSocketAPI())(t)},addUnloadListener(t){},removeUnloadListener(t){}};var t0={getDefaultStrategy:tK,Transports:tG,setup:tY,getProtocol:tW,isXHRSupported:tV,createSocketRequest:t1,getLocalStorage:t$,createXHR:tX,createWebSocket:tJ,addUnloadListener:tZ,removeUnloadListener:tQ,transportConnectionInitializer:t5,HTTPFactory:t2,TimelineTransport:{name:"xhr",getAgent:function(t,e){return function(r,n){var s,i,o,a="http"+(e?"s":"")+"://"+(t.host||t.options.host)+t.options.path;a+="/2?"+P((s=R(r,function(t){return void 0!==t}),i={},O(s,function(t,e){var r;i[e]=("object"==typeof(r=t)&&(r=N(r)),encodeURIComponent(_(r.toString().replace(/[^\x00-\x7F]/g,p))))}),o=[],O(i,function(t,e){o.push([e,t])}),o),E.method("join","=")).join("&");var h=t0.createXHR();h.open("GET",a,!0),h.onreadystatechange=function(){if(4===h.readyState){let{status:r,responseText:n}=h;if(200!==r){B.debug(`TimelineSender Error: received ${r} from stats.pusher.com`);return}try{var{host:e}=JSON.parse(n)}catch(t){B.debug(`TimelineSenderError: invalid response ${n}`)}e&&(t.host=e)}},h.send()}}},getAuthorizers:()=>({ajax:tF}),getWebSocketAPI:()=>tB.Client,getXHRAPI:()=>tq.XMLHttpRequest,getNetwork:()=>tz,randomInt:t=>Object(tj.randomInt)(t)};(i=h||(h={}))[i.ERROR=3]="ERROR",i[i.INFO=6]="INFO",i[i.DEBUG=7]="DEBUG";var t6=h;class t3{constructor(t,e,r){this.key=t,this.session=e,this.events=[],this.options=r||{},this.sent=0,this.uniqueID=0}log(t,e){t<=this.options.level&&(this.events.push(w({},e,{timestamp:E.now()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())}error(t){this.log(t6.ERROR,t)}info(t){this.log(t6.INFO,t)}debug(t){this.log(t6.DEBUG,t)}isEmpty(){return 0===this.events.length}send(t,e){var r=w({session:this.session,bundle:this.sent+1,key:this.key,lib:"js",version:this.options.version,cluster:this.options.cluster,features:this.options.features,timeline:this.events},this.options.params);return this.events=[],t(r,(t,r)=>{!t&&this.sent++,e&&e(t,r)}),!0}generateUniqueID(){return this.uniqueID++,this.uniqueID}}class t8{constructor(t,e,r,n){this.name=t,this.priority=e,this.transport=r,this.options=n||{}}isSupported(){return this.transport.isSupported({useTLS:this.options.useTLS})}connect(t,e){if(!this.isSupported())return t4(new ti,e);if(this.priority<t)return t4(new te,e);var r=!1,n=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),s=null,i=function(){n.unbind("initialized",i),n.connect()},o=function(){s=ty.createHandshake(n,function(t){r=!0,c(),e(null,t)})},a=function(t){c(),e(t)},h=function(){var t;c(),t=N(n),e(new tr(t))},c=function(){n.unbind("initialized",i),n.unbind("open",o),n.unbind("error",a),n.unbind("closed",h)};return n.bind("initialized",i),n.bind("open",o),n.bind("error",a),n.bind("closed",h),n.initialize(),{abort:()=>{r||(c(),s?s.close():n.close())},forceMinPriority:t=>{!r&&this.priority<t&&(s?s.close():n.close())}}}}function t4(t,e){return E.defer(function(){e(t)}),{abort:function(){},forceMinPriority:function(){}}}let{Transports:t9}=t0;var t7=function(t,e,r,n,s,i){var o,a=t9[r];if(!a)throw new ts(r);return t.enabledTransports&&-1===k(t.enabledTransports,e)||t.disabledTransports&&-1!==k(t.disabledTransports,e)?o=et:(s=Object.assign({ignoreNullOrigin:t.ignoreNullOrigin},s),o=new t8(e,n,i?i.getAssistant(a):a,s)),o},et={isSupported:function(){return!1},connect:function(t,e){var r=E.defer(function(){e(new ti)});return{abort:function(){r.ensureAborted()},forceMinPriority:function(){}}}};function ee(t){if(null==t)throw"You must pass an options object";if(null==t.cluster)throw"Options object must provide a cluster";"disableStats"in t&&B.warn("The disableStats option is deprecated in favor of enableStats")}let er=(t,e)=>{var r="socket_id="+encodeURIComponent(t.socketId);for(var n in e.params)r+="&"+encodeURIComponent(n)+"="+encodeURIComponent(e.params[n]);if(null!=e.paramsProvider){let t=e.paramsProvider();for(var n in t)r+="&"+encodeURIComponent(n)+"="+encodeURIComponent(t[n])}return r};var en=t=>{if(void 0===t0.getAuthorizers()[t.transport])throw`'${t.transport}' is not a recognized auth transport`;return(e,r)=>{let n=er(e,t);t0.getAuthorizers()[t.transport](t0,n,t,a.UserAuthentication,r)}};let es=(t,e)=>{var r="socket_id="+encodeURIComponent(t.socketId);for(var n in r+="&channel_name="+encodeURIComponent(t.channelName),e.params)r+="&"+encodeURIComponent(n)+"="+encodeURIComponent(e.params[n]);if(null!=e.paramsProvider){let t=e.paramsProvider();for(var n in t)r+="&"+encodeURIComponent(n)+"="+encodeURIComponent(t[n])}return r};var ei=t=>{if(void 0===t0.getAuthorizers()[t.transport])throw`'${t.transport}' is not a recognized auth transport`;return(e,r)=>{let n=es(e,t);t0.getAuthorizers()[t.transport](t0,n,t,a.ChannelAuthorization,r)}};let eo=(t,e,r)=>{let n={authTransport:e.transport,authEndpoint:e.endpoint,auth:{params:e.params,headers:e.headers}};return(e,s)=>{let i=t.channel(e.channelName),o=r(i,n);o.authorize(e.socketId,s)}};class ea extends H{constructor(t){super(function(t,e){B.debug(`No callbacks on watchlist events for ${t}`)}),this.pusher=t,this.bindWatchlistInternalEvent()}handleEvent(t){t.data.events.forEach(t=>{this.emit(t.name,t)})}bindWatchlistInternalEvent(){this.pusher.connection.bind("message",t=>{"pusher_internal:watchlist_events"===t.event&&this.handleEvent(t)})}}var eh=function(){let t,e;let r=new Promise((r,n)=>{t=r,e=n});return{promise:r,resolve:t,reject:e}};class ec extends H{constructor(t){super(function(t,e){B.debug("No callbacks on user for "+t)}),this.signin_requested=!1,this.user_data=null,this.serverToUserChannel=null,this.signinDonePromise=null,this._signinDoneResolve=null,this._onAuthorize=(t,e)=>{if(t){B.warn(`Error during signin: ${t}`),this._cleanup();return}this.pusher.send_event("pusher:signin",{auth:e.auth,user_data:e.user_data})},this.pusher=t,this.pusher.connection.bind("state_change",({previous:t,current:e})=>{"connected"!==t&&"connected"===e&&this._signin(),"connected"===t&&"connected"!==e&&(this._cleanup(),this._newSigninPromiseIfNeeded())}),this.watchlist=new ea(t),this.pusher.connection.bind("message",t=>{"pusher:signin_success"===t.event&&this._onSigninSuccess(t.data),this.serverToUserChannel&&this.serverToUserChannel.name===t.channel&&this.serverToUserChannel.handleEvent(t)})}signin(){this.signin_requested||(this.signin_requested=!0,this._signin())}_signin(){this.signin_requested&&(this._newSigninPromiseIfNeeded(),"connected"===this.pusher.connection.state&&this.pusher.config.userAuthenticator({socketId:this.pusher.connection.socket_id},this._onAuthorize))}_onSigninSuccess(t){try{this.user_data=JSON.parse(t.user_data)}catch(e){B.error(`Failed parsing user data after signin: ${t.user_data}`),this._cleanup();return}if("string"!=typeof this.user_data.id||""===this.user_data.id){B.error(`user_data doesn't contain an id. user_data: ${this.user_data}`),this._cleanup();return}this._signinDoneResolve(),this._subscribeChannels()}_subscribeChannels(){this.serverToUserChannel=new tc(`#server-to-user-${this.user_data.id}`,this.pusher),this.serverToUserChannel.bind_global((t,e)=>{0!==t.indexOf("pusher_internal:")&&0!==t.indexOf("pusher:")&&this.emit(t,e)}),(t=>{t.subscriptionPending&&t.subscriptionCancelled?t.reinstateSubscription():t.subscriptionPending||"connected"!==this.pusher.connection.state||t.subscribe()})(this.serverToUserChannel)}_cleanup(){this.user_data=null,this.serverToUserChannel&&(this.serverToUserChannel.unbind_all(),this.serverToUserChannel.disconnect(),this.serverToUserChannel=null),this.signin_requested&&this._signinDoneResolve()}_newSigninPromiseIfNeeded(){if(!this.signin_requested||this.signinDonePromise&&!this.signinDonePromise.done)return;let{promise:t,resolve:e,reject:r}=eh();t.done=!1;let n=()=>{t.done=!0};t.then(n).catch(n),this.signinDonePromise=t,this._signinDoneResolve=e}}class eu{static ready(){eu.isReady=!0;for(var t=0,e=eu.instances.length;t<e;t++)eu.instances[t].connect()}static getClientFeatures(){return T(R({ws:t0.Transports.ws},function(t){return t.isSupported({})}))}constructor(t,e){let r;(function(t){if(null==t)throw"You must pass your app key when you instantiate Pusher."})(t),ee(e),this.key=t,this.config=(r={activityTimeout:e.activityTimeout||U.activityTimeout,cluster:e.cluster,httpPath:e.httpPath||U.httpPath,httpPort:e.httpPort||U.httpPort,httpsPort:e.httpsPort||U.httpsPort,pongTimeout:e.pongTimeout||U.pongTimeout,statsHost:e.statsHost||U.stats_host,unavailableTimeout:e.unavailableTimeout||U.unavailableTimeout,wsPath:e.wsPath||U.wsPath,wsPort:e.wsPort||U.wsPort,wssPort:e.wssPort||U.wssPort,enableStats:"enableStats"in e?e.enableStats:"disableStats"in e&&!e.disableStats,httpHost:e.httpHost?e.httpHost:e.cluster?`sockjs-${e.cluster}.pusher.com`:U.httpHost,useTLS:function(t){if("https:"===t0.getProtocol());else if(!1===t.forceTLS)return!1;return!0}(e),wsHost:e.wsHost?e.wsHost:`ws-${e.cluster}.pusher.com`,userAuthenticator:function(t){let e=Object.assign(Object.assign({},U.userAuthentication),t.userAuthentication);return"customHandler"in e&&null!=e.customHandler?e.customHandler:en(e)}(e),channelAuthorizer:function(t,e){let r;let n=("channelAuthorization"in t?r=Object.assign(Object.assign({},U.channelAuthorization),t.channelAuthorization):(r={transport:t.authTransport||U.authTransport,endpoint:t.authEndpoint||U.authEndpoint},"auth"in t&&("params"in t.auth&&(r.params=t.auth.params),"headers"in t.auth&&(r.headers=t.auth.headers)),"authorizer"in t&&(r.customHandler=eo(e,r,t.authorizer))),r);return"customHandler"in n&&null!=n.customHandler?n.customHandler:ei(n)}(e,this)},"disabledTransports"in e&&(r.disabledTransports=e.disabledTransports),"enabledTransports"in e&&(r.enabledTransports=e.enabledTransports),"ignoreNullOrigin"in e&&(r.ignoreNullOrigin=e.ignoreNullOrigin),"timelineParams"in e&&(r.timelineParams=e.timelineParams),"nacl"in e&&(r.nacl=e.nacl),r),this.channels=ty.createChannels(),this.global_emitter=new H,this.sessionID=t0.randomInt(1e9),this.timeline=new t3(this.key,this.sessionID,{cluster:this.config.cluster,features:eu.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:t6.INFO,version:U.VERSION}),this.config.enableStats&&(this.timelineSender=ty.createTimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/"+t0.TimelineTransport.name})),this.connection=ty.createConnectionManager(this.key,{getStrategy:t=>t0.getDefaultStrategy(this.config,t,t7),timeline:this.timeline,activityTimeout:this.config.activityTimeout,pongTimeout:this.config.pongTimeout,unavailableTimeout:this.config.unavailableTimeout,useTLS:!!this.config.useTLS}),this.connection.bind("connected",()=>{this.subscribeAll(),this.timelineSender&&this.timelineSender.send(this.connection.isUsingTLS())}),this.connection.bind("message",t=>{var e=0===t.event.indexOf("pusher_internal:");if(t.channel){var r=this.channel(t.channel);r&&r.handleEvent(t)}e||this.global_emitter.emit(t.event,t.data)}),this.connection.bind("connecting",()=>{this.channels.disconnect()}),this.connection.bind("disconnected",()=>{this.channels.disconnect()}),this.connection.bind("error",t=>{B.warn(t)}),eu.instances.push(this),this.timeline.info({instances:eu.instances.length}),this.user=new ec(this),eu.isReady&&this.connect()}channel(t){return this.channels.find(t)}allChannels(){return this.channels.all()}connect(){if(this.connection.connect(),this.timelineSender&&!this.timelineSenderTimer){var t=this.connection.isUsingTLS(),e=this.timelineSender;this.timelineSenderTimer=new S(6e4,function(){e.send(t)})}}disconnect(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)}bind(t,e,r){return this.global_emitter.bind(t,e,r),this}unbind(t,e,r){return this.global_emitter.unbind(t,e,r),this}bind_global(t){return this.global_emitter.bind_global(t),this}unbind_global(t){return this.global_emitter.unbind_global(t),this}unbind_all(t){return this.global_emitter.unbind_all(),this}subscribeAll(){var t;for(t in this.channels.channels)this.channels.channels.hasOwnProperty(t)&&this.subscribe(t)}subscribe(t){var e=this.channels.add(t,this);return e.subscriptionPending&&e.subscriptionCancelled?e.reinstateSubscription():e.subscriptionPending||"connected"!==this.connection.state||e.subscribe(),e}unsubscribe(t){var e=this.channels.find(t);e&&e.subscriptionPending?e.cancelSubscription():(e=this.channels.remove(t))&&e.subscribed&&e.unsubscribe()}send_event(t,e,r){return this.connection.send_event(t,e,r)}shouldUseTLS(){return this.config.useTLS}signin(){this.user.signin()}}eu.instances=[],eu.isReady=!1,eu.logToConsole=!1,eu.Runtime=t0,eu.ScriptReceivers=t0.ScriptReceivers,eu.DependenciesReceivers=t0.DependenciesReceivers,eu.auth_callbacks=t0.auth_callbacks;var el=eu;t0.setup(eu);var ed=r(20);class ef extends el{constructor(t,e){el.logToConsole=ef.logToConsole,el.log=ef.log,ee(e),e.nacl=ed,super(t,e)}}}])}};