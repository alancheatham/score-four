(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[531],{8335:function(e,t,n){Promise.resolve().then(n.bind(n,6616))},6616:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var r=n(7437);n(6691);var i=n(2265),l=n(7965),s=n.n(l);function o(e,t,n){if(0===e)return!1;if(0===n)t.push(e);else{if(e!==t[n-1])return!1;if(3===n)return 1==e?"W":"B";t.push(e)}}let f=new(s())("1e06bf145be2669ab894",{cluster:"us2"});function c(e){let{beads:t,onPegClick:n,className:i}=e;return(0,r.jsx)("div",{className:"bg-gray-400 rounded w-8 h-28 flex flex-col-reverse items-center justify-start overflow-hidden ".concat(i),onClick:n,children:t.filter(e=>0!==e).map((e,t)=>(0,r.jsx)("div",{className:"w-full h-6 ".concat(1===e?"bg-white":"bg-black")},"bead-".concat(t)))})}function a(e){let{board:t,onPegClick:n,winningPegs:i,myTurn:l}=e,s=[];for(let e=0;e<16;e++)s.push(t.slice(4*e,4*e+4));return(0,r.jsx)("div",{className:"grid grid-cols-4 grid-rows-4 gap-10",children:s.map((e,t)=>(0,r.jsx)(c,{beads:e,onPegClick:()=>n(t),className:"".concat(i.length>0&&!i.includes(t)&&"opacity-50"," ").concat(l&&!e.find(e=>0===e)&&"cursor-pointer")},"peg-".concat(t)))})}function u(e){console.log(e);let[t,n]=(0,i.useState)(Array(64).fill(0)),[l,s]=(0,i.useState)(""),[c,u]=(0,i.useState)([]),[g,d]=(0,i.useState)(!0);return(0,i.useEffect)(()=>{let e=f.subscribe("score-four");return e.bind("move",e=>{let{board:t,winnerInfo:r}=e.message;n(t),d(!0),r&&(u(r.winningPegs),s(r.winner))}),e.bind("new-game",e=>{let{board:t}=e.message;d(!0)}),()=>{f.unsubscribe("score-four")}},[t]),(0,r.jsx)("main",{className:"flex min-h-screen flex-col items-center justify-between p-24",children:(0,r.jsxs)("div",{className:"relative ".concat("W"===l?"text-white":"B"===l?"text-black":""),children:[l?(0,r.jsx)("div",{className:"text-6xl absolute text-center w-full left-1/2",style:{top:"-70px",transform:"translateX(-50%)"},children:l}):(0,r.jsx)("div",{className:"text-xl absolute text-center w-full left-1/2 ".concat(!g&&"text-white"),style:{top:"-50px",transform:"translateX(-50%)"},children:g?"You":"Computer"}),(0,r.jsx)("div",{children:(0,r.jsx)(a,{board:t,onPegClick:e=>{let r=[...t],i=r.slice(4*e,4*e+4),l=i.findIndex(e=>0===e);if(!g||-1===l)return;d(!1),fetch("/api",{method:"POST",body:JSON.stringify({message:{type:"move",slot:4*e+l},sender:"player"}),headers:{"Content-Type":"application/json"}}),r[4*e+l]=g?-1:1,n(r);let f=function(e){if(16!==e.length){let t=[];for(let n=0;n<16;n++)t.push(e.slice(4*n,4*n+4));e=t}let t="";return(t=function(e){let t=[];for(let n=0;n<4;n++)for(let r=0;r<4;r++)for(let i=0;i<4;i++){let l=4*r+i,s=e[l][n],f=o(s,t,i);if(f)return{winner:f,winningPegs:[l,l-1,l-2,l-3]};!1===f&&(t=[])}}(e))||(t=function(e){let t=[];for(let n=0;n<4;n++)for(let r=0;r<4;r++)for(let i=0;i<4;i++){let l=4*i+r,s=e[l][n],f=o(s,t,i);if(f)return{winner:f,winningPegs:[l,l-4,l-8,l-12]};!1===f&&(t=[])}}(e))||(t=function(e){let t=[];for(let n=0;n<4;n++){for(let r=0;r<4;r++){let i=5*r,l=e[i][n],s=o(l,t,r);if(s)return{winner:s,winningPegs:[0,5,10,15]};!1===s&&(t=[])}for(let r=0;r<4;r++){let i=3*r+3,l=e[i][n],s=o(l,t,r);if(s)return{winner:s,winningPegs:[3,6,9,12]};!1===s&&(t=[])}}}(e))||(t=function(e){let t=[];for(let n=0;n<4;n++)for(let r=0;r<4;r++)for(let i=0;i<4;i++){let l=4*n+r,s=e[l][i],f=o(s,t,i);if(f)return{winner:f,winningPegs:[l]};!1===f&&(t=[])}}(e))||(t=function(e){let t=[];for(let n=0;n<4;n++){for(let r=0;r<4;r++){let i=4*n+r,l=e[i][r],s=o(l,t,r);if(s)return{winner:s,winningPegs:[i,i-1,i-2,i-3]};!1===s&&(t=[])}for(let r=0;r<4;r++){let i=4*n+r,l=e[i][3-r],s=o(l,t,r);if(s)return{winner:s,winningPegs:[i,i-1,i-2,i-3]};!1===s&&(t=[])}}}(e))||(t=function(e){let t=[];for(let n=0;n<4;n++){for(let r=0;r<4;r++){let i=4*r+n,l=e[i][r],s=o(l,t,r);if(s)return{winner:s,winningPegs:[i,i-4,i-8,i-12]};!1===s&&(t=[])}for(let r=0;r<4;r++){let i=4*r+n,l=e[i][3-r],s=o(l,t,r);if(s)return{winner:s,winningPegs:[i,i-4,i-8,i-12]};!1===s&&(t=[])}}}(e))||(t=function(e){let t=[];for(let n=0;n<2;n++)for(let r=0;r<4;r++){let i=5*r,l=0===n?e[i][3-r]:e[i][r],s=o(l,t,r);if(s)return{winner:s,winningPegs:[0,5,10,15]};!1===s&&(t=[])}for(let n=0;n<2;n++)for(let r=0;r<4;r++){let i=3*r+3,l=0===n?e[i][3-r]:e[i][r],s=o(l,t,r);if(s)return{winner:s,winningPegs:[3,6,9,12]};!1===s&&(t=[])}}(e))?t:!function(e){for(let t=0;t<16;t++)if(e[t].findIndex(e=>0===e)>-1)return!1;return!0}(e)?t:{winner:"draw",winningPegs:[],board:e}}(r);f&&(u(f.winningPegs),s(f.winner))},winningPegs:c,myTurn:g})}),l&&(0,r.jsx)("button",{className:"text-xl absolute top-1/2 p-1 border-2 rounded hover:opacity-50 ".concat("W"===l?"border-white":"border-black"),style:{right:"-130px",transform:"translateY(-50%)"},onClick:()=>{n(Array(64).fill(0)),u([]),s(""),fetch("/api",{method:"POST",body:JSON.stringify({message:{type:"new-game"},sender:"player"})})},children:"Rematch"})]})})}}},function(e){e.O(0,[986,965,971,864,744],function(){return e(e.s=8335)}),_N_E=e.O()}]);